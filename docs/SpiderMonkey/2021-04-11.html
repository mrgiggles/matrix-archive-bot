<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2021-04-11</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2021-04-11<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-04-10" class="nav-link"><span>prev</span></a>
<a href="2021-04-12" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sat Apr 10 2021 23:09:59 GMT-0700 (Pacific Daylight Time)">06:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: Got it, I'll work on adding it soon!</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sun Apr 11 2021 00:20:32 GMT-0700 (Pacific Daylight Time)">07:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><a href="https://discourse.mozilla.org/t/survey-where-are-you-embedding-spidermonkey/77988/6">https://discourse.mozilla.org/t/survey-where-are-you-embedding-spidermonkey/77988/6</a> I hope this is fine ðŸ™ƒ</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sun Apr 11 2021 04:10:11 GMT-0700 (Pacific Daylight Time)">11:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>I think the correct layout for the resume point after newObject is:</p>
<pre><code>18 1 4 4 16 0 1 1
18 = newObject (on stack)
1 = i   (local var; not in scope yet)
4 = sum (local var)
4 = o   (local var)
16 = mm (local var)
0 = this
1 = environment chain
1 = args object
</code></pre>
</blockquote></mx-reply>Thx. seems I am wrong because I don't know why "o != newObject".</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sun Apr 11 2021 04:10:30 GMT-0700 (Pacific Daylight Time)">11:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">But the another part is easy to understand with your explain.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sun Apr 11 2021 04:16:50 GMT-0700 (Pacific Daylight Time)">11:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">When we bailout to baseline, we need a function to recover the baselineframe, could anyone tell me the function name?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sun Apr 11 2021 05:01:16 GMT-0700 (Pacific Daylight Time)">12:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">|FinishBailoutToBaseline|. seems is this</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sun Apr 11 2021 07:06:19 GMT-0700 (Pacific Daylight Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Redfire</span>: thanks, looks good!</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Sun Apr 11 2021 10:28:33 GMT-0700 (Pacific Daylight Time)">17:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-4">18f</span>: If you look at the output of <code>dis(jit)</code>, <code>let o = {x: mm, y: 2}</code> looks like this:</p>
<pre><code>00026: NewObject ({x:(void 0), y:(void 0)}) # OBJ
00031:  GetLocal 0                      # OBJ mm
00035:  InitProp "x"                    # OBJ
00040:  Int8 2                          # OBJ 2
00042:  InitProp "y"                    # OBJ
00047:  InitLexical 1                   # OBJ
</code></pre>
</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Sun Apr 11 2021 10:31:33 GMT-0700 (Pacific Daylight Time)">17:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">We create the new object at offset 26, but we don't store it into <code>o</code> until offset 47.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Sun Apr 11 2021 10:32:37 GMT-0700 (Pacific Daylight Time)">17:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">So in the resume point right after <code>NewObject</code>, <code>o</code> isn't set yet</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Sun Apr 11 2021 14:24:32 GMT-0700 (Pacific Daylight Time)">21:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@mehaboob_shariff:mozilla.org">mehaboob_shariff</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-4">mehaboob_shariff</span>: <code>IRGenerator</code> and all its subclasses are in <code>CacheIR.h</code>. The <code>isFirstStub</code> bug will have to change that code, and probably also the code in <code>BaselineIC.cpp</code> and <code>IonIC.cpp</code> that creates IRGenerators.</blockquote></mx-reply>This emitCalleeGaurd member function which is declared in CacheIR.cpp also uses the isFirstStub</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Sun Apr 11 2021 14:27:08 GMT-0700 (Pacific Daylight Time)">21:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@mehaboob_shariff:mozilla.org">mehaboob_shariff</span>&gt;</div></td><td class="msg-cell">And If I remove isFirstStub from CallIRGenerator then emitCallee wont be able to access it</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Sun Apr 11 2021 15:27:55 GMT-0700 (Pacific Daylight Time)">22:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">where is the source of <a href="https://firefox-source-docs.mozilla.org/js/build.html">https://firefox-source-docs.mozilla.org/js/build.html</a> stored?  I'd like to propose a change to MOZCONFIG file for debug build, to explicitly specify MOZ_OBJDIR, so that it doesn't conflict with Firefox build</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Sun Apr 11 2021 16:16:29 GMT-0700 (Pacific Daylight Time)">23:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">mehaboob_shariff</span>: CallIRGenerator inherits from IRGenerator. You can make <code>isFirstStub_</code> a protected member of IRGenerator, or add an accessor function (<code>bool isFirstStub() const { return isFirstStub_; }</code>) and call that function from <code>emitCallGuard</code></td></tr>

</tbody></table></div></div></div>
</body></html>