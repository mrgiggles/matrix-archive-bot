<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-08-24</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-08-24<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-08-23" class="nav-link"><span>prev</span></a>
<a href="2022-08-25" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Aug 23 2022 17:02:30 GMT-0700 (Pacific Daylight Time)">00:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">though maybe if you have the right sysroot available you'll be better off. I'm missing the cross-compiled crt0.o files</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Aug 23 2022 17:04:22 GMT-0700 (Pacific Daylight Time)">00:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-7">ewang21</span>: adding <code>--enable-gold</code> seems to get me through</blockquote></mx-reply>ERROR: Cannot compile for aarch64-pc-linux-gnu with /home/ewang21/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/bin/rustc</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Aug 23 2022 17:10:47 GMT-0700 (Pacific Daylight Time)">00:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">I just had to <code>rustup target add aarch64-unknown-linux-gnu</code></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Aug 23 2022 17:11:06 GMT-0700 (Pacific Daylight Time)">00:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">(you need the appropriate cross-compile rust compiler)</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Aug 23 2022 17:12:04 GMT-0700 (Pacific Daylight Time)">00:12</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span></div></td><td class="msg-cell">is off now</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Aug 23 2022 17:59:00 GMT-0700 (Pacific Daylight Time)">00:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">I think there might be a bug in the interaction between OffThreadPromiseTask and the internal job queue, but I might also be holding it wrong</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Aug 23 2022 18:01:52 GMT-0700 (Pacific Daylight Time)">01:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">The <a href="https://searchfox.org/mozilla-central/source/js/src/vm/OffThreadPromiseRuntimeState.h#29-101">SMDOC for OffThreadPromiseTask</a> says that it can be used for queuing a task in HTML terms. It gives the example of a promise of the result of network I/O.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Aug 23 2022 18:04:52 GMT-0700 (Pacific Daylight Time)">01:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">InternalJobQueue is the shell's implementation of JobQueue, which represents the microtask queue. In particular, the queue contains reaction jobs for promises. The microtask queue is drained before returning to the event loop.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Aug 23 2022 18:06:51 GMT-0700 (Pacific Daylight Time)">01:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">But in InternalJobQueue::runJobs, we <a href="https://searchfox.org/mozilla-central/source/js/src/vm/JSContext.cpp#871">call</a> OffThreadPromiseState::internalDrain before draining the queue.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Aug 23 2022 18:09:11 GMT-0700 (Pacific Daylight Time)">01:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/source/js/src/vm/OffThreadPromiseRuntimeState.cpp#205-217">internalDrain</a> blocks until <em>every</em> OffThreadPromiseTask that has been initialized (and added to the <code>live</code> list) is done</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Aug 23 2022 18:10:48 GMT-0700 (Pacific Daylight Time)">01:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">So unless I'm missing something, we can't drain the microtask queue in the shell if there's a live OffThreadPromiseTask</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Aug 23 2022 18:11:10 GMT-0700 (Pacific Daylight Time)">01:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Which is a major problem for my plan to use OffThreadPromiseTask to handle timeouts for waitAsync</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Aug 23 2022 18:12:03 GMT-0700 (Pacific Daylight Time)">01:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Does anybody know this code well enough to have opinions about whether the shell is wrong, or I am?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Aug 23 2022 18:14:57 GMT-0700 (Pacific Daylight Time)">01:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">(Specifically, the problem I run into is that if I use a separate timer thread to resolve an OffThreadPromiseTask when a <code>waitAsync</code> times out, then even if there's been a <code>notify</code> that resolved the promise returned by <code>waitAsync</code>, we won't actually run the reaction job until after the timeout has expired.)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Aug 23 2022 19:49:02 GMT-0700 (Pacific Daylight Time)">02:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@mohamed_atef:matrix.org">Mohamed Atef</span>&gt;</div></td><td class="msg-cell">What is the difference between public APIs and the other APIs?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Aug 24 2022 00:44:40 GMT-0700 (Pacific Daylight Time)">07:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">Would you know if there's a way to get the same value as <code>JS_Now()</code> in JS ?</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Aug 24 2022 01:18:50 GMT-0700 (Pacific Daylight Time)">08:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Mohamed Atef</span>: public API is functions/structs exposed to outside of SpiderMonkey, that is gecko (firefox) or other embedding applications.  others are SpiderMonkey-internal things that's not exposed to anywhere</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Aug 24 2022 01:28:55 GMT-0700 (Pacific Daylight Time)">08:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">nchevobbe</span>: in what context or environment?  in JS shell, <code>dateNow()</code> returns <code>JS_Now() / 1000.0</code>, but it's JS shell only</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Aug 24 2022 01:36:15 GMT-0700 (Pacific Daylight Time)">08:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">I wanted it for the console evaluation, to replace this (uggly) piece of code <a href="https://searchfox.org/mozilla-central/rev/d01591796d5faccf762adb09a311d8ee12f7ca7f/devtools/server/actors/webconsole.js#1013-1018">https://searchfox.org/mozilla-central/rev/d01591796d5faccf762adb09a311d8ee12f7ca7f/devtools/server/actors/webconsole.js#1013-1018</a></td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Aug 24 2022 01:37:38 GMT-0700 (Pacific Daylight Time)">08:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">I came across <code>JS_Now</code> which I'm exposing to <code>ConsoleEvent</code> in order to be able to have finer-grained timestamp and avoid ordering problem in the console output</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Aug 24 2022 01:38:35 GMT-0700 (Pacific Daylight Time)">08:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, the requirement includes "comparable with <a href="http://Date.now">Date.now</a>()" ?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Aug 24 2022 01:40:38 GMT-0700 (Pacific Daylight Time)">08:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">ideally I'd want to switch everything we consume in the console to a microsecond-precise timeStamp </td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Aug 24 2022 01:43:54 GMT-0700 (Pacific Daylight Time)">08:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I mean, if that's not requirement and just "a value that changes with microsecond order", there could be some other options, like current system time returned by <code>mozilla::TimeStamp::Now()</code></td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Aug 24 2022 01:46:26 GMT-0700 (Pacific Daylight Time)">08:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">but, looks like, this is not for testing, and I think directly using the <code>JS_Now()</code> (<code>PRMJ_Now()</code>) might be cleaner?</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Aug 24 2022 01:49:05 GMT-0700 (Pacific Daylight Time)">08:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">for testing purpose, for example, <code>Cu.getJSTestingFunctions().timeSinceCreation()</code> returns process's up time</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Aug 24 2022 01:49:06 GMT-0700 (Pacific Daylight Time)">08:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p><a href="https://searchfox.org/mozilla-central/rev/d01591796d5faccf762adb09a311d8ee12f7ca7f/js/src/builtin/TestingFunctions.cpp#7263-7267">https://searchfox.org/mozilla-central/rev/d01591796d5faccf762adb09a311d8ee12f7ca7f/js/src/builtin/TestingFunctions.cpp#7263-7267</a></p>
<pre><code class="language-cpp">static bool TimeSinceCreation(JSContext* cx, unsigned argc, Value* vp) {
  CallArgs args = CallArgsFromVp(argc, vp);
  double when =
      (mozilla::TimeStamp::Now() - mozilla::TimeStamp::ProcessCreation())
          .ToMilliseconds();
</code></pre>
</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Aug 24 2022 01:50:18 GMT-0700 (Pacific Daylight Time)">08:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">no indeed, it's not for testing, but to fix an actual bug we have (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1483662">https://bugzilla.mozilla.org/show_bug.cgi?id=1483662</a>)</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Aug 24 2022 01:52:14 GMT-0700 (Pacific Daylight Time)">08:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">one thing we could do is include a <code>timeStamp</code> property , whose value would be <code>JS_Now()</code>, to the <code>Completion</code> object we return from <code>DebuggerObject::CallData::executeInGlobalWithBindingsMethod</code></td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Aug 24 2022 01:53:13 GMT-0700 (Pacific Daylight Time)">08:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">okay, then I think directly exposing <code>JS_Now</code> or <code>PRMJ_Now</code> would be better option,  and afaik there's no existing function.  so it needs to be implemented as chrome-only API on some object</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Aug 24 2022 01:53:19 GMT-0700 (Pacific Daylight Time)">08:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">not sure if it's the right way to do it, but that might benefit other consumer of this API that would need the same accuracy (thinking about WebDriverBidi for example)</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Aug 24 2022 01:53:44 GMT-0700 (Pacific Daylight Time)">08:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">(I was referring to my solution, not yours :) )</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Aug 24 2022 01:56:09 GMT-0700 (Pacific Daylight Time)">08:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">oh, just realized that, in chrome-priv code, <code><a href="http://performance.now">performance.now</a>()</code> returns not-clipped high-precision timer value</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Aug 24 2022 01:56:25 GMT-0700 (Pacific Daylight Time)">08:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(still not compatible with <code><a href="http://Date.now">Date.now</a>()</code> tho</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Aug 24 2022 02:02:50 GMT-0700 (Pacific Daylight Time)">09:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">yeah, I thought about this, but it wouldn't fit what I want I think.
But you gave me ideas and options, I'll play around :)</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Aug 24 2022 02:04:06 GMT-0700 (Pacific Daylight Time)">09:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">Simple option would be to add a new method that returns <code>PRMJ_Now</code>, on <code>Cu</code> or somewhere</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Aug 24 2022 03:09:22 GMT-0700 (Pacific Daylight Time)">10:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">added a <code>Cu.dateNow()</code> that replicates JSShell <code>dateNow()</code>, and it seems to work quite well.<br><span class="nick-15">arai</span> , can I set you as a reviewer for the patch that adds the method on <code>Cu</code> ?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Aug 24 2022 03:11:21 GMT-0700 (Pacific Daylight Time)">10:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I can review, but I'm not sure about the policy</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Aug 24 2022 03:11:53 GMT-0700 (Pacific Daylight Time)">10:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(I'm not XPConnect peer</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Aug 24 2022 03:12:44 GMT-0700 (Pacific Daylight Time)">10:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">I'll add a peer too then, thanks!</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Aug 24 2022 06:48:17 GMT-0700 (Pacific Daylight Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> (you need the appropriate cross-compile rust compiler)</blockquote></mx-reply>I added it. But there is a new ERROR:old-configure failed because of "configure: error: compiler is incompatible with sanitize options"ðŸ˜‚</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Aug 24 2022 06:49:00 GMT-0700 (Pacific Daylight Time)">13:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">that is where I got too, but it wasn't surprising because I did not have the <code>crt1.o</code> files on my system.</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Aug 24 2022 06:49:28 GMT-0700 (Pacific Daylight Time)">13:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">I'm not sure how to set the right sysroot or whatever for it</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Aug 24 2022 06:50:24 GMT-0700 (Pacific Daylight Time)">13:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">if you have a single foo.cpp file you compile to a binary, are you able to just compile with <code>clang foo.cpp --target=aarch64-linux-pc</code> or do you need other library / sysroot options on your machine?</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Aug 24 2022 06:52:20 GMT-0700 (Pacific Daylight Time)">13:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">I think the configure script can take a <code>--sysroot</code> option which might be needed here</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Aug 24 2022 10:16:42 GMT-0700 (Pacific Daylight Time)">17:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if you have a single foo.cpp file you compile to a binary, are you able to just compile with <code>clang foo.cpp --target=aarch64-linux-pc</code> or do you need other library / sysroot options on your machine?</blockquote></mx-reply>/usr/bin/ld: unrecognised emulation mode: aarch64linux<br>Supported emulations: elf_x86_64 elf32_x86_64 elf_i386 elf_iamcu i386linux elf_l1om elf_k1om i386pep i386pe</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Aug 24 2022 10:17:28 GMT-0700 (Pacific Daylight Time)">17:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">add the <code>-fuse-ld=lld</code> to that to get away from the system <code>ld</code></td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Aug 24 2022 10:17:54 GMT-0700 (Pacific Daylight Time)">17:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">(that is what --enable-linker=lld in spidermonkey translates down to for the clang command)</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Aug 24 2022 10:52:33 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> (that is what --enable-linker=lld in spidermonkey translates down to for the clang command)</blockquote></mx-reply>configure: error: compiler is incompatible with sanitize options<br>DEBUG: &lt;truncated - see config.log for full output&gt;<br>DEBUG: configure:4045: /usr/bin/clang -std=gnu99 --target=aarch64-linux-gnu -o conftest  -O2 -pipe -g -feliminate-unused-debug-types  -Qunused-arguments  -Wl,-O1 -Wl,--hash-style=gnu -Wl,--as-needed -Wl,-z,relro,-z,now -fuse-ld=lld conftest.c  1&gt;&amp;5<br>DEBUG: /usr/bin/ld.lld: error: cannot open crt1.o: No such file or directory<br>DEBUG: /usr/bin/ld.lld: error: cannot open crti.o: No such file or directory<br>DEBUG: /usr/bin/ld.lld: error: cannot open crtbegin.o: No such file or directory<br>DEBUG: /usr/bin/ld.lld: error: unable to find library -lgcc<br>DEBUG: /usr/bin/ld.lld: error: unable to find library -lgcc_s<br>DEBUG: /usr/bin/ld.lld: error: unable to find library -lc<br>DEBUG: /usr/bin/ld.lld: error: unable to find library -lgcc<br>DEBUG: /usr/bin/ld.lld: error: unable to find library -lgcc_s<br>DEBUG: /usr/bin/ld.lld: error: cannot open crtend.o: No such file or directory<br>DEBUG: /usr/bin/ld.lld: error: cannot open crtn.o: No such file or directory<br>DEBUG: clang: error: linker command failed with exit code 1 (use -v to see invocation)<br>DEBUG: configure: failed program was:<br>DEBUG: #line 4038 "configure"<br>DEBUG: #include "confdefs.h"<br>DEBUG:<br>DEBUG: int main() {<br>DEBUG:<br>DEBUG: ; return 0; }<br>DEBUG: configure: error: compiler is incompatible with sanitize options<br>ERROR: old-configure failed<br>ðŸ˜‚</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Aug 24 2022 10:56:46 GMT-0700 (Pacific Daylight Time)">17:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">do you have a sysroot for the target machine that has the crt1.o files?</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Aug 24 2022 11:12:51 GMT-0700 (Pacific Daylight Time)">18:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell"><p>Still having issues trying to call a JS function in C++ that was passed via JS. Not sure how to convert the given parameter to a function. <code>cannot convert â€˜JS::Handle&lt;JS::Value&gt;â€™ to â€˜JS::detail::MaybeWrapped&lt;JSFunction*&gt;â€™ {aka â€˜JSFunction*â€™} in initialization </code></p>
<pre><code class="language-js">static bool CallJs(JSContext* cx, unsigned argc, JS::Value* vp) {
    JS::CallArgs args = JS::CallArgsFromVp(argc, vp);

    JS::RootedFunction arg(cx, args.get(0));
    JS::RootedValue rval(cx);
    JS::Call(cx, nullptr, arg, JS::HandleValueArray::empty(), &amp;rval);
    return true;
}
</code></pre>
</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Aug 24 2022 11:17:03 GMT-0700 (Pacific Daylight Time)">18:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">davidj361</span>: use RootedValue for line 4</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Aug 24 2022 11:17:42 GMT-0700 (Pacific Daylight Time)">18:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">the argument is a general value (eg, your caller could pass a string instead of a function), but I believe JS::Call has an override that takes a value and throws the right errors if it is non-sense</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Aug 24 2022 11:19:27 GMT-0700 (Pacific Daylight Time)">18:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">might need JS_CallFunctionValue instead of JS::Call. There are a few variants depending on what exactly you have as arguments</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed Aug 24 2022 11:20:22 GMT-0700 (Pacific Daylight Time)">18:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">I noticed it was complaining about being overloaded and having 2 candidates that looked exactly the same</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed Aug 24 2022 11:21:08 GMT-0700 (Pacific Daylight Time)">18:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">ah yes that did the trick, thanks tcampbell</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed Aug 24 2022 11:22:08 GMT-0700 (Pacific Daylight Time)">18:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">yeah, function calls can be weird because JS is so dynamic</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed Aug 24 2022 11:25:43 GMT-0700 (Pacific Daylight Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">ewang21</span>: for what it's worth, using esr102 things just seem to work since a bunch of the bootstrap code to download sysroot exists</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed Aug 24 2022 11:41:11 GMT-0700 (Pacific Daylight Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell"><p>And for esr68 if I use the following (with sysroot in CXX variables), then I get a build to work:</p>
<pre><code>CC="/home/tcampbell/.mozbuild/clang/bin/clang --sysroot=/home/tcampbell/.mozbuild/sysroot-aarch64-linux-gnu" \
CXX="/home/tcampbell/.mozbuild/clang/bin/clang++ --sysroot=/home/tcampbell/.mozbuild/sysroot-aarch64-linux-gnu" \
../configure --target=aarch64-linux-gnu --enable-linker=lld
</code></pre>
</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Aug 24 2022 11:43:26 GMT-0700 (Pacific Daylight Time)">18:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell"><p>In esr102 using <a href="https://firefox-source-docs.mozilla.org/js/build.html">mach build</a> instead of configure directly, I just had to set my config to</p>
<pre><code>ac_add_options --enable-application=js
ac_add_options --target=aarch64
</code></pre>
</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Aug 24 2022 12:21:56 GMT-0700 (Pacific Daylight Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-7">ewang21</span>: for what it's worth, using esr102 things just seem to work since a bunch of the bootstrap code to download sysroot exists</blockquote></mx-reply>I can not use esr102 because of the C++17 SDK. I am trying to integrate it into a project which is using C++14</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Aug 24 2022 12:21:58 GMT-0700 (Pacific Daylight Time)">19:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> do you have a sysroot for the target machine that has the crt1.o files?</blockquote></mx-reply>/home/dev/ara/eb/adaptivecore/sdk/custom/qemu-arm64/2.8.0/sysroots/cortexa57-wrs-linux/usr/lib64/crt1.o</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Aug 24 2022 12:27:28 GMT-0700 (Pacific Daylight Time)">19:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">using <code>CC="...../clang --sysroot=/home/dev/ara/eb/adaptivecore/sdk/custom/qemu-arm64/2.8.0/sysroots/cortexa57-wrs-linux"</code> (and similar for CXX) might be enough here</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Aug 24 2022 12:27:41 GMT-0700 (Pacific Daylight Time)">19:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">(The --enable-linker=lld stuff was still needed for me)</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Aug 24 2022 12:44:44 GMT-0700 (Pacific Daylight Time)">19:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> using <code>CC="...../clang --sysroot=/home/dev/ara/eb/adaptivecore/sdk/custom/qemu-arm64/2.8.0/sysroots/cortexa57-wrs-linux"</code> (and similar for CXX) might be enough here</blockquote></mx-reply>DEBUG: /usr/bin/ld.lld: error: cannot open crtbegin.o: No such file or directory<br>DEBUG: /usr/bin/ld.lld: error: unable to find library -lgcc<br>DEBUG: /usr/bin/ld.lld: error: unable to find library -lgcc<br>DEBUG: /usr/bin/ld.lld: error: cannot open crtend.o: No such file or directory<br>I found crtbegin.o and crtend.o in "/home/dev/ara/eb/adaptivecore/sdk/custom/qemu-arm64/2.8.0/sysroots/cortexa57-wrs-linux/usr/lib64/aarch64-wrs-linux/10.2.0/"</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Aug 24 2022 12:46:05 GMT-0700 (Pacific Daylight Time)">19:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">do you need a target of <code>aarch64-wrs-linux</code>? I'm not very familiar with what the structure of sysroots and target-triples needs to be</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Aug 24 2022 12:47:11 GMT-0700 (Pacific Daylight Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">my aarch64 use cases are just targetting aarch64-linux-gnu and then running it on android hardware</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed Aug 24 2022 12:48:45 GMT-0700 (Pacific Daylight Time)">19:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> my aarch64 use cases are just targetting aarch64-linux-gnu and then running it on android hardware</blockquote></mx-reply>It has the same errors:<br>DEBUG: /usr/bin/ld.lld: error: cannot open crtbegin.o: No such file or directory<br>DEBUG: /usr/bin/ld.lld: error: unable to find library -lgcc<br>DEBUG: /usr/bin/ld.lld: error: unable to find library -lgcc<br>DEBUG: /usr/bin/ld.lld: error: cannot open crtend.o: No such file or directory<br>DEBUG: clang: error: linker command failed with exit code 1 (use -v to see invocation)</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Wed Aug 24 2022 12:49:24 GMT-0700 (Pacific Daylight Time)">19:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">your toolchain provider might have ideas, I'm not sure how they configured the compiler when it was built</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Wed Aug 24 2022 12:52:10 GMT-0700 (Pacific Daylight Time)">19:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">how do I convert a class instance passed and instantiated as a <code>JS::RootedValue</code> into a <code>JS::HandleObject</code> for <code>JS_CallFunctionName</code>? Trying to see if I can call a class function by a string.</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Wed Aug 24 2022 12:53:00 GMT-0700 (Pacific Daylight Time)">19:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> your toolchain provider might have ideas, I'm not sure how they configured the compiler when it was built</blockquote></mx-reply>Yes. I have to cross-compile by the toolchain of this container. If I use my own toolchain to build the lib for project integration, there should be compatibility issues.</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Wed Aug 24 2022 12:54:29 GMT-0700 (Pacific Daylight Time)">19:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">davidj361</span>: if you have <code>JS::RootedValue v</code>, <code>v.toObject()</code> is <code>JSObject&amp;</code>, and you can create <code>JS::RootedObject</code> by <code>JS::RootedObject obj(cx, &amp;v.toObject());</code> and <code>JS::RootedObject</code> is implicitly convertible to <code>JS::HandleObject</code></td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Wed Aug 24 2022 12:54:42 GMT-0700 (Pacific Daylight Time)">19:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, pass <code>obj</code></td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Wed Aug 24 2022 12:55:33 GMT-0700 (Pacific Daylight Time)">19:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">note that <code>.toObject()</code> will crash if what you passed isn't an object, so in general you'd also check for <code>isObject</code> before doing <code>toObject</code></td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Wed Aug 24 2022 13:27:31 GMT-0700 (Pacific Daylight Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">Hello.  I am trying to build Spider Monkey Engine but the ./mach build is using C++17, is there a command to switch it to use C++20?</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Wed Aug 24 2022 13:59:24 GMT-0700 (Pacific Daylight Time)">20:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">bug 1768116 is still open, so I suppose it's not yet compatible with c++20 maybe?</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Wed Aug 24 2022 13:59:25 GMT-0700 (Pacific Daylight Time)">20:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1768116">https://bugzil.la/1768116</a> â€” NEW (nobody) â€” [meta] Compile as C++20</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Wed Aug 24 2022 14:01:14 GMT-0700 (Pacific Daylight Time)">21:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell"><a href="https://firefox-source-docs.mozilla.org/setup/windows_build.html#building-firefox-on-windows">https://firefox-source-docs.mozilla.org/setup/windows_build.html#building-firefox-on-windows</a></td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Wed Aug 24 2022 14:01:17 GMT-0700 (Pacific Daylight Time)">21:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">im following this</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Wed Aug 24 2022 14:01:32 GMT-0700 (Pacific Daylight Time)">21:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-1.">1.1 Install Visual Studio Build ToolsÂ¶
Download and install the Build Tools for Visual Studio 2022. If you have a full install of Visual Studio (Community/Professional/Enterprise), that is also supported. Ensure youâ€™ve checked the following items for installation:

In the Workloads tab:
Desktop development with C++.

In the Individual components tab:
MSVC v143 - VS 2022 C++ x64/x86 build tools.

Windows 10 SDK (at least 10.0.19041.0).

C++ ATL for v143 build tools (x86 and x64).```
</code></pre>
</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Wed Aug 24 2022 14:02:25 GMT-0700 (Pacific Daylight Time)">21:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">This says I need to use C++20, but its not yet supported?  Im confused</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Wed Aug 24 2022 14:03:16 GMT-0700 (Pacific Daylight Time)">21:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">the document doesn't say c++20</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Wed Aug 24 2022 14:04:00 GMT-0700 (Pacific Daylight Time)">21:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">Ah okay, so then maybe my problem is not related to that.</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Wed Aug 24 2022 14:04:24 GMT-0700 (Pacific Daylight Time)">21:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what's the problem you observed?</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Wed Aug 24 2022 14:04:26 GMT-0700 (Pacific Daylight Time)">21:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-0:09.59"> 0:09.59 C:/PROGRA~2/WI3CF2~1/10/include/10.0.19041.0/um\winternl.h(156,5): error: unknown type name 'PLDR_SERVICE_TAG_RECORD'```
</code></pre>
</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Wed Aug 24 2022 14:04:39 GMT-0700 (Pacific Daylight Time)">21:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">errors inside winternl.h</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Wed Aug 24 2022 14:05:37 GMT-0700 (Pacific Daylight Time)">21:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">is there a way to change win10 sdk to a newer version?</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Wed Aug 24 2022 14:06:29 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">did you install VisualStudio first time for building Firefox, or have you been using it?</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Wed Aug 24 2022 14:06:48 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">Not the first time, i have older versions of visual studio</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Wed Aug 24 2022 14:07:11 GMT-0700 (Pacific Daylight Time)">21:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what version(s) of VisualStudio do you have right now?</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Wed Aug 24 2022 14:07:36 GMT-0700 (Pacific Daylight Time)">21:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">19 and 22</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Wed Aug 24 2022 14:10:24 GMT-0700 (Pacific Daylight Time)">21:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">hm, then it should work.  let me check some.  also, people in <a href="https://matrix.to/#/#build:mozilla.org">#build:mozilla.org</a> room would know better</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Wed Aug 24 2022 14:10:52 GMT-0700 (Pacific Daylight Time)">21:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">okay no issues, its possible i somehow messed up my winternl, so ill just redownload the sdk</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Wed Aug 24 2022 14:16:53 GMT-0700 (Pacific Daylight Time)">21:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">lines around winternl.h:156 is the definition of <code>PLDR_SERVICE_TAG_RECORD</code> type alias itself</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Wed Aug 24 2022 14:17:32 GMT-0700 (Pacific Daylight Time)">21:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, the error itself is very strange</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Wed Aug 24 2022 14:18:01 GMT-0700 (Pacific Daylight Time)">21:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">yah any error from the sdk is strange, so i must have done something to it by accident.</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Wed Aug 24 2022 14:18:07 GMT-0700 (Pacific Daylight Time)">21:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">try checking the file and see what's written there in your file</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Wed Aug 24 2022 14:18:21 GMT-0700 (Pacific Daylight Time)">21:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">im already reinstalling the sdk :P</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Wed Aug 24 2022 14:21:44 GMT-0700 (Pacific Daylight Time)">21:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">ha, that was it</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Wed Aug 24 2022 14:21:54 GMT-0700 (Pacific Daylight Time)">21:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chris_j:mozilla.org">chris_j</span>&gt;</div></td><td class="msg-cell">okay thanks for the help</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Wed Aug 24 2022 14:22:07 GMT-0700 (Pacific Daylight Time)">21:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">my pleasure :)</td></tr>

</tbody></table></div></div></div>
</body></html>