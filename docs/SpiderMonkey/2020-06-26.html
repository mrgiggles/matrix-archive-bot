<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2020-06-26</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2020-06-26<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2020-06-25" class="nav-link"><span>prev</span></a>
<a href="2020-06-27" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Jun 25 2020 17:28:29 GMT-0700 (Pacific Daylight Time)">00:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yeah, the way you would do this now with no changes would be to do a dumpHeap before and after a major GC (you can trigger a heap dump from about:memory), and then write something that would diff them.</blockquote></mx-reply>is there a way to simply see when an object is promoted to old space, ideally with minimal recompilation? I can profile my application in a state where it shouldn't allocate any old space memory anyhow, which will help me detect what will become major garbage. I feel printing promoted-to-old objects would be easier than diffing DumpHeap.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Jun 25 2020 17:32:08 GMT-0700 (Pacific Daylight Time)">00:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Stick in a printf at <a href="https://searchfox.org/mozilla-central/source/js/src/gc/Marking.cpp#3438">https://searchfox.org/mozilla-central/source/js/src/gc/Marking.cpp#3438</a></td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Jun 25 2020 17:32:25 GMT-0700 (Pacific Daylight Time)">00:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><code>fprintf(stderr, "tenured %p\n", dst);</code> or something</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Jun 25 2020 17:33:12 GMT-0700 (Pacific Daylight Time)">00:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh. Except it looks like you'd need line 3469 too. Or search for <code>gcprobes::PromoteToTenured</code> to find them all.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Jun 25 2020 17:40:07 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(and no, there's no way to run JS code when an object is tenured. You're deep in the internals, not in any state to be running code.)</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Jun 25 2020 17:40:18 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">If we really wanted to support something like that, we'd do it by marking the allocation positions in all parts of the tenured heap, then iterating over everything allocated since that time.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Jun 25 2020 17:40:55 GMT-0700 (Pacific Daylight Time)">00:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">but then you could GC in the middle of doing that, which means we'd have to root everything until you were done with it.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Jun 25 2020 17:42:02 GMT-0700 (Pacific Daylight Time)">00:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">we'd probably be better off making <code>gcprobes::PromoteToTenured</code> a dtrace probe point or something...</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Jun 25 2020 17:47:05 GMT-0700 (Pacific Daylight Time)">00:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: hmmm, seems like if the fastest way would be to set a breakpoint that runs a printf on that piece of code</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Jun 25 2020 17:47:41 GMT-0700 (Pacific Daylight Time)">00:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">good idea, though it may be pretty slow</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Jun 25 2020 17:47:44 GMT-0700 (Pacific Daylight Time)">00:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">assuming that function isn't inlined anywhere-- I'm not sure I've got the hardware to recompile SM or Firefox</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Jun 25 2020 17:47:52 GMT-0700 (Pacific Daylight Time)">00:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">but there's a gdb feature that combines those two</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Jun 25 2020 17:49:09 GMT-0700 (Pacific Daylight Time)">00:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">is there a way to get compiled .o or .so files of SM so I would only have to recompile that one file I modify?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Jun 25 2020 17:49:19 GMT-0700 (Pacific Daylight Time)">00:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(I haven't used it.) tracepoints? </td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Jun 25 2020 17:49:23 GMT-0700 (Pacific Daylight Time)">00:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh, dprintf looks good</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Jun 25 2020 17:49:52 GMT-0700 (Pacific Daylight Time)">00:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">you'd have to relink all of <a href="http://libxul.so">libxul.so</a> regardless</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Jun 25 2020 17:49:53 GMT-0700 (Pacific Daylight Time)">00:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">(the last time I compiled LLVM, I got multiple disk connection failures and it took 8 hours on -O0 :()</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Jun 25 2020 17:50:20 GMT-0700 (Pacific Daylight Time)">00:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I mean, what you're asking for is theoretically possible, but I suspect it would be a lot of trouble to get it to work</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Jun 25 2020 17:50:39 GMT-0700 (Pacific Daylight Time)">00:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(afk for a bit, dinnertime)</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Jun 25 2020 18:46:06 GMT-0700 (Pacific Daylight Time)">01:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">By the way--looking out for the server-side portion of the game-- will SM eventually rival V8 in runtime performance of long-running applications?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Jun 25 2020 18:49:03 GMT-0700 (Pacific Daylight Time)">01:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I don't know where they stand today. Have you observed SM to do poorly at that? Mostly, I assumed that server side stuff uses v8 because of Node.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Jun 25 2020 19:04:12 GMT-0700 (Pacific Daylight Time)">02:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">SM runs the game client at a lower FPS than V8, so I doubt it can run the server faster. Does SM have escape analysis?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Jun 25 2020 19:08:23 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">As a developer of CPU-sensitive JavaScript programs, I find it much more difficult to find documentation on SM compiler and memory management internals than for V8 and JSC. This makes it harder to optimize for SM. When writing code, I use heuristics to estimate the performance of it on various engines.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Thu Jun 25 2020 19:08:51 GMT-0700 (Pacific Daylight Time)">02:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">tl;dr You could boost the performance of my JavaScript app on SM by writing documentation on SM.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Thu Jun 25 2020 19:27:15 GMT-0700 (Pacific Daylight Time)">02:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">it's not organized, but the best list of current SM documentation can be dug out of the source files. Major comments are tagged <code>[SMDOC]</code>. Here's the list: <a href="https://searchfox.org/mozilla-central/search?q=SMDOC&amp;path=">https://searchfox.org/mozilla-central/search?q=SMDOC&amp;path=</a></td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu Jun 25 2020 19:28:34 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">As for escape analysis, I think we support some amount of it, and <a href="https://searchfox.org/mozilla-central/search?q=escape%20analysis&amp;path=">https://searchfox.org/mozilla-central/search?q=escape%20analysis&amp;path=</a> seems to corroborate</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Thu Jun 25 2020 19:28:54 GMT-0700 (Pacific Daylight Time)">02:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">but just having it doesn't mean it'll handle the particular situations you might care about</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu Jun 25 2020 19:30:34 GMT-0700 (Pacific Daylight Time)">02:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I wonder if you can get jitspew when running in the browser? That would give a way of seeing which optimizations applied.</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Thu Jun 25 2020 19:40:26 GMT-0700 (Pacific Daylight Time)">02:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">ampdot</span>: what OS are you on? I could do pushes to our try server in order to make builds with small patches for you to try. But I wanted to eg tag tenured promotions with the pid to keep them separate, it'd be nice if didn't have to worry about making it portable.</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Thu Jun 25 2020 19:59:26 GMT-0700 (Pacific Daylight Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">if I didn't mess anything up too badly, you could try downloading a build from <a href="https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=0dee5069fc0f1c04260b0841d37826e569b741d3">https://treeherder.mozilla.org/#/jobs?repo=try&amp;revision=0dee5069fc0f1c04260b0841d37826e569b741d3</a> and run it (in a fresh profile, to be safe) with the environment variable GC_LOG_PROMOTIONS set. (I just pushed it, so it'll take some time to build.)</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Jun 26 2020 07:41:10 GMT-0700 (Pacific Daylight Time)">14:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">yulia</span>: Your zine is unreasonably charming</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Jun 26 2020 07:53:20 GMT-0700 (Pacific Daylight Time)">14:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">aah thank you</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Jun 26 2020 07:53:22 GMT-0700 (Pacific Daylight Time)">14:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">FULL PANIC MODE</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Jun 26 2020 08:02:51 GMT-0700 (Pacific Daylight Time)">15:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">I always like how positive the chat comments are on there</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Jun 26 2020 08:31:34 GMT-0700 (Pacific Daylight Time)">15:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-14">ampdot</span>: what OS are you on? I could do pushes to our try server in order to make builds with small patches for you to try. But I wanted to eg tag tenured promotions with the pid to keep them separate, it'd be nice if didn't have to worry about making it portable.</blockquote></mx-reply>I'm on macOS. I could spin up a GUI'd Linux VM, though.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Jun 26 2020 08:33:49 GMT-0700 (Pacific Daylight Time)">15:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">can you run the browser in <a href="https://firefox-ci-tc.services.mozilla.com/api/queue/v1/task/cDPRs04hTIGERO1G_ts1EQ/runs/0/artifacts/public/build/target.tar.gz">https://firefox-ci-tc.services.mozilla.com/api/queue/v1/task/cDPRs04hTIGERO1G_ts1EQ/runs/0/artifacts/public/build/target.tar.gz</a> ?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Jun 26 2020 08:34:13 GMT-0700 (Pacific Daylight Time)">15:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(that's the link from the try push I sent earlier)</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Jun 26 2020 08:34:44 GMT-0700 (Pacific Daylight Time)">15:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">Thank you for your kindness 😃</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Jun 26 2020 08:34:46 GMT-0700 (Pacific Daylight Time)">15:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">osx is fine. Windows is where I worry about portability of quick hacks.</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Fri Jun 26 2020 08:34:47 GMT-0700 (Pacific Daylight Time)">15:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I see the patch prints a pointer to the moved memory location. Mind my noobishness, how would I turn that pointer into an object description? (preferably with allocation stack?)</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Fri Jun 26 2020 08:35:06 GMT-0700 (Pacific Daylight Time)">15:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">My idea is that you'd pair this with a heap dump</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Fri Jun 26 2020 08:35:10 GMT-0700 (Pacific Daylight Time)">15:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">no allocation stacks, sadly</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Fri Jun 26 2020 08:35:25 GMT-0700 (Pacific Daylight Time)">15:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">but the heap dump will show you the properties, for example.</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Fri Jun 26 2020 08:35:33 GMT-0700 (Pacific Daylight Time)">15:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">and the constructor, though you have to chase a couple of links to get there</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Fri Jun 26 2020 08:36:01 GMT-0700 (Pacific Daylight Time)">15:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">for allocation stacks, we'd have to somehow incorporate the metadata builder stuff</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Fri Jun 26 2020 08:36:06 GMT-0700 (Pacific Daylight Time)">15:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">Interesting. I'm opening the binary you sent (need to bypass macos' gatekeeper)</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Fri Jun 26 2020 08:38:15 GMT-0700 (Pacific Daylight Time)">15:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@froydnj:mozilla.org">froydnj</span>&gt;</div></td><td class="msg-cell">huh, no jit-reviewers group in phab?</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Fri Jun 26 2020 08:39:57 GMT-0700 (Pacific Daylight Time)">15:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">no, we attempted at one point, but notifications weren't working out so we removed group</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Fri Jun 26 2020 08:41:19 GMT-0700 (Pacific Daylight Time)">15:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">thank you for the information, it will still useful without allocation stacks
I got the tenured logging to work.</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Fri Jun 26 2020 08:41:38 GMT-0700 (Pacific Daylight Time)">15:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I'm trying it on a real version of the app I want to debug now</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Fri Jun 26 2020 08:42:35 GMT-0700 (Pacific Daylight Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">&lt;strike&gt;I am getting duplicate addresses-- does that mean an object is being logged twice or two different objects were moved to the same memory location?&lt;/strike&gt; (I misread the addresses, my bad)</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Fri Jun 26 2020 08:43:49 GMT-0700 (Pacific Daylight Time)">15:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">huh. I wouldn't expect that. The only way that happens is with duplicate strings, which can be tenured to the same thing.</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Fri Jun 26 2020 08:43:58 GMT-0700 (Pacific Daylight Time)">15:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">but I'm skeptical that would happen much</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Fri Jun 26 2020 08:44:27 GMT-0700 (Pacific Daylight Time)">15:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">if a major GC discarded some stuff, the addresses would get reused</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Fri Jun 26 2020 08:45:55 GMT-0700 (Pacific Daylight Time)">15:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">sorry for my need for handholding, but, how would I get a heap dump with pointers from within a browser? (does the browser's debugger's own heap snapshot mechanism work?)</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Fri Jun 26 2020 08:46:46 GMT-0700 (Pacific Daylight Time)">15:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Go to about:memory. There's something like "dump concise log" that should work.</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Fri Jun 26 2020 08:47:01 GMT-0700 (Pacific Daylight Time)">15:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">Under Save GC &amp; CC logs</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Fri Jun 26 2020 08:47:26 GMT-0700 (Pacific Daylight Time)">15:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">I think the heap snapshot stuff won't give you pointers, as it is higher level</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Fri Jun 26 2020 08:54:42 GMT-0700 (Pacific Daylight Time)">15:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I grepped the verbose and concise logs from about:memory, and I see descriptions of the objects there, but I don't see any properties (keys and values) for each JavaScript object. How would I get those properties?</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Fri Jun 26 2020 08:55:19 GMT-0700 (Pacific Daylight Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I think you have to look through the shape</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Fri Jun 26 2020 08:55:22 GMT-0700 (Pacific Daylight Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">let me look at a random dump</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Fri Jun 26 2020 08:55:43 GMT-0700 (Pacific Daylight Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">ampdot</span>: the first line describes the object, then the "&gt;" lines after it are fields</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Fri Jun 26 2020 08:55:56 GMT-0700 (Pacific Daylight Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">it only shows properties that have pointers in them, though.</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Fri Jun 26 2020 08:56:04 GMT-0700 (Pacific Daylight Time)">15:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">(are you asking for a heap dump from me?)</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Fri Jun 26 2020 08:57:03 GMT-0700 (Pacific Daylight Time)">15:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">I think he's just looking at one of his own just to remember the format.</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Fri Jun 26 2020 08:57:16 GMT-0700 (Pacific Daylight Time)">15:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think he's just looking at one of his own just to remember the format.</blockquote></mx-reply>(yeah, just making sure)</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Fri Jun 26 2020 08:57:29 GMT-0700 (Pacific Daylight Time)">15:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">yeah. It's kind of painful. You'd have to script this.</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Fri Jun 26 2020 08:57:42 GMT-0700 (Pacific Daylight Time)">15:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">starting from an object pointer, you look at the <code>shape</code> under it</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Fri Jun 26 2020 08:58:02 GMT-0700 (Pacific Daylight Time)">15:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">each <code>shape</code> will have a single <code>propid</code></td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Fri Jun 26 2020 08:58:14 GMT-0700 (Pacific Daylight Time)">15:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">looking up that <code>propid</code> should get you to the string name of the property</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Fri Jun 26 2020 08:58:28 GMT-0700 (Pacific Daylight Time)">15:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">it's all very raw</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Fri Jun 26 2020 08:58:29 GMT-0700 (Pacific Daylight Time)">15:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">what is "group"?</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Fri Jun 26 2020 08:58:47 GMT-0700 (Pacific Daylight Time)">15:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> no, we attempted at one point, but notifications weren't working out so we removed group</blockquote></mx-reply>Yeah, that was pre-phabricator.  Post phabricator we ought to take another stab at it.</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Fri Jun 26 2020 08:59:04 GMT-0700 (Pacific Daylight Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><a href="https://paste.mozilla.org/7OO3vTVM">https://paste.mozilla.org/7OO3vTVM</a></td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Fri Jun 26 2020 08:59:05 GMT-0700 (Pacific Daylight Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh, sorry. And to get to the next property, you'd follow the <code>parent</code> link</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Fri Jun 26 2020 08:59:09 GMT-0700 (Pacific Daylight Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">Here's an example of a single object.</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Fri Jun 26 2020 08:59:33 GMT-0700 (Pacific Daylight Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">That one's a little weird because it is really used for certain local variables, but you can see the "property" names like "getInnerWindowID"</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Fri Jun 26 2020 08:59:58 GMT-0700 (Pacific Daylight Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <a href="https://paste.mozilla.org/7OO3vTVM">https://paste.mozilla.org/7OO3vTVM</a></blockquote></mx-reply>is that an object shape?</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Fri Jun 26 2020 09:00:21 GMT-0700 (Pacific Daylight Time)">16:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">I have a bunch of GC log parsing scripts here: <a href="https://github.com/amccreight/heapgraph/tree/master/g">https://github.com/amccreight/heapgraph/tree/master/g</a></td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Fri Jun 26 2020 09:00:44 GMT-0700 (Pacific Daylight Time)">16:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">the function in parse_gc_graph will turn a log file into a python graph you can further analyze.</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Fri Jun 26 2020 09:01:08 GMT-0700 (Pacific Daylight Time)">16:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">ampdot</span>: no, that's a scope object.</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Fri Jun 26 2020 09:01:16 GMT-0700 (Pacific Daylight Time)">16:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><code>group</code> is for "type inference", which will be going away ~soon.</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Fri Jun 26 2020 09:01:54 GMT-0700 (Pacific Daylight Time)">16:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">You shouldn't actually need to look at the shapes or groups yourself, most of the time, if you just want property names.</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Fri Jun 26 2020 09:01:55 GMT-0700 (Pacific Daylight Time)">16:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">it is a bit of a guess as to what sort of object this could be</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Fri Jun 26 2020 09:03:03 GMT-0700 (Pacific Daylight Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I wonder how much bash-fu it would take to print the properties of each object without pulling in a big library. (Or is there [part of ] a script in the repo you linked for converting a gc pointer into an object's properties?)</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Fri Jun 26 2020 09:06:01 GMT-0700 (Pacific Daylight Time)">16:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">Interesting, I grepped this pointer in the log files, and I found property names in GC and <em>CC</em> logs.</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Fri Jun 26 2020 09:06:17 GMT-0700 (Pacific Daylight Time)">16:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">Why would JavaScript objects end up in cycle collector logs?</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Fri Jun 26 2020 09:07:15 GMT-0700 (Pacific Daylight Time)">16:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">The format is pretty simple. Using my script would just save you writing the regexes yourself.</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Fri Jun 26 2020 09:07:40 GMT-0700 (Pacific Daylight Time)">16:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">The CC has to know about JS because cycles can go through JS and C++</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Fri Jun 26 2020 09:07:46 GMT-0700 (Pacific Daylight Time)">16:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">mccr8</span>: isn't your example some kind of scope or environment object thing, not actual object properties?</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Fri Jun 26 2020 09:08:11 GMT-0700 (Pacific Daylight Time)">16:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">though a dictionary mode shape might look like that too, I don't know</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Fri Jun 26 2020 09:08:12 GMT-0700 (Pacific Daylight Time)">16:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: yes. but actual object properties show up in the same way and I couldn't find a better example.</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Fri Jun 26 2020 09:08:50 GMT-0700 (Pacific Daylight Time)">16:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">ampdot</span>: keep in mind that properties that have scalar values don't show up in the GC log, so if you want to have a special marker value, you have to do something like "x.blahBlah = {}" and not "x.blahBlah = 3"</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Fri Jun 26 2020 09:09:12 GMT-0700 (Pacific Daylight Time)">16:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">Though having a mode that dumps scalar properties might be cool.</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Fri Jun 26 2020 09:10:08 GMT-0700 (Pacific Daylight Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I did a dumb shell test case that I can't find now, something like <code>js -e 'obj = { glubble: 5, globble: 7 }; minorgc(); dumpHeap("/tmp/heap.dump"); dumpObject(obj)'</code></td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Fri Jun 26 2020 09:10:22 GMT-0700 (Pacific Daylight Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">for that, I had to chase through shapes</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Fri Jun 26 2020 09:11:03 GMT-0700 (Pacific Daylight Time)">16:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">right, because you used a scalar value for the property</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Fri Jun 26 2020 09:11:21 GMT-0700 (Pacific Daylight Time)">16:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@emilio:mozilla.org">emilio</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">tcampbell</span>: ping?</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Fri Jun 26 2020 09:12:05 GMT-0700 (Pacific Daylight Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I have a pointer "0xd2b2704f380," and when I grep logs, it shows "0xd2b2704f380 G getter" and sometimes "0xd2b2704f380 G Uint8Array 0x11dc51000." Does that mean it's a Uint8Array?</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Fri Jun 26 2020 09:13:28 GMT-0700 (Pacific Daylight Time)">16:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">cool, things I learn</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Fri Jun 26 2020 09:14:07 GMT-0700 (Pacific Daylight Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">uh... that seems weird. Are they from the same process? Or maybe the first was collected and the address reused.</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Fri Jun 26 2020 09:15:08 GMT-0700 (Pacific Daylight Time)">16:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">by the way, I don't know if any of this will actually be useful in tracking down your real problem. It's more like "this is what we have right now".</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Fri Jun 26 2020 09:16:24 GMT-0700 (Pacific Daylight Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">yeah, it probably means the address was reused. You'll want the most recent log.</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Fri Jun 26 2020 09:17:00 GMT-0700 (Pacific Daylight Time)">16:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> by the way, I don't know if any of this will actually be useful in tracking down your real problem. It's more like "this is what we have right now".</blockquote></mx-reply>hmmm, if I do an intense in-game action that allocates a bunch of objects, the pools should be filled, so if I do the in-game action again but less intense, I should get a list of things that I forgot to pool</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Fri Jun 26 2020 09:18:16 GMT-0700 (Pacific Daylight Time)">16:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">Hmmm, this pointer I followed has "0xd2b2704fd40 [gc] JS Object (Function - set offset-rotate)" and " 0xd2b2704fd40 G setter"</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Fri Jun 26 2020 09:19:15 GMT-0700 (Pacific Daylight Time)">16:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">Oh-- I'm probably in the wrong process-- how do I tell the PID of a tab?</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Fri Jun 26 2020 09:21:09 GMT-0700 (Pacific Daylight Time)">16:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I usually do it by looking at the about:memory report (click the leftmost "Measure" button) and finding my url</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Fri Jun 26 2020 09:21:13 GMT-0700 (Pacific Daylight Time)">16:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">there may be a better way</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Fri Jun 26 2020 09:21:23 GMT-0700 (Pacific Daylight Time)">16:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">If you are on nightly you can hover over the tab and see the pid</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Fri Jun 26 2020 09:22:05 GMT-0700 (Pacific Daylight Time)">16:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">ooh, I didn't know about that. But then, I use Tree Style Tabs and its tabs don't do that. And I forget the top bar is still there.</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Fri Jun 26 2020 09:23:28 GMT-0700 (Pacific Daylight Time)">16:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">ok, I'm out for a bit. Shopping day. Time to brave the zombie apocalypse again.</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Fri Jun 26 2020 09:24:09 GMT-0700 (Pacific Daylight Time)">16:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">see you and thank you all</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Fri Jun 26 2020 09:24:24 GMT-0700 (Pacific Daylight Time)">16:24</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-2" title="@zombie:mozilla.org">zombie</span></div></td><td class="msg-cell">whistles</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Fri Jun 26 2020 09:25:17 GMT-0700 (Pacific Daylight Time)">16:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">yulia</span>: If there is anything that other people can do to help ease the workload of these streams, let us know!</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Fri Jun 26 2020 09:27:40 GMT-0700 (Pacific Daylight Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">iain</span>: thanks! ugh i think half of it is the amount that i don't know</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Fri Jun 26 2020 09:27:49 GMT-0700 (Pacific Daylight Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">answering all the dumb questions i come up with is a huge help though</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Fri Jun 26 2020 09:27:59 GMT-0700 (Pacific Daylight Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">esp. when it comes to finding information, i had a hard time with that today</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Fri Jun 26 2020 09:28:03 GMT-0700 (Pacific Daylight Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@froydnj:mozilla.org">froydnj</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> no, we attempted at one point, but notifications weren't working out so we removed group</blockquote></mx-reply>what notifications weren't working out, ooc?</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Fri Jun 26 2020 09:28:09 GMT-0700 (Pacific Daylight Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i was posting in js-frontend but i can do that here next time</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Fri Jun 26 2020 09:28:17 GMT-0700 (Pacific Daylight Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i have <em>the dumbest questions</em> not gunna lie</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Fri Jun 26 2020 09:28:52 GMT-0700 (Pacific Daylight Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">emilio</span>: pong in 20min</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Fri Jun 26 2020 09:31:08 GMT-0700 (Pacific Daylight Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">how do computers, even</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Fri Jun 26 2020 09:31:20 GMT-0700 (Pacific Daylight Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">The great mystery of our time</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Fri Jun 26 2020 09:31:48 GMT-0700 (Pacific Daylight Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@froydnj:mozilla.org">froydnj</span>&gt;</div></td><td class="msg-cell">magnets, obvs.</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Fri Jun 26 2020 09:32:08 GMT-0700 (Pacific Daylight Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">and sand</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Fri Jun 26 2020 09:32:14 GMT-0700 (Pacific Daylight Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">why did we teach sand to think</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Fri Jun 26 2020 09:32:18 GMT-0700 (Pacific Daylight Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">im not sure it was a good idea..</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Fri Jun 26 2020 09:33:13 GMT-0700 (Pacific Daylight Time)">16:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@froydnj:mozilla.org">froydnj</span>&gt;</div></td><td class="msg-cell">sentient sand sounds like a dune spin-off</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Fri Jun 26 2020 09:33:27 GMT-0700 (Pacific Daylight Time)">16:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jorendorff:mozilla.org">jorendorff</span>&gt;</div></td><td class="msg-cell">sounds like a magic card to me</td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Fri Jun 26 2020 09:41:52 GMT-0700 (Pacific Daylight Time)">16:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> what notifications weren't working out, ooc?</blockquote></mx-reply>This was pre-phab, we had a special jit-bugs alias we were using; but the idea had been we'd follow the activity of the jitbugs alias in bugzilla, but following a user's review requests at the time wasn't correctly generating notifications. We should do this again in the phab groups way</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Fri Jun 26 2020 09:57:39 GMT-0700 (Pacific Daylight Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">yulia</span>: one idea for a future stream, would be how to improve JS error documentation: <a href="https://nbp.github.io/arewedocumentedyet/">https://nbp.github.io/arewedocumentedyet/</a></td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Fri Jun 26 2020 09:57:52 GMT-0700 (Pacific Daylight Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">oh nice</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Fri Jun 26 2020 09:58:04 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">ohhhh this is  good</td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Fri Jun 26 2020 09:58:19 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">would these work as good entry bugs?</td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Fri Jun 26 2020 09:58:28 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">These are the key code which appeared in the devtool console.</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Fri Jun 26 2020 09:58:34 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">maybe i could do one, and then have everyone who wants to take one on?</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Fri Jun 26 2020 09:58:48 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">and walk people through doing their first patch, etc etc?</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Fri Jun 26 2020 09:59:10 GMT-0700 (Pacific Daylight Time)">16:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">This is mostly about reading code, and figuring out how to trigger these error cases.</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Fri Jun 26 2020 09:59:39 GMT-0700 (Pacific Daylight Time)">16:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">and writing documentation on MDN.</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Fri Jun 26 2020 10:00:30 GMT-0700 (Pacific Daylight Time)">17:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">hmm ok</td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Fri Jun 26 2020 10:01:06 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">An easy one might be  JSMSG_SYMBOL_TO_STRING</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Fri Jun 26 2020 10:03:40 GMT-0700 (Pacific Daylight Time)">17:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">and to make the example even better, is to look on the internet whether someone asked about the printed error message.</td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Fri Jun 26 2020 10:04:02 GMT-0700 (Pacific Daylight Time)">17:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">I found a few example of bad code while digging issues on github.</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Fri Jun 26 2020 10:05:14 GMT-0700 (Pacific Daylight Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">yulia</span>:  I think these might be good first bugs for people who want to get in the code base, but might be frighten by making modifications.</td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Fri Jun 26 2020 10:05:33 GMT-0700 (Pacific Daylight Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">ok, brilliant</td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Fri Jun 26 2020 10:05:37 GMT-0700 (Pacific Daylight Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">ill  see what i can do</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Fri Jun 26 2020 10:05:47 GMT-0700 (Pacific Daylight Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">because thats exactly what we need</td></tr>
  <tr class="msg" id="L147"><td class="ts-cell"><a class="ts" href="#L147" alt="Fri Jun 26 2020 10:05:53 GMT-0700 (Pacific Daylight Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">something to help people get comfortable</td></tr>
  <tr class="msg" id="L148"><td class="ts-cell"><a class="ts" href="#L148" alt="Fri Jun 26 2020 10:06:11 GMT-0700 (Pacific Daylight Time)">17:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">and there will always be new people joining</td></tr>
  <tr class="msg" id="L149"><td class="ts-cell"><a class="ts" href="#L149" alt="Fri Jun 26 2020 10:06:25 GMT-0700 (Pacific Daylight Time)">17:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">And new error messages to document :P</td></tr>
  <tr class="msg" id="L150"><td class="ts-cell"><a class="ts" href="#L150" alt="Fri Jun 26 2020 10:06:49 GMT-0700 (Pacific Daylight Time)">17:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">(what is new is that DOM error keys are also being listed there!)</td></tr>
  <tr class="msg" id="L151"><td class="ts-cell"><a class="ts" href="#L151" alt="Fri Jun 26 2020 10:08:14 GMT-0700 (Pacific Daylight Time)">17:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">ah interesting, my fault</td></tr>
  <tr class="msg" id="L152"><td class="ts-cell"><a class="ts" href="#L152" alt="Fri Jun 26 2020 10:09:49 GMT-0700 (Pacific Daylight Time)">17:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">cool page though. Hadn't seen this before</td></tr>
  <tr class="msg" id="L153"><td class="ts-cell"><a class="ts" href="#L153" alt="Fri Jun 26 2020 10:11:02 GMT-0700 (Pacific Daylight Time)">17:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-14">ampdot</span>: keep in mind that properties that have scalar values don't show up in the GC log, so if you want to have a special marker value, you have to do something like "x.blahBlah = {}" and not "x.blahBlah = 3"</blockquote></mx-reply>strings do, so I've successfully done things like <code>x.__heapgraph_name = 'foo'</code></td></tr>
  <tr class="msg" id="L154"><td class="ts-cell"><a class="ts" href="#L154" alt="Fri Jun 26 2020 10:46:23 GMT-0700 (Pacific Daylight Time)">17:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">lth</span>: hi, can you please r+ bug 1648623 and bug 1648748 when you get a chance? The merge is Monday and we'd like to get another simulation run in as soon as possible ahead of that</td></tr>
  <tr class="msg" id="L155"><td class="ts-cell"><a class="ts" href="#L155" alt="Fri Jun 26 2020 10:46:25 GMT-0700 (Pacific Daylight Time)">17:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1648623">https://bugzil.la/1648623</a> — ASSIGNED (rhunt) — Perma SM asserts.js:65:27 Error: Assertion failed: expected /ref/, got at offset 25: bad type when Gecko 79 merges to Beta on 2020-06-29</td></tr>
  <tr class="msg" id="L156"><td class="ts-cell"><a class="ts" href="#L156" alt="Fri Jun 26 2020 10:50:13 GMT-0700 (Pacific Daylight Time)">17:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span> just want to confirm, so that I don't go on a wild goose chase, it only prints when an object is tenured to the oldest generation, correct?<br>The logs printed pointers to Uint8Arrays. I was confused since the only part of the codebase and its dependencies that allocates Uint8Arrays is the network layer. I used ".TAINTED_DECODE = 'true'" to mark the decoder's Uint8Array. It doesn't seem like the Uint8Array in the decoding function escapes it. The decode is fully synchronous. Despite this, "TAINTED_DECODE" appeared as a property of a pointer printed by tenured object logging.</td></tr>
  <tr class="msg" id="L157"><td class="ts-cell"><a class="ts" href="#L157" alt="Fri Jun 26 2020 10:52:11 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1648748">https://bugzil.la/1648748</a> — ASSIGNED (rhunt) — Perma SM TEST-UNEXPECTED-FAIL | js/src/jit-test/tests/wasm/limits.js | /builds/worker/checkouts/gecko/js/src/jit-test/lib/wasm.js:27:9 CompileError: at offset 12: expected 'funcref' element type when Gecko 79 merges to Beta on 2020-06-29</td></tr>
  <tr class="msg" id="L158"><td class="ts-cell"><a class="ts" href="#L158" alt="Fri Jun 26 2020 10:52:21 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">RyanVM</span>: I'm guessing <span class="nick-15">lth</span> is out for the weekend. the change is very simple, are r=me's still a thing? otherwise I can try to find another reviewer</td></tr>
  <tr class="msg" id="L159"><td class="ts-cell"><a class="ts" href="#L159" alt="Fri Jun 26 2020 10:53:32 GMT-0700 (Pacific Daylight Time)">17:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">Ryan Hunt</span>: D81367 looks trivial enough to self-review and land, not as sure about D81368</td></tr>
  <tr class="msg" id="L160"><td class="ts-cell"><a class="ts" href="#L160" alt="Fri Jun 26 2020 10:57:11 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">RyanVM</span>: I don't think you actually need D81368, the issue there is that test requires reference-types to work, but reference-types is now enabled on beta. the central-as-beta simulation that found that issue was before the reftypes flag was flipped, I would guess new runs will not have that issue</td></tr>
  <tr class="msg" id="L161"><td class="ts-cell"><a class="ts" href="#L161" alt="Fri Jun 26 2020 10:57:24 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">even better!</td></tr>
  <tr class="msg" id="L162"><td class="ts-cell"><a class="ts" href="#L162" alt="Fri Jun 26 2020 10:57:46 GMT-0700 (Pacific Daylight Time)">17:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">Ryan Hunt</span>: which bug enabled reference-types?</td></tr>
  <tr class="msg" id="L163"><td class="ts-cell"><a class="ts" href="#L163" alt="Fri Jun 26 2020 10:58:56 GMT-0700 (Pacific Daylight Time)">17:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">Ryan Hunt</span>: I stole the review for bug 1648623</td></tr>
  <tr class="msg" id="L164"><td class="ts-cell"><a class="ts" href="#L164" alt="Fri Jun 26 2020 10:58:59 GMT-0700 (Pacific Daylight Time)">17:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1648623">https://bugzil.la/1648623</a> — ASSIGNED (rhunt) — Perma SM asserts.js:65:27 Error: Assertion failed: expected /ref/, got at offset 25: bad type when Gecko 79 merges to Beta on 2020-06-29</td></tr>
  <tr class="msg" id="L165"><td class="ts-cell"><a class="ts" href="#L165" alt="Fri Jun 26 2020 10:59:21 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">RyanVM</span>: bug 1637884 shipped reference-types</td></tr>
  <tr class="msg" id="L166"><td class="ts-cell"><a class="ts" href="#L166" alt="Fri Jun 26 2020 10:59:23 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1637884">https://bugzil.la/1637884</a> — RESOLVED (rhunt) — Reference types: Ship it</td></tr>
  <tr class="msg" id="L167"><td class="ts-cell"><a class="ts" href="#L167" alt="Fri Jun 26 2020 10:59:25 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">thanks!</td></tr>
  <tr class="msg" id="L168"><td class="ts-cell"><a class="ts" href="#L168" alt="Fri Jun 26 2020 11:00:28 GMT-0700 (Pacific Daylight Time)">18:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">RyanVM</span>: I'll land that fix in a second, need to de-capitalize 'WasmGcEnabled()' in the patch</td></tr>
  <tr class="msg" id="L169"><td class="ts-cell"><a class="ts" href="#L169" alt="Fri Jun 26 2020 11:00:44 GMT-0700 (Pacific Daylight Time)">18:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">whoops, I lando-queued it already :\</td></tr>
  <tr class="msg" id="L170"><td class="ts-cell"><a class="ts" href="#L170" alt="Fri Jun 26 2020 11:00:48 GMT-0700 (Pacific Daylight Time)">18:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">will backout</td></tr>
  <tr class="msg" id="L171"><td class="ts-cell"><a class="ts" href="#L171" alt="Fri Jun 26 2020 11:01:10 GMT-0700 (Pacific Daylight Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">actually, I wonder if you update the rev now what'll happen</td></tr>
  <tr class="msg" id="L172"><td class="ts-cell"><a class="ts" href="#L172" alt="Fri Jun 26 2020 11:01:25 GMT-0700 (Pacific Daylight Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">autoland's closed</td></tr>
  <tr class="msg" id="L173"><td class="ts-cell"><a class="ts" href="#L173" alt="Fri Jun 26 2020 11:01:46 GMT-0700 (Pacific Daylight Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">RyanVM</span>: we'll see, uploading now</td></tr>
  <tr class="msg" id="L174"><td class="ts-cell"><a class="ts" href="#L174" alt="Fri Jun 26 2020 11:01:50 GMT-0700 (Pacific Daylight Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">heh</td></tr>
  <tr class="msg" id="L175"><td class="ts-cell"><a class="ts" href="#L175" alt="Fri Jun 26 2020 11:05:10 GMT-0700 (Pacific Daylight Time)">18:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">RyanVM</span>: It's uploaded now. there's no way to cancel a pending landing right? sorry for the mess here</td></tr>
  <tr class="msg" id="L176"><td class="ts-cell"><a class="ts" href="#L176" alt="Fri Jun 26 2020 11:06:13 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">Yeah, can't cancel once it's queued. Can only backout after landing. And nothing to apologize for, I'm the one who jumped the gun!</td></tr>
  <tr class="msg" id="L177"><td class="ts-cell"><a class="ts" href="#L177" alt="Fri Jun 26 2020 11:06:22 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">I'm honestly curious to see what'll happen</td></tr>
  <tr class="msg" id="L178"><td class="ts-cell"><a class="ts" href="#L178" alt="Fri Jun 26 2020 11:08:03 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">jorendorff</span>: ping?</td></tr>
  <tr class="msg" id="L179"><td class="ts-cell"><a class="ts" href="#L179" alt="Fri Jun 26 2020 11:08:31 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@jorendorff:mozilla.org">jorendorff</span>&gt;</div></td><td class="msg-cell">oops, omw</td></tr>
  <tr class="msg" id="L180"><td class="ts-cell"><a class="ts" href="#L180" alt="Fri Jun 26 2020 11:47:39 GMT-0700 (Pacific Daylight Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">RyanVM</span>: ah, looks like it landed the bad version</td></tr>
  <tr class="msg" id="L181"><td class="ts-cell"><a class="ts" href="#L181" alt="Fri Jun 26 2020 11:47:48 GMT-0700 (Pacific Daylight Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">boo-urns</td></tr>
  <tr class="msg" id="L182"><td class="ts-cell"><a class="ts" href="#L182" alt="Fri Jun 26 2020 11:47:53 GMT-0700 (Pacific Daylight Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">i'll backout and land the right one</td></tr>
  <tr class="msg" id="L183"><td class="ts-cell"><a class="ts" href="#L183" alt="Fri Jun 26 2020 11:48:29 GMT-0700 (Pacific Daylight Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell">thank you!</td></tr>
  <tr class="msg" id="L184"><td class="ts-cell"><a class="ts" href="#L184" alt="Fri Jun 26 2020 11:55:28 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell">done</td></tr>
  <tr class="msg" id="L185"><td class="ts-cell"><a class="ts" href="#L185" alt="Fri Jun 26 2020 11:58:47 GMT-0700 (Pacific Daylight Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">ampdot</span>: yes, the GC log only includes the tenured heap. I don't know of a way to log the nursery but it might be possible.</td></tr>
  <tr class="msg" id="L186"><td class="ts-cell"><a class="ts" href="#L186" alt="Fri Jun 26 2020 12:07:01 GMT-0700 (Pacific Daylight Time)">19:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I matched a printed pointer up with the logs, and underneath the object's log was the property name "TAINTED_DECODE," and I put ".TAINTED_DECODE = 'true'" on and only on the decoding function's new Uint8Array. I swear that Uint8Array is not being escaped outside of the function. It seems unlikely that SM would run out of nursery space and move the Uint8Array to the old space, unless it decides to allocate all (large?) Uint8Arrays on the old space heap immediately?</td></tr>
  <tr class="msg" id="L187"><td class="ts-cell"><a class="ts" href="#L187" alt="Fri Jun 26 2020 12:07:57 GMT-0700 (Pacific Daylight Time)">19:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">ampdot</span>: yes, it is possible that it does that. I don't know exactly how that works.</td></tr>
  <tr class="msg" id="L188"><td class="ts-cell"><a class="ts" href="#L188" alt="Fri Jun 26 2020 12:08:31 GMT-0700 (Pacific Daylight Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">I'm not familiar with the way the nursery works.</td></tr>
  <tr class="msg" id="L189"><td class="ts-cell"><a class="ts" href="#L189" alt="Fri Jun 26 2020 12:11:32 GMT-0700 (Pacific Daylight Time)">19:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">we might do a minor collection before we get the GC log, which could throw things off.</td></tr>
  <tr class="msg" id="L190"><td class="ts-cell"><a class="ts" href="#L190" alt="Fri Jun 26 2020 12:16:43 GMT-0700 (Pacific Daylight Time)">19:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">The Uint8Array is created directly from the ArrayBuffer passed by the native browser's WebSocket.onmessage. I wonder where those ArrayBuffers are stored. If stored on the JavaScript old space heap, that sounds like a huge performance hit for all websocket apps.</td></tr>
  <tr class="msg" id="L191"><td class="ts-cell"><a class="ts" href="#L191" alt="Fri Jun 26 2020 12:19:41 GMT-0700 (Pacific Daylight Time)">19:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I hear another game of the same genre-- fast paced websocket game-- lags in Firefox much more in Chrome. Except, that game is written in C++ with asm.js.</td></tr>
  <tr class="msg" id="L192"><td class="ts-cell"><a class="ts" href="#L192" alt="Fri Jun 26 2020 12:38:28 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">Ryan Hunt</span>: <a href="https://treeherder.mozilla.org/#/jobs?repo=autoland&amp;resultStatus=testfailed%2Cbusted%2Cexception&amp;classifiedState=unclassified&amp;revision=1f9316f122778f707e1197f722da026b4746e1c2&amp;selectedTaskRun=YZm-uy7_Se6cE_Lxp_dxAg.0">https://treeherder.mozilla.org/#/jobs?repo=autoland&amp;resultStatus=testfailed%2Cbusted%2Cexception&amp;classifiedState=unclassified&amp;revision=1f9316f122778f707e1197f722da026b4746e1c2&amp;selectedTaskRun=YZm-uy7_Se6cE_Lxp_dxAg.0</a> :(</td></tr>
  <tr class="msg" id="L193"><td class="ts-cell"><a class="ts" href="#L193" alt="Fri Jun 26 2020 12:39:20 GMT-0700 (Pacific Daylight Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@ryanvm:mozilla.org">RyanVM</span>&gt;</div></td><td class="msg-cell"><em>sigh</em> it pulled the same diff as the first time</td></tr>
  <tr class="msg" id="L194"><td class="ts-cell"><a class="ts" href="#L194" alt="Fri Jun 26 2020 12:45:11 GMT-0700 (Pacific Daylight Time)">19:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">how do I see the contents of an array from a gc log?</td></tr>
  <tr class="msg" id="L195"><td class="ts-cell"><a class="ts" href="#L195" alt="Fri Jun 26 2020 12:48:06 GMT-0700 (Pacific Daylight Time)">19:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">I note that there's <code>HasOwnDataPropertyPure</code> which uses <code>LookupIOwnPropertyPure</code> -- outside of the DataProperty part of that (which I get) what's the Pure portion of these functions signify again? Is it just that it won't fire Proxy and resolve hooks? (I think I'm OK with proxy hooks, as I have them special cased for private fields. I'm less sure about resolve hooks... what are the rules around them?)</td></tr>
  <tr class="msg" id="L196"><td class="ts-cell"><a class="ts" href="#L196" alt="Fri Jun 26 2020 12:48:55 GMT-0700 (Pacific Daylight Time)">19:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">ampdot</span>: I think they show up in the same way as a property. Which is to say, they won't show up unless they contain GC things like strings and objects.</td></tr>
  <tr class="msg" id="L197"><td class="ts-cell"><a class="ts" href="#L197" alt="Fri Jun 26 2020 12:49:02 GMT-0700 (Pacific Daylight Time)">19:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">mgaudet</span>: Generally <code>Pure</code> = "has no side effects, including GC"</td></tr>
  <tr class="msg" id="L198"><td class="ts-cell"><a class="ts" href="#L198" alt="Fri Jun 26 2020 12:50:07 GMT-0700 (Pacific Daylight Time)">19:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">the name of the "property" will indicate that it is an array element, IIRC</td></tr>
  <tr class="msg" id="L199"><td class="ts-cell"><a class="ts" href="#L199" alt="Fri Jun 26 2020 12:50:34 GMT-0700 (Pacific Daylight Time)">19:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Ok. I guess I'm a tiny bit concerned about my implementation calling HasOwnProperty twice and that potentially causing issues. </td></tr>
  <tr class="msg" id="L200"><td class="ts-cell"><a class="ts" href="#L200" alt="Fri Jun 26 2020 12:51:17 GMT-0700 (Pacific Daylight Time)">19:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">mostly around the non-proxy non-gc potential side-effects of HasOwnProperty (Which I don't really know what they are :P )</td></tr>
  <tr class="msg" id="L201"><td class="ts-cell"><a class="ts" href="#L201" alt="Fri Jun 26 2020 12:51:44 GMT-0700 (Pacific Daylight Time)">19:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">mgaudet</span>: I believe we return false if we can't do it without side effects, and the <code>Pure</code> was part of tcampbell's quest to make it more obvious when we were deviating from our "return false on failure" convention</td></tr>
  <tr class="msg" id="L202"><td class="ts-cell"><a class="ts" href="#L202" alt="Fri Jun 26 2020 12:52:09 GMT-0700 (Pacific Daylight Time)">19:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">So it should be safe to call HasOwnPropertyPure multiple times</td></tr>
  <tr class="msg" id="L203"><td class="ts-cell"><a class="ts" href="#L203" alt="Fri Jun 26 2020 12:52:42 GMT-0700 (Pacific Daylight Time)">19:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">(no such call; there's <code>HasOwnDataPropertyPure</code>, but I was thinking of adding <code>HasOwnPropertyPure</code>)</td></tr>
  <tr class="msg" id="L204"><td class="ts-cell"><a class="ts" href="#L204" alt="Fri Jun 26 2020 12:53:15 GMT-0700 (Pacific Daylight Time)">19:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Oh, I see</td></tr>
  <tr class="msg" id="L205"><td class="ts-cell"><a class="ts" href="#L205" alt="Fri Jun 26 2020 12:53:36 GMT-0700 (Pacific Daylight Time)">19:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">LookupPropertyPure?</td></tr>
  <tr class="msg" id="L206"><td class="ts-cell"><a class="ts" href="#L206" alt="Fri Jun 26 2020 12:53:55 GMT-0700 (Pacific Daylight Time)">19:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">LookupOwnPropertyPure I guess </td></tr>
  <tr class="msg" id="L207"><td class="ts-cell"><a class="ts" href="#L207" alt="Fri Jun 26 2020 12:55:06 GMT-0700 (Pacific Daylight Time)">19:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Oh, right, I guess private fields don't use the prototype chain?</td></tr>
  <tr class="msg" id="L208"><td class="ts-cell"><a class="ts" href="#L208" alt="Fri Jun 26 2020 12:55:31 GMT-0700 (Pacific Daylight Time)">19:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Correct</td></tr>
  <tr class="msg" id="L209"><td class="ts-cell"><a class="ts" href="#L209" alt="Fri Jun 26 2020 13:26:22 GMT-0700 (Pacific Daylight Time)">20:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">ampdot</span>: yes, dumpHeap only dumps out stuff in the old (tenured) generation. (We only have 2 generations, the nursery and the tenured heap.)</td></tr>
  <tr class="msg" id="L210"><td class="ts-cell"><a class="ts" href="#L210" alt="Fri Jun 26 2020 13:27:08 GMT-0700 (Pacific Daylight Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">and ArrayBuffers are pretenured (allocated directly into the old generation). Partly because they have finalizers, and for the most part, anything with a finalizer has to go straight to the tenured heap.</td></tr>
  <tr class="msg" id="L211"><td class="ts-cell"><a class="ts" href="#L211" alt="Fri Jun 26 2020 13:27:41 GMT-0700 (Pacific Daylight Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">though for small typed arrays, the ArrayBuffers are created lazily, and the typed array <em>can</em> be nursery-allocated.</td></tr>
  <tr class="msg" id="L212"><td class="ts-cell"><a class="ts" href="#L212" alt="Fri Jun 26 2020 13:28:04 GMT-0700 (Pacific Daylight Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">mccr8: we can't dump the contents of the nursery because the nursery isn't iterable.</td></tr>
  <tr class="msg" id="L213"><td class="ts-cell"><a class="ts" href="#L213" alt="Fri Jun 26 2020 13:28:44 GMT-0700 (Pacific Daylight Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">we bump allocate whatever random crap we want to put into it, and on a minor GC trace through everything reachable, moving it to the tenured heap, then dump the entire nursery in one go</td></tr>
  <tr class="msg" id="L214"><td class="ts-cell"><a class="ts" href="#L214" alt="Fri Jun 26 2020 13:28:57 GMT-0700 (Pacific Daylight Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(which is the main reason finalizers prevent nursery allocation; we don't know what we're dumping)</td></tr>
  <tr class="msg" id="L215"><td class="ts-cell"><a class="ts" href="#L215" alt="Fri Jun 26 2020 13:29:03 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell">Mm, ArrayBuffers.</td></tr>
  <tr class="msg" id="L216"><td class="ts-cell"><a class="ts" href="#L216" alt="Fri Jun 26 2020 13:29:27 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell">I can't be the only person in the world who occasionally goes back and reads particularly pleasing old bugs and patches for a pick-me-up, can I?</td></tr>
  <tr class="msg" id="L217"><td class="ts-cell"><a class="ts" href="#L217" alt="Fri Jun 26 2020 13:29:38 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">ArrayBuffers happen to be Waldo's most favoritest part of the engine, so he would be overjoyed to answer any questions you might have about them</td></tr>
  <tr class="msg" id="L218"><td class="ts-cell"><a class="ts" href="#L218" alt="Fri Jun 26 2020 13:30:06 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I'm not getting any good data from the tenured buffer printer, there's arrays with no property names and tons of ArrayBuffers that are passed from the WebSocket</td></tr>
  <tr class="msg" id="L219"><td class="ts-cell"><a class="ts" href="#L219" alt="Fri Jun 26 2020 13:30:58 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">array property names tend to be pretty boring. Things like '0', '1', and sometimes even '2'.</td></tr>
  <tr class="msg" id="L220"><td class="ts-cell"><a class="ts" href="#L220" alt="Fri Jun 26 2020 13:31:01 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> and ArrayBuffers are pretenured (allocated directly into the old generation). Partly because they have finalizers, and for the most part, anything with a finalizer has to go straight to the tenured heap.</blockquote></mx-reply>well, no wonder major GC on JS-based .io games, you're constantly allocating kilobytes of old space memory for every packet, forcing major GCs</td></tr>
  <tr class="msg" id="L221"><td class="ts-cell"><a class="ts" href="#L221" alt="Fri Jun 26 2020 13:31:32 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">My arrays had no property names at all, so no luck there</td></tr>
  <tr class="msg" id="L222"><td class="ts-cell"><a class="ts" href="#L222" alt="Fri Jun 26 2020 13:31:44 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I'm also getting objects with property names that I set only in places where I only create the object once, ever</td></tr>
  <tr class="msg" id="L223"><td class="ts-cell"><a class="ts" href="#L223" alt="Fri Jun 26 2020 13:32:09 GMT-0700 (Pacific Daylight Time)">20:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">well, element indexes wouldn't normally show up as property names. But if the array stored GC things, they should show up in the dump.</td></tr>
  <tr class="msg" id="L224"><td class="ts-cell"><a class="ts" href="#L224" alt="Fri Jun 26 2020 13:32:30 GMT-0700 (Pacific Daylight Time)">20:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><a href="http://Agar.io">Agar.io</a> -- the simplest, original .io game-- sends 4kb/s of data. For more complex games, the bandwidth usage is probably double or triple.
for reference, one version specifically tested not to drop frames under any circumstance in Chrome (getting 28.9fps at worst), got 25FPS in Firefox [this is a 30hz high resolution monitor]</td></tr>
  <tr class="msg" id="L225"><td class="ts-cell"><a class="ts" href="#L225" alt="Fri Jun 26 2020 13:33:09 GMT-0700 (Pacific Daylight Time)">20:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">most of that data will be malloc data, which won't trigger GCs as early, but yeah I don't think it really changes the picture you're describing</td></tr>
  <tr class="msg" id="L226"><td class="ts-cell"><a class="ts" href="#L226" alt="Fri Jun 26 2020 13:33:53 GMT-0700 (Pacific Daylight Time)">20:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">can you run for a little while with the env var MOZ_GCTIMER set to a filename, to see what is triggering the GCs?</td></tr>
  <tr class="msg" id="L227"><td class="ts-cell"><a class="ts" href="#L227" alt="Fri Jun 26 2020 13:34:28 GMT-0700 (Pacific Daylight Time)">20:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">ok</td></tr>
  <tr class="msg" id="L228"><td class="ts-cell"><a class="ts" href="#L228" alt="Fri Jun 26 2020 13:34:40 GMT-0700 (Pacific Daylight Time)">20:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">this is interesting to me. I started implementing nursery-allocatable ArrayBuffers once, but it turned out to be not at all the right thing for what I was trying to fix.</td></tr>
  <tr class="msg" id="L229"><td class="ts-cell"><a class="ts" href="#L229" alt="Fri Jun 26 2020 13:36:02 GMT-0700 (Pacific Daylight Time)">20:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">it's doable by breaking the rules of the nursery -- minor GC time is supposed to depend only on the amount of live data, independent of the amount of dead data. But if you keep a collection of allocated stuff, you can iterate over it after a minor GC.</td></tr>
  <tr class="msg" id="L230"><td class="ts-cell"><a class="ts" href="#L230" alt="Fri Jun 26 2020 13:36:39 GMT-0700 (Pacific Daylight Time)">20:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">you could keep native arraybuffers on the native heap, but I know nothing about Firefox's architecture to know if that would be feasable</td></tr>
  <tr class="msg" id="L231"><td class="ts-cell"><a class="ts" href="#L231" alt="Fri Jun 26 2020 13:36:44 GMT-0700 (Pacific Daylight Time)">20:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">for ArrayBuffers, you have to be careful because we have a whole bunch of different types, and you only want to play these tricks with the simplest ones. But it's doable.</td></tr>
  <tr class="msg" id="L232"><td class="ts-cell"><a class="ts" href="#L232" alt="Fri Jun 26 2020 13:37:09 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">what's a "native arraybuffer"?</td></tr>
  <tr class="msg" id="L233"><td class="ts-cell"><a class="ts" href="#L233" alt="Fri Jun 26 2020 13:37:16 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">ampdot</span>: The question is how you free those buffers if the ArrayBuffer doesn't get tenured</td></tr>
  <tr class="msg" id="L234"><td class="ts-cell"><a class="ts" href="#L234" alt="Fri Jun 26 2020 13:37:38 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">One of the design goals of the nursery is that we can copy the live values out, and ignore all the dead ones</td></tr>
  <tr class="msg" id="L235"><td class="ts-cell"><a class="ts" href="#L235" alt="Fri Jun 26 2020 13:37:40 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> what's a "native arraybuffer"?</blockquote></mx-reply>an arraybuffer allocated or passed in by the embedder, such as an arraybuffer returned by a websocket</td></tr>
  <tr class="msg" id="L236"><td class="ts-cell"><a class="ts" href="#L236" alt="Fri Jun 26 2020 13:38:23 GMT-0700 (Pacific Daylight Time)">20:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> can you run for a little while with the env var MOZ_GCTIMER set to a filename, to see what is triggering the GCs?</blockquote></mx-reply>give me a moment, I just ran out of system storage</td></tr>
  <tr class="msg" id="L237"><td class="ts-cell"><a class="ts" href="#L237" alt="Fri Jun 26 2020 13:38:49 GMT-0700 (Pacific Daylight Time)">20:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh, the embedder can sort of do that. For the data, at least -- we call it an external ArrayBuffer. You have to manage lifetimes carefully.</td></tr>
  <tr class="msg" id="L238"><td class="ts-cell"><a class="ts" href="#L238" alt="Fri Jun 26 2020 13:39:29 GMT-0700 (Pacific Daylight Time)">20:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">alternatively, you could run with the Gecko Profiler. It will capture the needed GC data.</td></tr>
  <tr class="msg" id="L239"><td class="ts-cell"><a class="ts" href="#L239" alt="Fri Jun 26 2020 13:39:48 GMT-0700 (Pacific Daylight Time)">20:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">if you're tuning performance, it's probably a good thing to get comfortable with</td></tr>
  <tr class="msg" id="L240"><td class="ts-cell"><a class="ts" href="#L240" alt="Fri Jun 26 2020 13:40:11 GMT-0700 (Pacific Daylight Time)">20:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I don't see a way to see frame end and frame start markers for Gecko Profiler</td></tr>
  <tr class="msg" id="L241"><td class="ts-cell"><a class="ts" href="#L241" alt="Fri Jun 26 2020 13:40:39 GMT-0700 (Pacific Daylight Time)">20:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">for chrome devtools, I tend to zoom in on a frame that missed a deadline and look at what took up time</td></tr>
  <tr class="msg" id="L242"><td class="ts-cell"><a class="ts" href="#L242" alt="Fri Jun 26 2020 13:41:37 GMT-0700 (Pacific Daylight Time)">20:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">if it missed a frame by far enough, it'll show up as a red bar that you can zoom the whole view to</td></tr>
  <tr class="msg" id="L243"><td class="ts-cell"><a class="ts" href="#L243" alt="Fri Jun 26 2020 13:42:19 GMT-0700 (Pacific Daylight Time)">20:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">how much is 'by far enough'? 1ms? 100ms?</td></tr>
  <tr class="msg" id="L244"><td class="ts-cell"><a class="ts" href="#L244" alt="Fri Jun 26 2020 13:44:21 GMT-0700 (Pacific Daylight Time)">20:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">mstange</span>: (I should probably look this up, but if you're around, maybe you can say?)</td></tr>
  <tr class="msg" id="L245"><td class="ts-cell"><a class="ts" href="#L245" alt="Fri Jun 26 2020 13:44:38 GMT-0700 (Pacific Daylight Time)">20:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">plus, you'd know how to do frame-based stuff, which I haven't paid attention to</td></tr>
  <tr class="msg" id="L246"><td class="ts-cell"><a class="ts" href="#L246" alt="Fri Jun 26 2020 13:46:41 GMT-0700 (Pacific Daylight Time)">20:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><a href="https://profiler.firefox.com/docs/#/./guide-ui-tour?id=timeline">https://profiler.firefox.com/docs/#/./guide-ui-tour?id=timeline</a> just says "a long time". That's really a different sort of thing than the dropped frames you're looking at.</td></tr>
  <tr class="msg" id="L247"><td class="ts-cell"><a class="ts" href="#L247" alt="Fri Jun 26 2020 13:47:37 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I've been adding some instrumentation to answer those sorts of questions when you're mocking up a frame-based application using the JS shell, but that's not going to help here.</td></tr>
  <tr class="msg" id="L248"><td class="ts-cell"><a class="ts" href="#L248" alt="Fri Jun 26 2020 13:49:26 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">zooming out a bit, one way to avoid missing frames is to never do a major GC. Another way is for the major GC slices to be fast enough that you have enough time for some GC work as well as your application within the inter-frame time.</td></tr>
  <tr class="msg" id="L249"><td class="ts-cell"><a class="ts" href="#L249" alt="Fri Jun 26 2020 13:49:46 GMT-0700 (Pacific Daylight Time)">20:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">or, you could have an embedder's arraybuffer be refcounted, i.e. each js-side arraybuffer is really a handle that when collected decrements the refcount</td></tr>
  <tr class="msg" id="L250"><td class="ts-cell"><a class="ts" href="#L250" alt="Fri Jun 26 2020 13:50:13 GMT-0700 (Pacific Daylight Time)">20:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">by default, we should be trying to keep GC pauses to 5ms or less. Though I'd want to verify that you're getting the right budget in your case.</td></tr>
  <tr class="msg" id="L251"><td class="ts-cell"><a class="ts" href="#L251" alt="Fri Jun 26 2020 13:50:26 GMT-0700 (Pacific Daylight Time)">20:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(that'll also be in both the profiler data, or the MOZ_GCTIMER data)</td></tr>
  <tr class="msg" id="L252"><td class="ts-cell"><a class="ts" href="#L252" alt="Fri Jun 26 2020 13:50:58 GMT-0700 (Pacific Daylight Time)">20:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">yeah, the engine supports refcounted arraybuffers, but I don't think Gecko uses them</td></tr>
  <tr class="msg" id="L253"><td class="ts-cell"><a class="ts" href="#L253" alt="Fri Jun 26 2020 13:52:22 GMT-0700 (Pacific Daylight Time)">20:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I have the output of MOZ_GCTIMER, but I only see 3 gc entries, which doesn't seem to be the right number. Is there a special way of killing the process so logs are flushed? <span class="nick-12">sfink</span></td></tr>
  <tr class="msg" id="L254"><td class="ts-cell"><a class="ts" href="#L254" alt="Fri Jun 26 2020 13:53:12 GMT-0700 (Pacific Daylight Time)">20:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">if you can produce a profile that shows that the arraybuffer stuff is a problem, we can certainly look into doing something about it</td></tr>
  <tr class="msg" id="L255"><td class="ts-cell"><a class="ts" href="#L255" alt="Fri Jun 26 2020 13:53:51 GMT-0700 (Pacific Daylight Time)">20:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">hm. I think it flushes after every GC. Backing up, how do you know that you're running into a problem with GCs?</td></tr>
  <tr class="msg" id="L256"><td class="ts-cell"><a class="ts" href="#L256" alt="Fri Jun 26 2020 13:54:47 GMT-0700 (Pacific Daylight Time)">20:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">yes, it flushes: <a href="https://searchfox.org/mozilla-central/source/js/src/gc/Statistics.cpp#1020">https://searchfox.org/mozilla-central/source/js/src/gc/Statistics.cpp#1020</a></td></tr>
  <tr class="msg" id="L257"><td class="ts-cell"><a class="ts" href="#L257" alt="Fri Jun 26 2020 13:56:01 GMT-0700 (Pacific Daylight Time)">20:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">Wait, no, I simply looked in the wrong folder, whoops</td></tr>
  <tr class="msg" id="L258"><td class="ts-cell"><a class="ts" href="#L258" alt="Fri Jun 26 2020 13:57:05 GMT-0700 (Pacific Daylight Time)">20:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I'm not sure how it works with the multiple processes, honestly.</td></tr>
  <tr class="msg" id="L259"><td class="ts-cell"><a class="ts" href="#L259" alt="Fri Jun 26 2020 13:57:47 GMT-0700 (Pacific Daylight Time)">20:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh, it opens in append mode, so they'll all be smushed together</td></tr>
  <tr class="msg" id="L260"><td class="ts-cell"><a class="ts" href="#L260" alt="Fri Jun 26 2020 14:05:31 GMT-0700 (Pacific Daylight Time)">21:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I can't get logging to work. I ran firefox from within sudo -H bash (sudo -H root shell) and pointed MOZ_GCTIMER at a file inside my non-root home directory, and nothing gets logged to the file. I tried it with a pre-created file and without.</td></tr>
  <tr class="msg" id="L261"><td class="ts-cell"><a class="ts" href="#L261" alt="Fri Jun 26 2020 14:06:01 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">if you can get a profile, that'd be easier for me to look at anyway</td></tr>
  <tr class="msg" id="L262"><td class="ts-cell"><a class="ts" href="#L262" alt="Fri Jun 26 2020 14:06:08 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">and it has pretty much a superset of the info</td></tr>
  <tr class="msg" id="L263"><td class="ts-cell"><a class="ts" href="#L263" alt="Fri Jun 26 2020 14:06:10 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><p>Do we have a jsapi function that answers the question "Would doing <code>DefineProperty</code> succeed or would it throw?"</p>
<p>I thought I'd seen this, but I can't seem to find  anything similar, so I could be wrong.</p>
</td></tr>
  <tr class="msg" id="L264"><td class="ts-cell"><a class="ts" href="#L264" alt="Fri Jun 26 2020 14:06:13 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">I shall try stdout with a shell file redirect</td></tr>
  <tr class="msg" id="L265"><td class="ts-cell"><a class="ts" href="#L265" alt="Fri Jun 26 2020 14:06:28 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh. It might be because of sandboxing.</td></tr>
  <tr class="msg" id="L266"><td class="ts-cell"><a class="ts" href="#L266" alt="Fri Jun 26 2020 14:06:48 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">you could set <code>MOZ_DISABLE_CONTENT_SANDBOX=1</code></td></tr>
  <tr class="msg" id="L267"><td class="ts-cell"><a class="ts" href="#L267" alt="Fri Jun 26 2020 14:06:55 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">though your stdout thing should work as well</td></tr>
  <tr class="msg" id="L268"><td class="ts-cell"><a class="ts" href="#L268" alt="Fri Jun 26 2020 14:07:13 GMT-0700 (Pacific Daylight Time)">21:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">Still nothing, guess I'll use Gecko Profiler</td></tr>
  <tr class="msg" id="L269"><td class="ts-cell"><a class="ts" href="#L269" alt="Fri Jun 26 2020 14:12:04 GMT-0700 (Pacific Daylight Time)">21:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">To answer my own question, I don't think this is possible. Which is irksome, but I shall have to press on. </td></tr>
  <tr class="msg" id="L270"><td class="ts-cell"><a class="ts" href="#L270" alt="Fri Jun 26 2020 14:12:22 GMT-0700 (Pacific Daylight Time)">21:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">which gecko profiler categories should I enable so you can get the data you need? I don't want method names appearing in the file I send you. <span class="nick-12">sfink</span></td></tr>
  <tr class="msg" id="L271"><td class="ts-cell"><a class="ts" href="#L271" alt="Fri Jun 26 2020 14:34:21 GMT-0700 (Pacific Daylight Time)">21:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Hm. I think the GC stuff is always included? I think to eliminate method names, you'd probably have to unselect "JavaScript".</td></tr>
  <tr class="msg" id="L272"><td class="ts-cell"><a class="ts" href="#L272" alt="Fri Jun 26 2020 14:35:04 GMT-0700 (Pacific Daylight Time)">21:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">at least, I don't <em>think</em> anything else would store method names, but I don't know for sure</td></tr>
  <tr class="msg" id="L273"><td class="ts-cell"><a class="ts" href="#L273" alt="Fri Jun 26 2020 14:35:28 GMT-0700 (Pacific Daylight Time)">21:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">there's also an option to share an anonymized profile, I think, though I don't know what anonymous means there</td></tr>
  <tr class="msg" id="L274"><td class="ts-cell"><a class="ts" href="#L274" alt="Fri Jun 26 2020 14:35:36 GMT-0700 (Pacific Daylight Time)">21:35</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-12" title="@sfink:mozilla.org">sfink</span></div></td><td class="msg-cell">skims the docs again</td></tr>
  <tr class="msg" id="L275"><td class="ts-cell"><a class="ts" href="#L275" alt="Fri Jun 26 2020 14:38:59 GMT-0700 (Pacific Daylight Time)">21:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">hm, no, it looks like you can only redact "resource URLs and paths". So turning off JavaScript stacks is probably the only option.</td></tr>
  <tr class="msg" id="L276"><td class="ts-cell"><a class="ts" href="#L276" alt="Fri Jun 26 2020 14:40:06 GMT-0700 (Pacific Daylight Time)">21:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">confession: Inspired by Iain, I think I have a much nicer way to make my private fields inline caches nice and safe; will have to clean it up tho, and I am out of time. 'See' everyone Thursday next week: 🇨🇦 👋</td></tr>
  <tr class="msg" id="L277"><td class="ts-cell"><a class="ts" href="#L277" alt="Fri Jun 26 2020 14:40:10 GMT-0700 (Pacific Daylight Time)">21:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell">Seen! Your update will eventually appear on <a href="https://robotzilla.github.io/histoire">https://robotzilla.github.io/histoire</a></td></tr>
  <tr class="msg" id="L278"><td class="ts-cell"><a class="ts" href="#L278" alt="Fri Jun 26 2020 14:41:07 GMT-0700 (Pacific Daylight Time)">21:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">happy pto! Vacationing to the other side of the couch?</td></tr>
  <tr class="msg" id="L279"><td class="ts-cell"><a class="ts" href="#L279" alt="Fri Jun 26 2020 14:43:01 GMT-0700 (Pacific Daylight Time)">21:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I just profiled <a href="http://agar.io">agar.io</a>, just to see. Very few major GCs. But most slices had around a 49ms budget, which means we're not treating it as an animation.</td></tr>
  <tr class="msg" id="L280"><td class="ts-cell"><a class="ts" href="#L280" alt="Fri Jun 26 2020 16:36:37 GMT-0700 (Pacific Daylight Time)">23:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">the gc pause time for major gc is proportional to the number of live objects, not the number of dead objects, so this 'websocket arraybuffers spawn on old heap' thing gives all JavaScript code an artificial disadvantage. Perhaps the game would be faster if we compiled a JS interpreter QuickJS to WASM and ran it inside there.</td></tr>
  <tr class="msg" id="L281"><td class="ts-cell"><a class="ts" href="#L281" alt="Fri Jun 26 2020 16:39:15 GMT-0700 (Pacific Daylight Time)">23:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@ampdot:matrix.org">ampdot</span>&gt;</div></td><td class="msg-cell">Could a possible workaround be to use Blob (WebSocket.binaryType = "blob") and ReadableStream instead? Would those allocate on old space?</td></tr>

</tbody></table></div></div></div>
</body></html>