<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-03-14</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-03-14<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-03-13" class="nav-link"><span>prev</span></a>
<a href="2023-03-15" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Mar 13 2023 23:21:52 GMT-0700 (Pacific Daylight Time)">06:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Hi Matthew -- just wanted to follow up on the intent-to-ship email for change-array-by-copy. I wasn't sure what should be in the email or where it should go, so I didn't do it myself</blockquote></mx-reply>you can check <a href="https://wiki.mozilla.org/ExposureGuidelines#Email_templates_for_new_or_changed_features">https://wiki.mozilla.org/ExposureGuidelines#Email_templates_for_new_or_changed_features</a></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Mar 14 2023 01:22:08 GMT-0700 (Pacific Daylight Time)">08:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Hi Matthew -- just wanted to follow up on the intent-to-ship email for change-array-by-copy. I wasn't sure what should be in the email or where it should go, so I didn't do it myself</blockquote></mx-reply>Hey Tim: If you'd like to do it (Good practice if you're interested) you can follow the template that <span class="nick-14">nchevobbe</span> linked -- otherwise, let me know and I'll probably be able to send it next week.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Mar 14 2023 01:22:30 GMT-0700 (Pacific Daylight Time)">08:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">As far as fuzzing goes, I don't believe anything has popped. :) </td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Mar 14 2023 05:21:05 GMT-0700 (Pacific Daylight Time)">12:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">bvisness</span>: this mozconfig works for me for the wasi build on linux: <a href="https://paste.mozilla.org/Lsxy2MEf">https://paste.mozilla.org/Lsxy2MEf</a></td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Mar 14 2023 08:36:11 GMT-0700 (Pacific Daylight Time)">15:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@krosylight:mozilla.org">krosylight</span>&gt;</div></td><td class="msg-cell">Hey people, I'm investigating a fuzzer failure caused by an uncatchable exception from somewhere, but not sure where the exception is coming from. How can I track it?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Mar 14 2023 08:40:51 GMT-0700 (Pacific Daylight Time)">15:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">krosylight</span>: You may have luck (and you may need to dig in a bit) with the JSContext::status field (<a href="https://searchfox.org/mozilla-central/source/js/src/vm/JSContext.h#626">https://searchfox.org/mozilla-central/source/js/src/vm/JSContext.h#626</a>)</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Mar 14 2023 08:41:15 GMT-0700 (Pacific Daylight Time)">15:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">setting a watch point (and ideally reverse-continuing) </td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Mar 14 2023 08:52:03 GMT-0700 (Pacific Daylight Time)">15:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@krosylight:mozilla.org">krosylight</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-1">krosylight</span>: You may have luck (and you may need to dig in a bit) with the JSContext::status field (<a href="https://searchfox.org/mozilla-central/source/js/src/vm/JSContext.h#626">https://searchfox.org/mozilla-central/source/js/src/vm/JSContext.h#626</a>)</blockquote></mx-reply>It says None... 🤔</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Mar 14 2023 08:52:52 GMT-0700 (Pacific Daylight Time)">15:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@krosylight:mozilla.org">krosylight</span>&gt;</div></td><td class="msg-cell">It seemingly happens from <a href="https://searchfox.org/mozilla-central/rev/dbec4165e4c26a0ff970b614842b689e8357593c/dom/encoding/TextEncoderStream.cpp#163">https://searchfox.org/mozilla-central/rev/dbec4165e4c26a0ff970b614842b689e8357593c/dom/encoding/TextEncoderStream.cpp#163</a> btw</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Mar 14 2023 08:52:53 GMT-0700 (Pacific Daylight Time)">15:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Whoops. That's a my fault</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Mar 14 2023 08:53:11 GMT-0700 (Pacific Daylight Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">an -uncatchable- exception is defined exactly by a function returning false, but -not settitng- a pending exception</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Mar 14 2023 08:53:24 GMT-0700 (Pacific Daylight Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">blame jetlag? </td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Mar 14 2023 08:53:44 GMT-0700 (Pacific Daylight Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@krosylight:mozilla.org">krosylight</span>&gt;</div></td><td class="msg-cell"><p>Oh, so the following is wrong?</p>
<pre><code>      aRv.MightThrowJSException();
      aRv.StealExceptionFromJSContext(cx);
</code></pre>
</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Mar 14 2023 08:54:05 GMT-0700 (Pacific Daylight Time)">15:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@krosylight:mozilla.org">krosylight</span>&gt;</div></td><td class="msg-cell">Or is that just expected? 👀</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Mar 14 2023 08:55:24 GMT-0700 (Pacific Daylight Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Well, if you have stolen the exception from the JS context, now the JS engine needs to be told things succeeded; I'm not sure how the rv stuff works with uncatachable exceptions tho</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Mar 14 2023 08:56:33 GMT-0700 (Pacific Daylight Time)">15:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/source/dom/bindings/BindingUtils.cpp#654-667">https://searchfox.org/mozilla-central/source/dom/bindings/BindingUtils.cpp#654-667</a></td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Mar 14 2023 08:57:20 GMT-0700 (Pacific Daylight Time)">15:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">so it's important too that when you do steal, there's actually a pending exception you're trying to steal</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Mar 14 2023 08:59:53 GMT-0700 (Pacific Daylight Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">you might check the runtime's <a href="https://searchfox.org/mozilla-central/rev/dbec4165e4c26a0ff970b614842b689e8357593c/js/src/vm/JSContext.cpp#271"><code>hadOutOfMemory</code> flag</a>.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Mar 14 2023 12:28:28 GMT-0700 (Pacific Daylight Time)">19:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Hey all 👋 Former Mozillian and current Matrix/Element employee here. I'm working on a WebGL project called Third Room. I'm running into some pretty major GC pauses which resemble some familiar issues from my days working on the Mozilla Hubs team.

About every 5 seconds I see a 41ms MajorGC in Firefox Profiler. I'm allocating about 4kb per second  on the JS heap which I'd love to clean up, but the physics library I'm depending on makes that difficult. However, I feel like SpiderMonkey's GC should be able to handle this just fine. I'm on a 16" M1 Max MacBook Pro, I have all of my extensions disabled, and nothing else running on my computer. It should have more than enough power to handle this. And I would think it would be handled as minor GCs not major ones.

Some other things that may add to the complexity of diagnosing this issue is that I'm using SharedArrayBuffers and multiple workers.

How would I go about solving this? What should the GC be able to handle? And how can I ensure I'm only hitting minor GCs instead of major ones?</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Mar 14 2023 13:02:31 GMT-0700 (Pacific Daylight Time)">20:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Robert Long</span>: what is your overall heap size?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Mar 14 2023 13:02:52 GMT-0700 (Pacific Daylight Time)">20:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Pretty large. Let me check.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Mar 14 2023 13:03:14 GMT-0700 (Pacific Daylight Time)">20:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Robert Long</span>: do you see pauses in Chrome?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Mar 14 2023 13:03:20 GMT-0700 (Pacific Daylight Time)">20:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">None</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Mar 14 2023 13:05:14 GMT-0700 (Pacific Daylight Time)">20:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">So the heap is about 134mb</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Mar 14 2023 13:05:24 GMT-0700 (Pacific Daylight Time)">20:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Robert Long</span>: is there a public version that I can try to reproduce on?</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Mar 14 2023 13:05:37 GMT-0700 (Pacific Daylight Time)">20:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Yep, <a href="http://thirdroom.io">thirdroom.io</a></td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Mar 14 2023 13:05:50 GMT-0700 (Pacific Daylight Time)">20:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Just log in with your matrix account or use a guest account</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Mar 14 2023 13:05:54 GMT-0700 (Pacific Daylight Time)">20:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">ok, that's not very large</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Mar 14 2023 13:06:25 GMT-0700 (Pacific Daylight Time)">20:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Does the heap snapshot in the dev tools end up capturing all workers?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Mar 14 2023 13:06:58 GMT-0700 (Pacific Daylight Time)">20:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">And also I imagine it doesn't account for any media I'm loading in. Because there are WebGL textures and such that should add up to more than that.</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Mar 14 2023 13:07:20 GMT-0700 (Pacific Daylight Time)">20:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">the size of the dev tools is probably fine</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Mar 14 2023 13:07:32 GMT-0700 (Pacific Daylight Time)">20:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Ok, yeah then 134mb it is</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Mar 14 2023 13:07:51 GMT-0700 (Pacific Daylight Time)">20:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">it's more the number of objects than the size of them actually</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Mar 14 2023 13:07:58 GMT-0700 (Pacific Daylight Time)">20:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">and yes I can think I see the problem as well</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Mar 14 2023 13:08:17 GMT-0700 (Pacific Daylight Time)">20:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Ah, good</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Mar 14 2023 13:09:46 GMT-0700 (Pacific Daylight Time)">20:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">It's kinda fun you can "see" the GC pauses by spawning a 3D crate and the physics system will drop a frame and cause the crate to clip through the floor.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Mar 14 2023 13:10:24 GMT-0700 (Pacific Daylight Time)">20:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Robert Long</span>: the spidermonkey people are actually having a workweek this week so might not be around virtually</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Mar 14 2023 13:10:32 GMT-0700 (Pacific Daylight Time)">20:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Robert Long</span>: it would be good if you can file a bug about it</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Mar 14 2023 13:11:53 GMT-0700 (Pacific Daylight Time)">20:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Ah, ok. That's alright. Will do. Best under the SpiderMonkey / JSEngine component?</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Mar 14 2023 13:12:45 GMT-0700 (Pacific Daylight Time)">20:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">that's a fine place to start</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Mar 14 2023 13:12:58 GMT-0700 (Pacific Daylight Time)">20:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Cool, thanks for checking it out</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Mar 14 2023 13:13:35 GMT-0700 (Pacific Daylight Time)">20:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">so what's weird is that I saw dropped frames</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Mar 14 2023 13:13:54 GMT-0700 (Pacific Daylight Time)">20:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">but it does look like requestAnimationFrame is still running at a decent rate</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Mar 14 2023 13:14:14 GMT-0700 (Pacific Daylight Time)">20:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Right yeah, well we're running the render thread with an OffscreenCanvas</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Mar 14 2023 13:14:15 GMT-0700 (Pacific Daylight Time)">20:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">what I mean is I saw dropped frames visually, but I don't really see them in the profile</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Mar 14 2023 13:14:19 GMT-0700 (Pacific Daylight Time)">20:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">So the render thread is fine</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Mar 14 2023 13:14:27 GMT-0700 (Pacific Daylight Time)">20:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">But the physics is ran on another</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Mar 14 2023 13:14:30 GMT-0700 (Pacific Daylight Time)">20:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">And double buffered</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Mar 14 2023 13:15:37 GMT-0700 (Pacific Daylight Time)">20:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">So you're seeing the physics thread stall, glitch out because the velocities are wrong, and the render thread doesn't have anything new to render.</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Mar 14 2023 13:15:43 GMT-0700 (Pacific Daylight Time)">20:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">ah</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Mar 14 2023 13:15:59 GMT-0700 (Pacific Daylight Time)">20:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Yeah, fun stuff</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Mar 14 2023 13:18:00 GMT-0700 (Pacific Daylight Time)">20:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">I wonder if the problem is that we don't do incremental gc on workers</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Mar 14 2023 13:18:08 GMT-0700 (Pacific Daylight Time)">20:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Oooh</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Mar 14 2023 13:18:12 GMT-0700 (Pacific Daylight Time)">20:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">I didn't know that</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Mar 14 2023 13:18:29 GMT-0700 (Pacific Daylight Time)">20:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">And when does a GC happen then?</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Mar 14 2023 13:18:40 GMT-0700 (Pacific Daylight Time)">20:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Is there a limit or is it waiting for idle?</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Mar 14 2023 13:19:13 GMT-0700 (Pacific Daylight Time)">20:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">allocation limits or specific browser triggers</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Mar 14 2023 13:19:40 GMT-0700 (Pacific Daylight Time)">20:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Any way I can force it to happen more often so we don't get such large spikes?</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Tue Mar 14 2023 13:19:41 GMT-0700 (Pacific Daylight Time)">20:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">so take a look at this profile: <a href="https://share.firefox.dev/3JELRVT">https://share.firefox.dev/3JELRVT</a></td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Tue Mar 14 2023 13:20:19 GMT-0700 (Pacific Daylight Time)">20:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Yeah I've been staring at this all yesterday and this morning</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Tue Mar 14 2023 13:20:49 GMT-0700 (Pacific Daylight Time)">20:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">I've got a branch in the works that's reducing allocations by quite a bit</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Tue Mar 14 2023 13:20:51 GMT-0700 (Pacific Daylight Time)">20:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">you can see brutal non incremental major GCs</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Tue Mar 14 2023 13:20:57 GMT-0700 (Pacific Daylight Time)">20:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Yep</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Tue Mar 14 2023 13:21:17 GMT-0700 (Pacific Daylight Time)">20:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">I was hoping that'd be alleviated by just reducing GC pressure and giving it less to deal with</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Tue Mar 14 2023 13:21:30 GMT-0700 (Pacific Daylight Time)">20:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">But I've hit my limit due to Rapier.js</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Tue Mar 14 2023 13:21:51 GMT-0700 (Pacific Daylight Time)">20:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">the heap size number that you gave was probably for the main thread?</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Tue Mar 14 2023 13:21:54 GMT-0700 (Pacific Daylight Time)">20:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">and not the worker?</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Tue Mar 14 2023 13:22:18 GMT-0700 (Pacific Daylight Time)">20:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Possibly? That's what I was asking. Does a heap snapshot cover the workers?</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Tue Mar 14 2023 13:23:06 GMT-0700 (Pacific Daylight Time)">20:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">I don't think it does</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Tue Mar 14 2023 13:23:52 GMT-0700 (Pacific Daylight Time)">20:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Ok, then I can check the FF task manager? Idk where that'd be listed</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Tue Mar 14 2023 13:24:07 GMT-0700 (Pacific Daylight Time)">20:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Robert Long</span>: that won't know per thread heap size either</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Tue Mar 14 2023 13:24:53 GMT-0700 (Pacific Daylight Time)">20:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">about:memory should though</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Tue Mar 14 2023 13:25:31 GMT-0700 (Pacific Daylight Time)">20:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">I see 233MB locally</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Tue Mar 14 2023 13:27:02 GMT-0700 (Pacific Daylight Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">I filed a bug almost 10 years ago about incremental GC on workers. <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=941794">https://bugzilla.mozilla.org/show_bug.cgi?id=941794</a></td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Tue Mar 14 2023 13:27:48 GMT-0700 (Pacific Daylight Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">And OffscreenCanvas finally landed after years</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Tue Mar 14 2023 13:27:49 GMT-0700 (Pacific Daylight Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">mccr8</span>: now that we have things like OffscreenCanvas on a worker it seems like we should really turn it on</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Tue Mar 14 2023 13:27:56 GMT-0700 (Pacific Daylight Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Yeah</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Tue Mar 14 2023 13:28:28 GMT-0700 (Pacific Daylight Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Robert Long</span>: given Rapier is written in Rust I'm surprised you're generating much garbage at all</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Tue Mar 14 2023 13:28:38 GMT-0700 (Pacific Daylight Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">do you know if it's coming from the bindings somehow?</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Tue Mar 14 2023 13:28:49 GMT-0700 (Pacific Daylight Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">It's the wasm_bindgen bindings yeah</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Tue Mar 14 2023 13:29:04 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">It's got JS classes wrapping pointers all over the place</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Tue Mar 14 2023 13:29:10 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">And they don't reuse those objects</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Tue Mar 14 2023 13:29:23 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">So I basically would have to rewrite the bindings</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Tue Mar 14 2023 13:29:34 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Which I'm trying to avoid for now</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Tue Mar 14 2023 13:29:39 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">But I could</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Tue Mar 14 2023 13:30:06 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I agree with <span class="nick-16">mccr8</span> here. This is another example of "GC scheduling on workers is crap".</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Tue Mar 14 2023 13:30:25 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">90% of the time there's no point in doing incremental GC on workers</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Tue Mar 14 2023 13:30:32 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">but if you fall into the 10%, it really sucks</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Tue Mar 14 2023 13:30:44 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(actually probably more like 1%, but whatever)</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Tue Mar 14 2023 13:31:16 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">I mean I can disable workers entirely for FF. But that kinda makes it a second class citizen. Which I've kinda spent the last 5 years trying to make sure isn't ever the case.</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Tue Mar 14 2023 13:31:17 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I'll take a look in a little bit, but I am curious why this isn't handled with minor GCs</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Tue Mar 14 2023 13:31:28 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">We also don't do incremental CC, though there aren't that many DOM objects on workers so that's even less of an issue.</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Tue Mar 14 2023 13:31:46 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">unless it's the small amount of slop we always have when tenuring recently allocated objects</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Tue Mar 14 2023 13:31:47 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Robert Long</span>: is it possible to get access to a version without minified sources?</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Tue Mar 14 2023 13:31:56 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Yeah it's all open source.</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Tue Mar 14 2023 13:32:17 GMT-0700 (Pacific Daylight Time)">20:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/matrix-org/thirdroom">https://github.com/matrix-org/thirdroom</a></td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Tue Mar 14 2023 13:32:29 GMT-0700 (Pacific Daylight Time)">20:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">Yeah, incremental will improve latency but not throughput so whether it will help depends on what exactly the problem is. If the worker thread is overloaded with GC time, incremental won't help.</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Tue Mar 14 2023 13:32:29 GMT-0700 (Pacific Daylight Time)">20:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Just <code>yarn</code> <code>yarn dev</code></td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Tue Mar 14 2023 13:32:43 GMT-0700 (Pacific Daylight Time)">20:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">You gotta run in FF nightly locally though</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Tue Mar 14 2023 13:32:54 GMT-0700 (Pacific Daylight Time)">20:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Due to Vite + worker module imports</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Tue Mar 14 2023 13:33:05 GMT-0700 (Pacific Daylight Time)">20:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Which I'm very happy that landed!</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Tue Mar 14 2023 13:33:42 GMT-0700 (Pacific Daylight Time)">20:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">Robert Long</span>: I don't have time to look at this more today but please file a bug</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Tue Mar 14 2023 13:33:56 GMT-0700 (Pacific Daylight Time)">20:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Definitely will thanks again!</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Tue Mar 14 2023 13:35:03 GMT-0700 (Pacific Daylight Time)">20:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">and cc me please</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Tue Mar 14 2023 13:35:13 GMT-0700 (Pacific Daylight Time)">20:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Same username?</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Tue Mar 14 2023 13:38:04 GMT-0700 (Pacific Daylight Time)">20:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Same username?</blockquote></mx-reply>yes</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Tue Mar 14 2023 13:56:34 GMT-0700 (Pacific Daylight Time)">20:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1822411">https://bugzilla.mozilla.org/show_bug.cgi?id=1822411</a></td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Tue Mar 14 2023 13:56:38 GMT-0700 (Pacific Daylight Time)">20:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">And CCed</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Tue Mar 14 2023 13:58:09 GMT-0700 (Pacific Daylight Time)">20:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">FWIW things not being collected from minor GCs is different from not having incremental GCs. Incremental GCs break up major GCs.</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Tue Mar 14 2023 13:58:21 GMT-0700 (Pacific Daylight Time)">20:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">So there could be some issue where things aren't being collected by minor GCs where they should be.</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Tue Mar 14 2023 13:58:57 GMT-0700 (Pacific Daylight Time)">20:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Ah ok, my understanding was that Incremental GCs would break up MajorGCs into MinorGCs which is what I tried to state in my report</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Tue Mar 14 2023 13:59:54 GMT-0700 (Pacific Daylight Time)">20:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">An extra 4-6ms here or there wont break the experience but 41ms definitely does</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Tue Mar 14 2023 14:08:33 GMT-0700 (Pacific Daylight Time)">21:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Incremental GCs break up major GCs into GC slices.</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Tue Mar 14 2023 14:08:53 GMT-0700 (Pacific Daylight Time)">21:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Gotcha 👍️</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Tue Mar 14 2023 14:09:36 GMT-0700 (Pacific Daylight Time)">21:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">minor GCs aka nursery collections are throwing stuff out before it gets to the major heap, and are not incrementalizable</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Tue Mar 14 2023 14:10:16 GMT-0700 (Pacific Daylight Time)">21:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(but they also hopefully are less than 1ms)</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Tue Mar 14 2023 14:13:29 GMT-0700 (Pacific Daylight Time)">21:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@arobertlong:matrix.org">Robert Long</span>&gt;</div></td><td class="msg-cell">Yeah 🤞</td></tr>

</tbody></table></div></div></div>
</body></html>