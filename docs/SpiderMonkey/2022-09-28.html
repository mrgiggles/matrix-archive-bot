<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-09-28</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-09-28<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-09-27" class="nav-link"><span>prev</span></a>
<a href="2022-09-29" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Sep 27 2022 22:22:57 GMT-0700 (Pacific Daylight Time)">05:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@arjun:tchncs.de">arjun</span>&gt;</div></td><td class="msg-cell">hi, i have a general question: how does spidermonkey relate to V8 in terms of design, performance, and security? also will jsparagus eventually replace SpiderMonkey's frontend?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Sep 27 2022 23:16:45 GMT-0700 (Pacific Daylight Time)">06:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">re: jsparagus, this is from the boa/jsparagus discord </td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Sep 28 2022 00:50:10 GMT-0700 (Pacific Daylight Time)">07:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@edoput:mozilla.org">edoput</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-5">edoput</span>: HandleValue -&gt; RootedObject is a pain, but <code>Value</code> and <code>JSObject*</code> are two different things and have a different bitwise representation that you need to convert between. Handle&lt;T&gt; is really just a T* that you happen to know will be visited by the GC, usually because it's the T* stored within a Rooted and thus part of a linked list of Rooteds that the GC knows to visit. Each linked list handles a single type so we can scan over it quickly without inspecting anything to figure out what type it is and therefore what its bits mean.</blockquote></mx-reply>Thanks! This explains a lot.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Sep 28 2022 06:45:22 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@caleb.distributive:mozilla.org">caleb.distributive</span>&gt;</div></td><td class="msg-cell">Hi everyone, I'm developing a C++ project that embeds Spidermonkey (which successfully compiles on UNIXy environments), but am struggling to get it to compile on Windows (using CMake if thats relevant). I have already properly set up the include folder, but the MSVC compiler fails with the following error: <a href="https://paste.mozilla.org/zftLnAmP">https://paste.mozilla.org/zftLnAmP</a>

Looking at the relevant file (jspubtd.h), looks like the macro defining the JSProtoKey enum is somehow resulting in a syntax error. Which is super weird because I've already built it completely fine using MozillaBuild on Windows, as well as configure on Linux.

Does anyone know how to solve this problem?</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Sep 28 2022 06:46:16 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ms2ger:igalia.com">Ms2ger ðŸ’‰ðŸ’‰</span>&gt;</div></td><td class="msg-cell">Is building with msvc still supported?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Sep 28 2022 06:46:43 GMT-0700 (Pacific Daylight Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">there's existing bug. let me search</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Sep 28 2022 06:47:06 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">bug 1768634</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Sep 28 2022 06:47:07 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1768634">https://bugzil.la/1768634</a> â€” UNCONFIRMED (nobody) â€” JSProtoKey macro won't compile on MSVC due to __VA_ARGS__ incompatibility</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Sep 28 2022 06:48:45 GMT-0700 (Pacific Daylight Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@caleb.distributive:mozilla.org">caleb.distributive</span>&gt;</div></td><td class="msg-cell">Is there a potential fix for this, or is MSVC just completely non-viable? Im making an open-source project and would like my Windows developers to jump through as few hoops as possible</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Sep 28 2022 06:49:26 GMT-0700 (Pacific Daylight Time)">13:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">some possible workaround is in comment 4 there</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Sep 28 2022 06:49:34 GMT-0700 (Pacific Daylight Time)">13:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">not yet patched tho</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Sep 28 2022 06:51:25 GMT-0700 (Pacific Daylight Time)">13:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I think, basically, building with MSVC is no longer supported, but patches are welcome as long as it's not too complex</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Sep 28 2022 06:58:34 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@caleb.distributive:mozilla.org">caleb.distributive</span>&gt;</div></td><td class="msg-cell">Cool, thank-you for the help</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Sep 28 2022 09:26:55 GMT-0700 (Pacific Daylight Time)">16:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">we have build instructions for embedders for MSVC in GNOME <a href="https://gitlab.gnome.org/GNOME/gjs/-/blob/master/README.MSVC.md">https://gitlab.gnome.org/GNOME/gjs/-/blob/master/README.MSVC.md</a></td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Sep 28 2022 10:24:40 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@kfjvj:mozilla.org">kfjvj</span>&gt;</div></td><td class="msg-cell">I have a question about JS_SetNativeStackQuota.  Does this function only set limits on stacks, or does it pre-allocate blocks of memory to be used as stacks for each context?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Sep 28 2022 11:51:40 GMT-0700 (Pacific Daylight Time)">18:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">kfjvj</span>: it just sets the limit. It doesn't do any allocation</td></tr>

</tbody></table></div></div></div>
</body></html>