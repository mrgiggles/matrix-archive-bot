<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-11-08</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-11-08<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-11-07" class="nav-link"><span>prev</span></a>
<a href="2023-11-09" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Nov 07 2023 16:02:21 GMT-0800 (Pacific Standard Time)">00:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> okay, so I should be careful not to put pointers when creating large static data.  that applies also to the current prototype of the atomization patch stack, and also the current m-c, which uses an array of (length,hash,pointer) (<a href="https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/vm/WellKnownAtom.h#46">WellKnownAtomInfo</a>), and rewriting it to use index would reduce the total memory consumption with multiple processes</blockquote></mx-reply>Yeah, for the XPIDL static data we tried to be careful to use integer indices etc everywhere to avoid pointers.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Nov 07 2023 16:02:41 GMT-0800 (Pacific Standard Time)">00:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">On Linux, there's some kind of utility you can run to look up whether the static data is rodata or whatever.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Nov 07 2023 16:03:21 GMT-0800 (Pacific Standard Time)">00:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">Glandium's blog post from a decade ago is also kind of relevant, though it is mostly talking about strings. <a href="https://glandium.org/blog/?p=2361">https://glandium.org/blog/?p=2361</a></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Nov 07 2023 16:03:36 GMT-0800 (Pacific Standard Time)">00:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">thanks! I'll look into them</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Nov 08 2023 01:17:04 GMT-0800 (Pacific Standard Time)">09:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">Hi folks, have we done changes to the GC or CC or that kind of thing recently? We're seeing <strong>horrible</strong> performance on <code>chat.m.o</code> on recent nightlies, but not slightly older nightlies</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Nov 08 2023 01:18:19 GMT-0800 (Pacific Standard Time)">09:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">a typical profile looks like this: <a href="https://share.firefox.dev/3sqxuPj">https://share.firefox.dev/3sqxuPj</a>, see the process called <code><a href="http://mozilla.org">mozilla.org</a></code> (which is <code>chat.m.o</code>), main thread, after the 26s mark</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Nov 08 2023 01:18:57 GMT-0800 (Pacific Standard Time)">09:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">maybe it's them that are doing something weird, but strangely I'm typing this from an older nightly, I can't repro</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Nov 08 2023 02:06:26 GMT-0800 (Pacific Standard Time)">10:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">smaug</span>, <span class="nick-4">jonco</span> : that profile ^ does show quite a lot of CC/GC time. Could it be the scheduling changes?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Nov 08 2023 02:14:39 GMT-0800 (Pacific Standard Time)">10:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">That's mostly CC time.  I can't see any recent changes that are immediately suspicious.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Nov 08 2023 02:16:18 GMT-0800 (Pacific Standard Time)">10:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">padenot</span>: any idea of a date range?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Nov 08 2023 02:39:49 GMT-0800 (Pacific Standard Time)">10:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">padenot</span>: what is "recent" here?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Nov 08 2023 02:41:01 GMT-0800 (Pacific Standard Time)">10:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">padenot</span>: That feels like a leak somewhere</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Nov 08 2023 02:44:31 GMT-0800 (Pacific Standard Time)">10:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">(that is what long GC or CC times usually are)</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Nov 08 2023 02:48:21 GMT-0800 (Pacific Standard Time)">10:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">Hey, am new into browser hacking, i would like to have fun on spidermonkey any good ideas where to start ? (my goals is to debug API calls and origin source code ....etc) already did on V8 but wat some fun here ! thanks </td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Nov 08 2023 02:50:24 GMT-0800 (Pacific Standard Time)">10:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">padenot</span>: I could take a look at the gc/cc logs if you generate them from about:memory when you see the issue</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Nov 08 2023 02:51:47 GMT-0800 (Pacific Standard Time)">10:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">fncf0x</span>: Hi again :)  if you haven't yet setup the development environment, try following this document <a href="https://firefox-source-docs.mozilla.org/js/build.html">https://firefox-source-docs.mozilla.org/js/build.html</a></td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Nov 08 2023 02:53:33 GMT-0800 (Pacific Standard Time)">10:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if you've already done that, then the next step is to look for a bug to work on.  <a href="https://codetribute.mozilla.org/languages/c++">https://codetribute.mozilla.org/languages/c++</a> lists bugs suitable for newcomer, and bugs with "Project" = "JavaScript*" is for SpiderMonkey</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Nov 08 2023 02:56:28 GMT-0800 (Pacific Standard Time)">10:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">also, if you have any specific area that you want to look into, let us know</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Nov 08 2023 02:58:16 GMT-0800 (Pacific Standard Time)">10:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">smaug</span>: bug 1863491 looks similar and has a regression range</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Nov 08 2023 02:58:17 GMT-0800 (Pacific Standard Time)">10:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1863491">https://bugzil.la/1863491</a> ‚Äî UNCONFIRMED (nobody) ‚Äî twitter grinds to a halt</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Nov 08 2023 02:59:29 GMT-0800 (Pacific Standard Time)">10:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">Hmm, is it somehow the same as <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1863104">https://bugzilla.mozilla.org/show_bug.cgi?id=1863104</a></td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Nov 08 2023 02:59:46 GMT-0800 (Pacific Standard Time)">10:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if you've already done that, then the next step is to look for a bug to work on.  <a href="https://codetribute.mozilla.org/languages/c++">https://codetribute.mozilla.org/languages/c++</a> lists bugs suitable for newcomer, and bugs with "Project" = "JavaScript*" is for SpiderMonkey</blockquote></mx-reply>thanks !</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Nov 08 2023 02:59:52 GMT-0800 (Pacific Standard Time)">10:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> also, if you have any specific area that you want to look into, let us know</blockquote></mx-reply>alright !</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Nov 08 2023 03:00:54 GMT-0800 (Pacific Standard Time)">11:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">smaug</span>: I can do that. I'm thinking maybe 2-3 days? I'm not always good at updating my nightly</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Nov 08 2023 03:02:02 GMT-0800 (Pacific Standard Time)">11:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">sefeng</span>: could bug 1863104 have caused some leaks (even temporary) ?</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Nov 08 2023 03:02:04 GMT-0800 (Pacific Standard Time)">11:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1863104">https://bugzil.la/1863104</a> ‚Äî NEW (sefeng) ‚Äî 10% regression on AWFY-Matrix React benchmark suite on 2Nov</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Nov 08 2023 03:02:33 GMT-0800 (Pacific Standard Time)">11:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">er, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1722322">https://bugzilla.mozilla.org/show_bug.cgi?id=1722322</a></td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Nov 08 2023 03:03:15 GMT-0800 (Pacific Standard Time)">11:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">smaug</span>: bug 1862909 is a thunderbird regression caused by that change. It does suggest these bugs could all be related to some leak</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Nov 08 2023 03:03:17 GMT-0800 (Pacific Standard Time)">11:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1862909">https://bugzil.la/1862909</a> ‚Äî NEW (nobody) ‚Äî Thunderbird perma suince 2023-11-03 - WARNING: YOU ARE LEAKING THE WORLD (at least one JSRuntime and everything alive inside it, that is) AT JS_ShutDown TIME.  FIX THIS! | single tracking bug</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Nov 08 2023 03:03:40 GMT-0800 (Pacific Standard Time)">11:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">smaug</span>: I clicked the button, that generated a bunch of files, should I zip them up and send them over ?</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Nov 08 2023 03:03:53 GMT-0800 (Pacific Standard Time)">11:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">I'm not entirely sure what to look for or how to do it</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Nov 08 2023 03:05:01 GMT-0800 (Pacific Standard Time)">11:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">zip and share somewhere</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Nov 08 2023 03:05:08 GMT-0800 (Pacific Standard Time)">11:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">they might be huge</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Nov 08 2023 03:05:15 GMT-0800 (Pacific Standard Time)">11:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">select only the ones for the relevant process</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Nov 08 2023 03:06:19 GMT-0800 (Pacific Standard Time)">11:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">two files of 1.2GB each</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Nov 08 2023 03:06:47 GMT-0800 (Pacific Standard Time)">11:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">uh, a bit too large</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Nov 08 2023 03:07:04 GMT-0800 (Pacific Standard Time)">11:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">I was hoping you managed to catch the issue when the leak isn't yet horrible</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Nov 08 2023 03:07:22 GMT-0800 (Pacific Standard Time)">11:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">Hard to analyze such a massive logs, at least on this machine</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Nov 08 2023 03:08:07 GMT-0800 (Pacific Standard Time)">11:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">ok let me reload and try</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Nov 08 2023 03:08:14 GMT-0800 (Pacific Standard Time)">11:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">padenot</span>: by any chance, does changing dom.enable_largest_contentful_paint pref help ?</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Nov 08 2023 03:10:28 GMT-0800 (Pacific Standard Time)">11:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">ah, there is also <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1828144">https://bugzilla.mozilla.org/show_bug.cgi?id=1828144</a> in the possible regression range</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Nov 08 2023 03:13:54 GMT-0800 (Pacific Standard Time)">11:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">smaug</span>: I'll letting it sit there over lunch, hopefully I can repro in 30-45min or so</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Nov 08 2023 03:14:05 GMT-0800 (Pacific Standard Time)">11:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">and it's going to be smaller</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Nov 08 2023 03:15:08 GMT-0800 (Pacific Standard Time)">11:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">smaug</span>: should I do concise or verbose? I did verbose</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Nov 08 2023 03:15:36 GMT-0800 (Pacific Standard Time)">11:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">concise could be enough</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Nov 08 2023 03:15:53 GMT-0800 (Pacific Standard Time)">11:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">those compress extremely well so on my end it doesn't matter</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Nov 08 2023 03:16:36 GMT-0800 (Pacific Standard Time)">11:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">right, but to analyze them... I'd need more than 32GB ram</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Nov 08 2023 03:20:29 GMT-0800 (Pacific Standard Time)">11:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell"><p>when building am having this error</p>
<pre><code class="language-File">    from _curses import *
ModuleNotFoundError: No module named '_curses'
</code></pre>
<p>any one has an idea (am not on window)</p>
</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Nov 08 2023 03:22:19 GMT-0800 (Pacific Standard Time)">11:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">or is there an channel where i can ask those questions ?</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Nov 08 2023 03:25:35 GMT-0800 (Pacific Standard Time)">11:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">fncf0x</span>: the stack trace points a file in your python installation in the last frame.  try checking if it's configured properly</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Nov 08 2023 03:27:13 GMT-0800 (Pacific Standard Time)">11:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-11">fncf0x</span>: the stack trace points a file in your python installation in the last frame.  try checking if it's configured properly</blockquote></mx-reply>its a python3.7 from source, installed noramlly, is there any requirements file ? thanks ! ^^</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Nov 08 2023 03:28:13 GMT-0800 (Pacific Standard Time)">11:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">people in <a href="https://matrix.to/#/#python:mozilla.org">#python:mozilla.org</a> would know better</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Nov 08 2023 03:28:22 GMT-0800 (Pacific Standard Time)">11:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">alright ! thanks !</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed Nov 08 2023 05:20:59 GMT-0800 (Pacific Standard Time)">13:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">anything I can do to help on the leak that <span class="nick-2">padenot</span> mentionned ?</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed Nov 08 2023 05:21:11 GMT-0800 (Pacific Standard Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">my browser is barely usable for ~2 days</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed Nov 08 2023 05:21:14 GMT-0800 (Pacific Standard Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">I can't repro since restarting...</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed Nov 08 2023 05:21:29 GMT-0800 (Pacific Standard Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">restarting what?</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed Nov 08 2023 05:21:32 GMT-0800 (Pacific Standard Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">smaug</span> said a CC log from <code>about:memory</code> could help him</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Nov 08 2023 05:21:44 GMT-0800 (Pacific Standard Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">restarting the browser</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Nov 08 2023 05:21:57 GMT-0800 (Pacific Standard Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">let's hope</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Nov 08 2023 05:22:06 GMT-0800 (Pacific Standard Time)">13:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">last time I tried to get a cc log my browser crashed</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Nov 08 2023 05:22:32 GMT-0800 (Pacific Standard Time)">13:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">how do I capture a CC log ? I dont see such button</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Nov 08 2023 05:22:46 GMT-0800 (Pacific Standard Time)">13:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">save gc and cc ?</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Nov 08 2023 05:25:08 GMT-0800 (Pacific Standard Time)">13:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">Looping on that for now</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Nov 08 2023 05:25:14 GMT-0800 (Pacific Standard Time)">13:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">Crashed</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Nov 08 2023 05:25:16 GMT-0800 (Pacific Standard Time)">13:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">yeah that's a bit expected</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed Nov 08 2023 05:25:19 GMT-0800 (Pacific Standard Time)">13:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">this is not</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Wed Nov 08 2023 05:26:24 GMT-0800 (Pacific Standard Time)">13:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell"><a href="https://crash-stats.mozilla.org/report/index/6c18dd8a-899e-4730-88af-b4e090231108">https://crash-stats.mozilla.org/report/index/6c18dd8a-899e-4730-88af-b4e090231108</a></td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Wed Nov 08 2023 05:26:27 GMT-0800 (Pacific Standard Time)">13:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">wayland lost ?!</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Wed Nov 08 2023 05:28:02 GMT-0800 (Pacific Standard Time)">13:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">so no log</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Wed Nov 08 2023 05:28:04 GMT-0800 (Pacific Standard Time)">13:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">sorry.</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Wed Nov 08 2023 05:30:35 GMT-0800 (Pacific Standard Time)">13:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">I'm being told it could be because of how badly the browser was blocked and wayland severed the connection</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Wed Nov 08 2023 05:42:23 GMT-0800 (Pacific Standard Time)">13:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">FWIW, disabling LCP fixed it for me, on Twitter.</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Wed Nov 08 2023 05:46:20 GMT-0800 (Pacific Standard Time)">13:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">ah it's happening again for me</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Wed Nov 08 2023 05:50:23 GMT-0800 (Pacific Standard Time)">13:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> ah it's happening again for me</blockquote></mx-reply>That's with LCP disabled?</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Wed Nov 08 2023 05:50:37 GMT-0800 (Pacific Standard Time)">13:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">no I kept it enabled to get a CC log to help diagnosing</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Wed Nov 08 2023 05:50:57 GMT-0800 (Pacific Standard Time)">13:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">but I took 1h30 to happen again after restarting the browser</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Wed Nov 08 2023 05:51:57 GMT-0800 (Pacific Standard Time)">13:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">the cc log is ~440MB uncompressed, is that something workable ?</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Wed Nov 08 2023 05:54:10 GMT-0800 (Pacific Standard Time)">13:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">We should probably also take this discussion to <a href="https://matrix.to/#/#dom:mozilla.org">#dom:mozilla.org</a> . üòÑ</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Wed Nov 08 2023 07:20:40 GMT-0800 (Pacific Standard Time)">15:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">hello, just a question, once a ./mach build has finished, i see the binary is located at obj-x86_64-pc-linux-gnu/dist/bin/ but how to generate a final .deb packages ?</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Wed Nov 08 2023 07:21:46 GMT-0800 (Pacific Standard Time)">15:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">also for js, is it disable by default ? when i built the browser without adding MOZCONFIG then i run jit-test, is says that bin/js is not executable ü§∑‚Äç‚ôÇÔ∏è any ideas ? thanks ! </td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Wed Nov 08 2023 07:22:04 GMT-0800 (Pacific Standard Time)">15:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">new in browser hacking sorry ! üòõ</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Wed Nov 08 2023 07:27:29 GMT-0800 (Pacific Standard Time)">15:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">a tarball can be generated by <code>./mach package</code>, but I don't think <code>.deb</code> package is part of mozilla-central</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Wed Nov 08 2023 07:27:55 GMT-0800 (Pacific Standard Time)">15:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">and yes, js shell isn't built if you don't have mozconfig</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Wed Nov 08 2023 07:27:57 GMT-0800 (Pacific Standard Time)">15:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><a href="https://firefox-source-docs.mozilla.org/js/build.html">https://firefox-source-docs.mozilla.org/js/build.html</a></td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Wed Nov 08 2023 07:28:45 GMT-0800 (Pacific Standard Time)">15:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">you need to either use <code>ac_add_options --enable-project=js</code> to build only JS shell, or <code>ac_add_options --enable-js-shell</code> to build JS shell along with browser</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Wed Nov 08 2023 07:37:04 GMT-0800 (Pacific Standard Time)">15:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">thanks fellas! </td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Wed Nov 08 2023 07:41:15 GMT-0800 (Pacific Standard Time)">15:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">one last questions ^^ where can i find in the code where native builtins API call are called from JS, i mean after the IonMonkey and interpreter where a native function is called ? </td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Wed Nov 08 2023 07:44:40 GMT-0800 (Pacific Standard Time)">15:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p>in interpreter, function call is <code>JSOp::Call</code> and its variants, which is handed here <a href="https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/vm/Interpreter.cpp#2992,3053">https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/vm/Interpreter.cpp#2992,3053</a></p>
<pre><code class="language-cpp">CASE(Call)
...
      if (!CallFromStack(cx, args, reason)) {
</code></pre>
</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Wed Nov 08 2023 07:45:09 GMT-0800 (Pacific Standard Time)">15:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p>that goes here <a href="https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/vm/Interpreter.cpp#566">https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/vm/Interpreter.cpp#566</a></p>
<pre><code class="language-cpp">return CallJSNative(cx, native, reason, args);
</code></pre>
</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Wed Nov 08 2023 07:45:52 GMT-0800 (Pacific Standard Time)">15:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p>and this line calls the actual native function <a href="https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/vm/Interpreter.cpp#472">https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/vm/Interpreter.cpp#472</a></p>
<pre><code class="language-cpp">bool ok = native(cx, args.length(), args.base());
</code></pre>
</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Wed Nov 08 2023 07:48:33 GMT-0800 (Pacific Standard Time)">15:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">thank you ! </td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Wed Nov 08 2023 07:48:39 GMT-0800 (Pacific Standard Time)">15:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p>with JIT, it depends on the layer, but warp builder handles the JSOp::Call here <a href="https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/jit/WarpBuilder.cpp#1795">https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/jit/WarpBuilder.cpp#1795</a></p>
<pre><code class="language-cpp">bool WarpBuilder::build_Call(BytecodeLocation loc) { return buildCallOp(loc); }
</code></pre>
</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Wed Nov 08 2023 08:09:35 GMT-0800 (Pacific Standard Time)">16:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-11">fncf0x</span>: At a low level, we have two ways to call from JIT code into C++ code (for builtins implemented in C++, or anything else). If we know that the C++ code can't trigger a garbage collection, we can call using <a href="https://searchfox.org/mozilla-central/search?path=&amp;q=macroassembler%3A%3Acallwithabi">MacroAssembler::callWithABI</a>, which generates code to call the C++ function using the platform ABI. Otherwise, we do a VM call, which calls a wrapper trampoline (<a href="https://searchfox.org/mozilla-central/source/js/src/jit/x64/Trampoline-x64.cpp#656">here</a> is the code that generates the wrapper on x86-64) that does some bookkeeping to make it safe to GC before calling the target.</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Wed Nov 08 2023 08:13:20 GMT-0800 (Pacific Standard Time)">16:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-11">fncf0x</span>: At a low level, we have two ways to call from JIT code into C++ code (for builtins implemented in C++, or anything else). If we know that the C++ code can't trigger a garbage collection, we can call using <a href="https://searchfox.org/mozilla-central/search?path=&amp;q=macroassembler%3A%3Acallwithabi">MacroAssembler::callWithABI</a>, which generates code to call the C++ function using the platform ABI. Otherwise, we do a VM call, which calls a wrapper trampoline (<a href="https://searchfox.org/mozilla-central/source/js/src/jit/x64/Trampoline-x64.cpp#656">here</a> is the code that generates the wrapper on x86-64) that does some bookkeeping to make it safe to GC before calling the target.</blockquote></mx-reply>alright am not going that deep for the moment, it's just for debug purpose and to understand stuff, i will come to ABI later lol, thanks a lot !</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Wed Nov 08 2023 08:46:35 GMT-0800 (Pacific Standard Time)">16:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">hello again üòì i just added <code>std::cout &lt;&lt; "check" &lt;&lt; std::endl;</code> before the <code>bool ok = native(cx, args.length(), args.base());</code> in Interpreter.cpp line 474 but after compiled in the stdout i see no print, i added</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Wed Nov 08 2023 08:47:47 GMT-0800 (Pacific Standard Time)">16:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">here is my mozconfig </td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Wed Nov 08 2023 08:48:03 GMT-0800 (Pacific Standard Time)">16:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">what is the JS code you're running?</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Wed Nov 08 2023 08:48:29 GMT-0800 (Pacific Standard Time)">16:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">visiting random websites like google ...etc</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Wed Nov 08 2023 08:49:03 GMT-0800 (Pacific Standard Time)">16:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">using this to</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Wed Nov 08 2023 08:49:04 GMT-0800 (Pacific Standard Time)">16:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell"><a href="https://abrahamjuliot.github.io/creepjs/">https://abrahamjuliot.github.io/creepjs/</a></td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Wed Nov 08 2023 08:50:32 GMT-0800 (Pacific Standard Time)">16:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">if you use <code>--enable-project=js</code> you're only building the JS shell, not the browser</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Wed Nov 08 2023 08:51:22 GMT-0800 (Pacific Standard Time)">16:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">but when i don't use this i have no error on build, like it is not compiling Interpreter.cpp when removing it ,</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Wed Nov 08 2023 08:52:25 GMT-0800 (Pacific Standard Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">i mean i tried a syntax error to check (removed semicolon ";"  ) and removed the  --enable-project=js and it build successfully so i guess removing it doen't compile it ü§∑sorry am still newbi  </td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Wed Nov 08 2023 08:54:40 GMT-0800 (Pacific Standard Time)">16:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">hm weird. Without the <code>--enable-project=js</code> it should do a browser build and that includes Interpreter.cpp</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Wed Nov 08 2023 08:55:54 GMT-0800 (Pacific Standard Time)">16:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is it still compiling successfully with syntax error right now?</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Wed Nov 08 2023 08:56:32 GMT-0800 (Pacific Standard Time)">16:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if so, what exact command do you run, and what's the output? can you post them to <a href="https://paste.mozilla.org/">https://paste.mozilla.org/</a>   ?</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Wed Nov 08 2023 08:59:44 GMT-0800 (Pacific Standard Time)">16:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">after you pasted there, please post the URL of your paste here, so that others can see it</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Wed Nov 08 2023 09:00:09 GMT-0800 (Pacific Standard Time)">17:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">okey, sure !</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Wed Nov 08 2023 09:06:27 GMT-0800 (Pacific Standard Time)">17:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">lol nevermind, double-checked seems the problem was in the CKI ^^' </td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Wed Nov 08 2023 09:06:31 GMT-0800 (Pacific Standard Time)">17:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">thanks ! :p </td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Wed Nov 08 2023 09:50:14 GMT-0800 (Pacific Standard Time)">17:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">sorry am asking a lot of questions, you can tell me to stfu if it's too much lol, what is the best way to print basic infos on that part of the code <a href="https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/vm/Interpreter.cpp#472">https://searchfox.org/mozilla-central/rev/02841791400cf7cf5760c0cfaf31f5d772624253/js/src/vm/Interpreter.cpp#472</a>

1bool ok = native(cx, args.length(), args.base());
</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Wed Nov 08 2023 09:50:37 GMT-0800 (Pacific Standard Time)">17:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">like nativefunction name, args and return value</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Wed Nov 08 2023 09:51:51 GMT-0800 (Pacific Standard Time)">17:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-11" title="@fncf0x:mozilla.org">fncf0x</span>&gt;</div></td><td class="msg-cell">covering most cases is enough, not covering every single cx ^^'</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Wed Nov 08 2023 10:13:57 GMT-0800 (Pacific Standard Time)">18:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gerard-majax:mozilla.org">gerard-majax</span>&gt;</div></td><td class="msg-cell">I've disabled <code>dom.enable_largest_contentful_paint</code> and no issue</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Wed Nov 08 2023 10:46:29 GMT-0800 (Pacific Standard Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@kfjvj:mozilla.org">kfjvj</span>&gt;</div></td><td class="msg-cell">Does anyone know what information can be extracted form a JSScript ?

I see the type JSScript* used in various function definitions, but I'm not sure how it's supposed to be used.</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Wed Nov 08 2023 12:03:01 GMT-0800 (Pacific Standard Time)">20:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Does anyone know what information can be extracted form a JSScript ?<br><br>I see the type JSScript* used in various function definitions, but I'm not sure how it's supposed to be used.</blockquote></mx-reply>Might be worth experimenting with <a href="https://searchfox.org/mozilla-central/source/js/src/util/DumpFunctions.cpp#214">https://searchfox.org/mozilla-central/source/js/src/util/DumpFunctions.cpp#214</a></td></tr>

</tbody></table></div></div></div>
</body></html>