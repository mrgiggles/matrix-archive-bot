<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2021-06-09</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2021-06-09<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-06-08" class="nav-link"><span>prev</span></a>
<a href="2021-06-10" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Jun 08 2021 17:06:35 GMT-0700 (Pacific Daylight Time)">00:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Hm, I'm not sure how to implement <code>JSObject::maybeUnwrapIf</code> as a non-templatized <code>detail</code> function, overloaded or not.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Jun 08 2021 17:09:20 GMT-0700 (Pacific Daylight Time)">00:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell">What's wrong with it now?  What are you trying to do?  Doesn't look like that function should be changed from what it is now, at least in my tree (declared inline in the template class, defined out of line, as <code>inline</code>, in the same header).</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Jun 08 2021 17:12:13 GMT-0700 (Pacific Daylight Time)">00:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><code>JSObject::maybeUnwrapIf</code> is just fine as it is. I have a <code>class JS::TypedArray&lt;T&gt; { TypedArray&lt;T&gt; unwrap(JSObject*); }</code> that I'm trying to implement.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Jun 08 2021 17:12:32 GMT-0700 (Pacific Daylight Time)">00:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">previously, it was implemented in a .cpp file, so could happily use <code>maybeUnwrapIf</code>.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Jun 08 2021 17:13:10 GMT-0700 (Pacific Daylight Time)">00:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell">And that <code>JS::TypedArray&lt;T&gt;::unwrap</code> is supposed to be a public API function?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Jun 08 2021 17:13:18 GMT-0700 (Pacific Daylight Time)">00:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">yes</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Jun 08 2021 17:13:37 GMT-0700 (Pacific Daylight Time)">00:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I suppose I could macro-generate <code>js::detail::MaybeUnwrapIfInt8Array(JSObject*)</code> etc.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Jun 08 2021 17:14:00 GMT-0700 (Pacific Daylight Time)">00:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh wait, no, then I couldn't call them from the templatized definition, duh.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Jun 08 2021 17:14:49 GMT-0700 (Pacific Daylight Time)">00:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Hm.... <code>js::detail::MaybeUnwrapIf(JSObject*, MyArrayType*)</code> overloads?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Jun 08 2021 17:15:02 GMT-0700 (Pacific Daylight Time)">00:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(where I pass in a casted <code>nullptr</code> as the 2nd param)</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Jun 08 2021 17:16:04 GMT-0700 (Pacific Daylight Time)">00:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell">You can have a <code>namespace detail { template&lt;typename T&gt; class Unwrapper; template&lt;&gt; class Unwrapper&lt;uint8_t&gt; { ... }; ... }</code> and so on, to handle the various element types.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Jun 08 2021 17:16:46 GMT-0700 (Pacific Daylight Time)">00:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell">Then call <code>JS::TypedArray&lt;T&gt;* detail::Unwrapper&lt;T&gt;::unwrapIf(JSObject*)</code> or so.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Jun 08 2021 17:17:44 GMT-0700 (Pacific Daylight Time)">00:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">how do I implement <code>Unwrapper::unwrapIf</code> in the header, when it needs to know things like the full definition of <code>TypedArrayObject</code> that isn't public?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Jun 08 2021 17:20:34 GMT-0700 (Pacific Daylight Time)">00:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell">Define inline standalone functions that don't need the full definition?  The various class pointers are public JSAPI, if in detail.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Jun 08 2021 17:21:56 GMT-0700 (Pacific Daylight Time)">00:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><code>is&lt;TypedArrayObject&gt;</code> needs to get the <code>JSClass*</code> from it, not just to know the class pointer.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Jun 08 2021 17:22:11 GMT-0700 (Pacific Daylight Time)">00:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(I feel like I'm missing something obvious you're trying to convey here.)</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Jun 08 2021 17:22:31 GMT-0700 (Pacific Daylight Time)">00:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell">There are shadow functions to get the <code>JSClass*</code> of an object, I'm pretty sure.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Jun 08 2021 17:23:00 GMT-0700 (Pacific Daylight Time)">00:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell">Or did I not move them from <code>jsfriendapi.h</code> yet</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Jun 08 2021 17:23:01 GMT-0700 (Pacific Daylight Time)">00:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh, true. So reimplement using public stuff.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Jun 08 2021 17:23:10 GMT-0700 (Pacific Daylight Time)">00:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I guess I can see if that's possible.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Jun 08 2021 17:23:23 GMT-0700 (Pacific Daylight Time)">00:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell"><code>#include "js/Object.h"           // JS::GetClass</code></td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Jun 08 2021 17:25:05 GMT-0700 (Pacific Daylight Time)">00:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">ooh boy, it <a href="https://searchfox.org/mozilla-central/rev/c0f286b1f541c675bbe052b21bdefa80d150ec35/js/src/vm/TypedArrayObject.h#194-195">compares against a set of classes</a></td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Jun 08 2021 17:25:34 GMT-0700 (Pacific Daylight Time)">00:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I guess I can expose an API just for typed arrays</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Jun 08 2021 17:25:43 GMT-0700 (Pacific Daylight Time)">00:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">there probably already is one</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Jun 08 2021 17:26:45 GMT-0700 (Pacific Daylight Time)">00:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">yep, <code>JS_IsTypedArrayObject</code></td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Jun 08 2021 17:26:55 GMT-0700 (Pacific Daylight Time)">00:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh wait, but I don't want that; I only want a single class at a time</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Jun 08 2021 17:26:57 GMT-0700 (Pacific Daylight Time)">00:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">never mind</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Jun 08 2021 17:28:00 GMT-0700 (Pacific Daylight Time)">00:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh yuck, the existing code first tests against all the different typed array classes, then tests against the one you actually want</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Jun 08 2021 17:28:04 GMT-0700 (Pacific Daylight Time)">00:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@waldo:mozilla.org">Waldo</span>&gt;</div></td><td class="msg-cell"><code>JS::GetClass(obj) == js::detail::Int8ArrayClassPtr</code> and so on</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Jun 08 2021 17:28:08 GMT-0700 (Pacific Daylight Time)">00:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">right</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Jun 08 2021 17:30:06 GMT-0700 (Pacific Daylight Time)">00:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh man, I have commented-out code that's much, much closer to the right thing than the stuff I've been trying to get to work</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Jun 08 2021 22:34:29 GMT-0700 (Pacific Daylight Time)">05:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">hi everyone,

I have build spiderMonkey(esr78) in windows by following the steps mentioned in official documentation. For more info regarding build process see this link, <a href="https://firefox-source-docs.mozilla.org/setup/windows_build.html#building-firefox-on-windows">https://firefox-source-docs.mozilla.org/setup/windows_build.html#building-firefox-on-windows</a>
When I'm trying to build my testapp.cpp using spiderMonkey in visual studio 2019,it's giving compilation error from GCPolicyAPI.h(line:70) whenever I'm adding jsapi.h in my program.

Error: error C2338: Pointer type not allowed for StructGCPolicy

If I remove "jsapi.h" the program compiles and runs fine.

// testapp.cpp:

#include &lt;jsapi.h&gt;
#include &lt;js/Initialization.h&gt;
int main(void) {
	if (!JS_Init()) return 1;
	JS_ShutDown();
	return 0;
}

[Note: preprocessor used: STATIC_JS_API in project properties]

Can anyone please help me on this, what's wrong I'm doing here?</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Jun 08 2021 22:36:42 GMT-0700 (Pacific Daylight Time)">05:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">sudipto64</span>: can you pastebin the entire error message to <a href="https://paste.mozilla.org/">https://paste.mozilla.org/</a> ?  I think it has some more context about the error</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Jun 08 2021 22:37:27 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">okay ..</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Jun 08 2021 22:37:27 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">err, maybe it's bug 1679736</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Jun 08 2021 22:37:28 GMT-0700 (Pacific Daylight Time)">05:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1679736">https://bugzil.la/1679736</a> — RESOLVED (sfink) — Visual Studio 2017 fails to compile SM headers because of StructGCPolicy static assert</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Jun 08 2021 22:40:00 GMT-0700 (Pacific Daylight Time)">05:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if that's the case, you'll need to use version 85 or newer</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Jun 08 2021 22:40:23 GMT-0700 (Pacific Daylight Time)">05:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">current mozilla-release, mozilla-beta, or mozilla-central, instead of esr</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Jun 08 2021 22:40:30 GMT-0700 (Pacific Daylight Time)">05:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">i have tried with 90 ..but i'm getting same error..</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Jun 08 2021 22:43:39 GMT-0700 (Pacific Daylight Time)">05:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">okay, then I'll wait for the error message</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Jun 08 2021 22:44:24 GMT-0700 (Pacific Daylight Time)">05:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">you want the visual studio error message or anything else ..?</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Jun 08 2021 22:44:41 GMT-0700 (Pacific Daylight Time)">05:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">the error you got for the above code</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Jun 08 2021 22:45:08 GMT-0700 (Pacific Daylight Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is "Error: error C2338: Pointer type not allowed for StructGCPolicy" the entire output, or is there some more?</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Jun 08 2021 22:45:45 GMT-0700 (Pacific Daylight Time)">05:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I expect there's some more context about how and where <code>StructGCPolicy</code> is instantiated</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Jun 08 2021 22:46:40 GMT-0700 (Pacific Daylight Time)">05:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">GCPolicyAPI.h(70,23): error C2338: Pointer type not allowed for StructGCPolicy</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Jun 08 2021 22:46:48 GMT-0700 (Pacific Daylight Time)">05:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">this error i got ..</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Jun 08 2021 22:47:05 GMT-0700 (Pacific Daylight Time)">05:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">only one line?</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Jun 08 2021 22:48:23 GMT-0700 (Pacific Daylight Time)">05:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">GCPolicyAPI.h(89): message : see reference to class template instantiation 'JS::StructGCPolicy&lt;T&gt;' being compiled

RootingAPI.h(896)message : see reference to class template instantiation 'JS::GCPolicy&lt;T&gt;' being compiled</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Jun 08 2021 22:48:36 GMT-0700 (Pacific Daylight Time)">05:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">along with these message</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Jun 08 2021 22:49:29 GMT-0700 (Pacific Daylight Time)">05:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">which version or revision are you on?</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Jun 08 2021 22:49:44 GMT-0700 (Pacific Daylight Time)">05:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I'll check what the RootingAPI.h line 896 is</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Jun 08 2021 22:50:31 GMT-0700 (Pacific Daylight Time)">05:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">esr78 i'm using ..</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Jun 08 2021 22:51:57 GMT-0700 (Pacific Daylight Time)">05:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">hmm, I guess, the above context isn't complete.  it's still inside <code>RootedTraceable</code> template</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Jun 08 2021 22:52:48 GMT-0700 (Pacific Daylight Time)">05:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">what solution u suggest regarding this ..?</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Jun 08 2021 22:53:37 GMT-0700 (Pacific Daylight Time)">05:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">figure out how to get complete error message and context from visual studio compilation error, maybe?</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Jun 08 2021 22:54:05 GMT-0700 (Pacific Daylight Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">also, given above bug, it would be better using 90 or 91 instead, before starting investigating issue</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Jun 08 2021 22:55:08 GMT-0700 (Pacific Daylight Time)">05:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">actually first i got this error in 90 ..so i rollback to es78 to check this ..</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Jun 08 2021 22:56:12 GMT-0700 (Pacific Daylight Time)">05:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">can you try with 90 again, and look into error message to see how and where the template is instantiated?</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Tue Jun 08 2021 22:59:09 GMT-0700 (Pacific Daylight Time)">05:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">error message is identical with 90 ..</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Tue Jun 08 2021 22:59:59 GMT-0700 (Pacific Daylight Time)">05:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">which part?</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Tue Jun 08 2021 23:00:34 GMT-0700 (Pacific Daylight Time)">06:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">including line numbers in the above "see references to ..." messages</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Tue Jun 08 2021 23:01:00 GMT-0700 (Pacific Daylight Time)">06:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">yes ...same as above..</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Tue Jun 08 2021 23:01:51 GMT-0700 (Pacific Daylight Time)">06:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">btw, how do you retrieve "90" ?  did you clone mercurial repository and update to certain bookmark?</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Tue Jun 08 2021 23:03:14 GMT-0700 (Pacific Daylight Time)">06:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if it's mozilla-beta (current 90), the line number should be different from mozilla-esr78</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Tue Jun 08 2021 23:03:44 GMT-0700 (Pacific Daylight Time)">06:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">i have followed the build process as described in build documentation..this way i get 90 ..  </td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Tue Jun 08 2021 23:04:11 GMT-0700 (Pacific Daylight Time)">06:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">then i did.. hg update esr78 to get esr78 ..</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Tue Jun 08 2021 23:04:49 GMT-0700 (Pacific Daylight Time)">06:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">okay, then how did you go back to 90 now?</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Tue Jun 08 2021 23:05:19 GMT-0700 (Pacific Daylight Time)">06:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">i have one backup of 90 ..</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Tue Jun 08 2021 23:05:31 GMT-0700 (Pacific Daylight Time)">06:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">which i used ..</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Tue Jun 08 2021 23:05:37 GMT-0700 (Pacific Daylight Time)">06:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what do you mean by backup ?</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Tue Jun 08 2021 23:06:13 GMT-0700 (Pacific Daylight Time)">06:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">before doing hg update esr78 ..i have backup old folder ..</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Tue Jun 08 2021 23:06:32 GMT-0700 (Pacific Daylight Time)">06:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">which directory?</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Tue Jun 08 2021 23:07:02 GMT-0700 (Pacific Daylight Time)">06:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">mozilla-unified</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Tue Jun 08 2021 23:07:26 GMT-0700 (Pacific Daylight Time)">06:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">okay, then, can you run <code>hg parent</code> there and pastebin the output?</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Tue Jun 08 2021 23:07:56 GMT-0700 (Pacific Daylight Time)">06:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">okay ..let me do this ..</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Tue Jun 08 2021 23:15:10 GMT-0700 (Pacific Daylight Time)">06:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">once you posted the output to <a href="https://paste.mozilla.org/">https://paste.mozilla.org/</a> , please post the URL for the paste here</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Tue Jun 08 2021 23:15:41 GMT-0700 (Pacific Daylight Time)">06:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">ok fine..</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Tue Jun 08 2021 23:17:55 GMT-0700 (Pacific Daylight Time)">06:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">it seems i told u wrong about error message for 90 ..i was using esr78 ..let me verify this with 90 also..</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Wed Jun 09 2021 02:20:11 GMT-0700 (Pacific Daylight Time)">09:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">arai</span>: hi ..please find the output from this link <a href="https://paste.mozilla.org/uD1Xznfm">https://paste.mozilla.org/uD1Xznfm</a></td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Wed Jun 09 2021 02:24:34 GMT-0700 (Pacific Daylight Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">and this link <a href="https://paste.mozilla.org/Lbr1XFnd">https://paste.mozilla.org/Lbr1XFnd</a> contains error log which i got at time of build my program with 90 ..</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Wed Jun 09 2021 02:50:41 GMT-0700 (Pacific Daylight Time)">09:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">will check once I get home</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Wed Jun 09 2021 03:15:14 GMT-0700 (Pacific Daylight Time)">10:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">ok fine..</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Wed Jun 09 2021 03:26:07 GMT-0700 (Pacific Daylight Time)">10:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: Shoud <a href="https://discourse.mozilla.org/t/compilation-error-with-jsapi-h-in-vs19-with-esr78/81380/2">https://discourse.mozilla.org/t/compilation-error-with-jsapi-h-in-vs19-with-esr78/81380/2</a> be fixed in SpiderMonkey?</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Wed Jun 09 2021 03:52:11 GMT-0700 (Pacific Daylight Time)">10:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">nbp</span>: I'm not sure what's going on here. Our docs say that MSVC cannot be used to build the mozilla codebase since 67.  Should we still support it for building SpiderMonkey?</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Wed Jun 09 2021 03:58:21 GMT-0700 (Pacific Daylight Time)">10:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">(I don't understand what's going on with MSVC and why it's trying to instantiate GCPolicy&lt;void*&gt; either.  This should be a compile error and it seems a bit dubious to work round it like this.)</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Wed Jun 09 2021 04:06:28 GMT-0700 (Pacific Daylight Time)">11:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">afaik they're not building SM with MSVC, but embedding it in an application that does, so just our public headers </td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Wed Jun 09 2021 04:43:13 GMT-0700 (Pacific Daylight Time)">11:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">looks like, clang instantiate <code>RootedTraceable&lt;JS::detail::RootListEntry*&gt;</code> without <code>RootedTraceable&lt;JS::detail::RootListEntry*&gt;::trace</code>, but MSVC instantiate both?   <a href="https://searchfox.org/mozilla-central/rev/79d73b4aff88dd4a0f06dd3789e1148c49b0de60/js/public/RootingAPI.h#885-901">https://searchfox.org/mozilla-central/rev/79d73b4aff88dd4a0f06dd3789e1148c49b0de60/js/public/RootingAPI.h#885-901</a></td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Wed Jun 09 2021 04:54:49 GMT-0700 (Pacific Daylight Time)">11:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">err, maybe it's more complicate</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Wed Jun 09 2021 05:27:47 GMT-0700 (Pacific Daylight Time)">12:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">looks like... static_assert in unused method (and template instantiation inside it?) etc can be skipped if the condition contains template parameter, but there's some difference between clang and MSVC ?</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Wed Jun 09 2021 05:34:15 GMT-0700 (Pacific Daylight Time)">12:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">how do we expect this assertion not hit for <code>JS::details::RootListEntry*</code> in the first place?  <a href="https://searchfox.org/mozilla-central/rev/79d73b4aff88dd4a0f06dd3789e1148c49b0de60/js/public/GCPolicyAPI.h#70-71">https://searchfox.org/mozilla-central/rev/79d73b4aff88dd4a0f06dd3789e1148c49b0de60/js/public/GCPolicyAPI.h#70-71</a></td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Wed Jun 09 2021 05:35:04 GMT-0700 (Pacific Daylight Time)">12:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: ^</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Wed Jun 09 2021 05:50:19 GMT-0700 (Pacific Daylight Time)">12:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">arai</span>: I think the compiler doesn't instantiate Rooted&lt;RootListEntry*&gt; until it's used, and we only create pointers too it.  However the rules around template instantiation are complicated and I don't understand this fully.</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Wed Jun 09 2021 05:54:17 GMT-0700 (Pacific Daylight Time)">12:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I see. thanks :)  I'll try investigating it some more</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Wed Jun 09 2021 06:00:56 GMT-0700 (Pacific Daylight Time)">13:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">arai</span>: I've filed bug 1715538 for this.</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Wed Jun 09 2021 06:00:57 GMT-0700 (Pacific Daylight Time)">13:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1715538">https://bugzil.la/1715538</a> — NEW (nobody) — Error compiling rooting headers with MSVC</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Wed Jun 09 2021 06:01:08 GMT-0700 (Pacific Daylight Time)">13:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">thank you!</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Wed Jun 09 2021 06:06:20 GMT-0700 (Pacific Daylight Time)">13:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">fyi..with esr78 workaround given in this link: <a href="https://gitlab.gnome.org/GNOME/gjs/-/commit/60ae77b1d49e344a8b8e2b2a3c184e7d7f72676f">https://gitlab.gnome.org/GNOME/gjs/-/commit/60ae77b1d49e344a8b8e2b2a3c184e7d7f72676f</a> 
working fine.. but with 90 its not working..</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Wed Jun 09 2021 06:15:03 GMT-0700 (Pacific Daylight Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">for 90, you need to define the workaround specialization for <code>JS::detail::RootListEntry*</code> instead of <code>void*</code></td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Wed Jun 09 2021 06:41:38 GMT-0700 (Pacific Daylight Time)">13:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sudipto64:mozilla.org">sudipto64</span>&gt;</div></td><td class="msg-cell">thank you!! ..it's worked </td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Wed Jun 09 2021 06:47:11 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">arai</span>: if you have access to the discourse, can you reply there too?</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Wed Jun 09 2021 06:51:59 GMT-0700 (Pacific Daylight Time)">13:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">replied</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Wed Jun 09 2021 06:55:29 GMT-0700 (Pacific Daylight Time)">13:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">ty</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Wed Jun 09 2021 07:59:32 GMT-0700 (Pacific Daylight Time)">14:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">hmm, indeed, it looks like compiler bug or some such.  I'm trying to create a minimal testcase, and the error happens in very specific case (removing parameter, or removing inheritance, etc stops the error)</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Wed Jun 09 2021 08:00:25 GMT-0700 (Pacific Daylight Time)">15:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">current testcase <a href="https://paste.mozilla.org/bdyp9LPn">https://paste.mozilla.org/bdyp9LPn</a></td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Wed Jun 09 2021 08:01:01 GMT-0700 (Pacific Daylight Time)">15:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">there would be some more space to minimize</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Wed Jun 09 2021 08:01:51 GMT-0700 (Pacific Daylight Time)">15:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">removing <code>VirtualTraceable</code> inheritance stops.  removing <code>JSContext*</code> parameter from<code>Rooted</code> stops</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Wed Jun 09 2021 08:28:09 GMT-0700 (Pacific Daylight Time)">15:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">posted minimal testcase on bug 1715538</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Wed Jun 09 2021 08:28:11 GMT-0700 (Pacific Daylight Time)">15:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1715538">https://bugzil.la/1715538</a> — NEW (nobody) — Error compiling rooting headers with MSVC</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Wed Jun 09 2021 08:38:36 GMT-0700 (Pacific Daylight Time)">15:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, unless it's some kind of UB (not sure), adding the specialization would be the simplest workaround</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Wed Jun 09 2021 08:49:14 GMT-0700 (Pacific Daylight Time)">15:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: ping</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Wed Jun 09 2021 09:32:10 GMT-0700 (Pacific Daylight Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: I looked at bug 1714532. Patch is in your queue.</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Wed Jun 09 2021 09:32:12 GMT-0700 (Pacific Daylight Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1714532">https://bugzil.la/1714532</a> — ASSIGNED (sfink) — Assertion failure: isIncremental, at gc/GC.cpp:6976 with OOM</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Wed Jun 09 2021 09:33:09 GMT-0700 (Pacific Daylight Time)">16:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: that was quick, thanks!</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Wed Jun 09 2021 09:51:42 GMT-0700 (Pacific Daylight Time)">16:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: hazard builds are broken on my autoland push - any idea what this means? <a href="https://treeherder.mozilla.org/logviewer?job_id=342283352&amp;repo=autoland&amp;lineNumber=12381">https://treeherder.mozilla.org/logviewer?job_id=342283352&amp;repo=autoland&amp;lineNumber=12381</a></td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Wed Jun 09 2021 09:52:52 GMT-0700 (Pacific Daylight Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">ugh, it's a crash in the plugin.</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Wed Jun 09 2021 09:53:06 GMT-0700 (Pacific Daylight Time)">16:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><a href="https://treeherder.mozilla.org/logviewer?job_id=342283352&amp;repo=autoland&amp;lineNumber=12019">https://treeherder.mozilla.org/logviewer?job_id=342283352&amp;repo=autoland&amp;lineNumber=12019</a></td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Wed Jun 09 2021 09:53:54 GMT-0700 (Pacific Daylight Time)">16:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">hmm, 'internal compiler error' doesn't look good </td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Wed Jun 09 2021 09:54:17 GMT-0700 (Pacific Daylight Time)">16:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">something about that destructor is making sixgill unhappy</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Wed Jun 09 2021 09:54:40 GMT-0700 (Pacific Daylight Time)">16:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I can grab your patches from try, I guess</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Wed Jun 09 2021 09:54:53 GMT-0700 (Pacific Daylight Time)">16:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">er, autoland</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Wed Jun 09 2021 09:56:09 GMT-0700 (Pacific Daylight Time)">16:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh right, it's on autoland, which means I already have them. Cool.</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Wed Jun 09 2021 09:57:00 GMT-0700 (Pacific Daylight Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">this is the sort of thing it would be good to have that fancy new build machine for...</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Wed Jun 09 2021 09:57:25 GMT-0700 (Pacific Daylight Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">hah yeah</td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Wed Jun 09 2021 09:58:28 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">hopefully I can just try to compile that one file</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Wed Jun 09 2021 10:10:45 GMT-0700 (Pacific Daylight Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: it looks like it'll take me some time to get to the compile where this happens. But it's in progress. Hopefully I'll have something by tomorrow.</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Wed Jun 09 2021 10:14:40 GMT-0700 (Pacific Daylight Time)">17:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">though I did just manage to reproduce locally</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Wed Jun 09 2021 10:15:03 GMT-0700 (Pacific Daylight Time)">17:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">now to get it with a non-stripped <a href="http://xgill.so">xgill.so</a></td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Wed Jun 09 2021 10:23:07 GMT-0700 (Pacific Daylight Time)">17:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">sfink: ok thanks!  </td></tr>

</tbody></table></div></div></div>
</body></html>