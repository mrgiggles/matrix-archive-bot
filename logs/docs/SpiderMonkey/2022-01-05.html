<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-01-05</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-01-05<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-01-04" class="nav-link"><span>prev</span></a>
<a href="2022-01-06" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Jan 05 2022 01:35:17 GMT-0800 (Pacific Standard Time)">09:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@l11d:mozilla.org">l11d</span>&gt;</div></td><td class="msg-cell">for a jit perspective: is "const c = a + b; const d = c + 1" the same as "const d = a + b + 1", assuming "c" is not used anywhere else? I'm mostly wondering regarding bailouts, e.g. the former statements might require variable c to be recovered for baseline whereas in the compound computation the intermediate computation (a + b) is not stored anywhere and hence might not require recovery?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Jan 05 2022 01:54:24 GMT-0800 (Pacific Standard Time)">09:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">l11d</span>: assuming you're talking about function scope.. yeah there could be differences when it comes to optimizations and bailouts</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Jan 05 2022 02:13:36 GMT-0800 (Pacific Standard Time)">10:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">l11d</span>: in terms of bailout,, if there is no side effect in the addition, then yes both are equivalent, both will resume before the constant declarations, even if the value were computed. Only a branch or side-effect will cause us to allocate a resume-point which might change this behaviour once returning to a lower tier of execution.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Jan 05 2022 02:17:16 GMT-0800 (Pacific Standard Time)">10:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@l11d:mozilla.org">l11d</span>&gt;</div></td><td class="msg-cell">so while it might not make a difference in terms of bailouts, it still might make a difference in terms of optimization? interesting. thanks for your input</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Jan 05 2022 05:11:06 GMT-0800 (Pacific Standard Time)">13:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">even for optimizations, I am not sure this would make a difference. The Dataflow graph would be the same and the constant does not matter in the data-flow graph.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Jan 05 2022 09:28:40 GMT-0800 (Pacific Standard Time)">17:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: I misread Bas's comment in the doc. He was saying the profiler was using a nonstandard feature (expansion of inline functions in the callstacks), not that the profile was of some new feature. Sorry, I think I introduced that confusion when I was talking about it in our meeting just now.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Jan 05 2022 09:40:58 GMT-0800 (Pacific Standard Time)">17:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: ah ok, well we'll find out from Bas what's going on in the next meeting</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Jan 05 2022 14:08:44 GMT-0800 (Pacific Standard Time)">22:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">confession: Cleaned up stream ownership in DOM streams, which I think should be easier to reason about and understand. </td></tr>

</tbody></table></div></div></div>
</body></html>