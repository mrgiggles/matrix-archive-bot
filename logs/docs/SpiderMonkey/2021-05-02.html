<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2021-05-02</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2021-05-02<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-05-01" class="nav-link"><span>prev</span></a>
<a href="2021-05-03" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sun May 02 2021 04:44:19 GMT-0700 (Pacific Daylight Time)">11:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><a href="https://paste.mozilla.org/c0Wc509Y-">https://paste.mozilla.org/c0Wc509Y-</a> this is my error
<a href="https://paste.mozilla.org/63X540TO-this">https://paste.mozilla.org/63X540TO-this</a> is my diff file.
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1576885">https://bugzilla.mozilla.org/show_bug.cgi?id=1576885</a> -this is the bug i m trying to resolve
I m trying to add cache_ field in SharedImmutableString::StringBox,I think the problem is in initialisation of the cache_ field.
 i forward declared struct Inner still it is showing me Incomplete type error.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sun May 02 2021 04:49:53 GMT-0700 (Pacific Daylight Time)">11:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/rev/5744de4a3be08874accc2bfdf4e06f138e53b346/js/src/threading/ExclusiveData.h#84-88">https://searchfox.org/mozilla-central/rev/5744de4a3be08874accc2bfdf4e06f138e53b346/js/src/threading/ExclusiveData.h#84-88</a></td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sun May 02 2021 04:50:33 GMT-0700 (Pacific Daylight Time)">11:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><code>ExclusiveData</code> has a field with <code>T</code> type. it means it requires the actual definition of the <code>T</code></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sun May 02 2021 04:51:44 GMT-0700 (Pacific Daylight Time)">11:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">as the error message says, forward declaration is incomplete</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sun May 02 2021 04:52:08 GMT-0700 (Pacific Daylight Time)">11:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">But i cant have Inner struct defined before StringBox</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sun May 02 2021 04:53:04 GMT-0700 (Pacific Daylight Time)">11:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">Can i know any other way to pass parameter , may be using <code>this</code></td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sun May 02 2021 04:53:53 GMT-0700 (Pacific Daylight Time)">11:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what's the reasoning behind the current diff?  why are you adding the field with that type?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Sun May 02 2021 04:55:15 GMT-0700 (Pacific Daylight Time)">11:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">it was initialised with this value when cache_ pointer was in SharedImmutableString .
I have to remove this pointer from the SharedImmutableString  class to StringBox class.
I tried to create alias name for cache_ as Xcache_ in SharedImmutableString, jus not to break code, using cache_ in StringBox to initilise it and once its initialised properly i ll replace Xache_  with cache_.
Then remove Xcache_ from all places</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Sun May 02 2021 04:58:20 GMT-0700 (Pacific Daylight Time)">11:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">oh, you're trying to move this field?  <a href="https://searchfox.org/mozilla-central/rev/5744de4a3be08874accc2bfdf4e06f138e53b346/js/src/vm/SharedImmutableStringsCache.h#344">https://searchfox.org/mozilla-central/rev/5744de4a3be08874accc2bfdf4e06f138e53b346/js/src/vm/SharedImmutableStringsCache.h#344</a></td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Sun May 02 2021 04:59:59 GMT-0700 (Pacific Daylight Time)">11:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">no !<a href="https://searchfox.org/mozilla-central/source/js/src/vm/SharedImmutableStringsCache.h#361">https://searchfox.org/mozilla-central/source/js/src/vm/SharedImmutableStringsCache.h#361</a>
This one</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Sun May 02 2021 05:01:06 GMT-0700 (Pacific Daylight Time)">12:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I mean, this line <a href="https://paste.mozilla.org/63X540TO#L47">https://paste.mozilla.org/63X540TO#L47</a></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Sun May 02 2021 05:01:17 GMT-0700 (Pacific Daylight Time)">12:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I was wondering where it or its type comes from</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Sun May 02 2021 05:01:42 GMT-0700 (Pacific Daylight Time)">12:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it was initialised with this value when cache_ pointer was in SharedImmutableString .<br>I have to remove this pointer from the SharedImmutableString  class to StringBox class.<br>I tried to create alias name for cache_ as Xcache_ in SharedImmutableString, jus not to break code, using cache_ in StringBox to initilise it and once its initialised properly i ll replace Xache_  with cache_.<br>Then remove Xcache_ from all places</blockquote></mx-reply>.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Sun May 02 2021 05:02:03 GMT-0700 (Pacific Daylight Time)">12:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">I have added new field named cache_ in StringBox class</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Sun May 02 2021 05:04:12 GMT-0700 (Pacific Daylight Time)">12:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I don't get the relation between the above explanation (and the bug comments) and <code>ExclusiveData&lt;Inner&gt;*</code> type in your diff</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Sun May 02 2021 05:04:48 GMT-0700 (Pacific Daylight Time)">12:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">why does the field have that type?</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Sun May 02 2021 05:07:42 GMT-0700 (Pacific Daylight Time)">12:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> why does the field have that type?</blockquote></mx-reply>As before , in SharedImmutableString class it was had <code>ExclusiveData&lt;SharedImmutableStringsCache::Inner&gt;::Guard&amp; locked </code>field type in the constructor</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Sun May 02 2021 05:09:26 GMT-0700 (Pacific Daylight Time)">12:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">ah, thanks :)  the diagram helps much</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Sun May 02 2021 05:09:43 GMT-0700 (Pacific Daylight Time)">12:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">First one is hw the present code is , below is the one hw we want it to be</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Sun May 02 2021 05:11:31 GMT-0700 (Pacific Daylight Time)">12:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">where's <code>Inner</code> ?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Sun May 02 2021 05:13:04 GMT-0700 (Pacific Daylight Time)">12:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">private member of SharedImmutableStringsCache class.
<a href="https://searchfox.org/mozilla-central/source/js/src/vm/SharedImmutableStringsCache.h#330">https://searchfox.org/mozilla-central/source/js/src/vm/SharedImmutableStringsCache.h#330</a></td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Sun May 02 2021 05:14:31 GMT-0700 (Pacific Daylight Time)">12:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p>which do you want,</p>
<pre><code>SharedImmutableStringsCache -&gt; Inner -&gt; StringBox -&gt; Inner
</code></pre>
<p>or</p>
<pre><code>SharedImmutableStringsCache -&gt; Inner -&gt; StringBox -&gt; SharedImmutableStringsCache
</code></pre>
</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Sun May 02 2021 05:15:27 GMT-0700 (Pacific Daylight Time)">12:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"> initialisation routine u mean?</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Sun May 02 2021 05:15:37 GMT-0700 (Pacific Daylight Time)">12:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">no, the pointer graph</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Sun May 02 2021 05:15:46 GMT-0700 (Pacific Daylight Time)">12:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">second one</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Sun May 02 2021 05:16:13 GMT-0700 (Pacific Daylight Time)">12:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">okay, then the field you've added looks having wrong type</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Sun May 02 2021 05:16:36 GMT-0700 (Pacific Daylight Time)">12:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">in the diff, the field is <code>mutable ExclusiveData&lt;Inner&gt;* cache_;</code>, that doesn't point <code>SharedImmutableStringsCache</code></td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Sun May 02 2021 05:17:09 GMT-0700 (Pacific Daylight Time)">12:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><p>i m not pretty much sure.. but my mentor suggested this can also be done</p>
<pre><code>when StringBox::Create is call here for example, you can pass this
Inside SharedImmutableStringsCache::getOrCreate you can access this which should be the cache (or similar), that you can then pass down to StringBox::Create -&gt; StringBox::StringBox
</code></pre>
</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Sun May 02 2021 05:17:58 GMT-0700 (Pacific Daylight Time)">12:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">were you talking in direct message?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Sun May 02 2021 05:18:05 GMT-0700 (Pacific Daylight Time)">12:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">yh day before yesterday</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Sun May 02 2021 05:18:21 GMT-0700 (Pacific Daylight Time)">12:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">i thought today was a weekend holiday so i might not get instant replies. So i thought to ask here</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Sun May 02 2021 05:19:03 GMT-0700 (Pacific Daylight Time)">12:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">the  message above itself doesn't sound related to the field type</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Sun May 02 2021 05:19:48 GMT-0700 (Pacific Daylight Time)">12:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">maybe there were more context that lets you to choose the field type?</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Sun May 02 2021 05:22:26 GMT-0700 (Pacific Daylight Time)">12:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">Field type was decided to be dis, as it was giving incomplete type error before as well.</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Sun May 02 2021 05:23:10 GMT-0700 (Pacific Daylight Time)">12:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">so he suggested the field to type to be Exclusive&lt;Inner&gt; and forward declare the struct</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Sun May 02 2021 05:25:53 GMT-0700 (Pacific Daylight Time)">12:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><pre><code>One thing might be to save your work and try to start from scratch just adding a cache_ field (with same type as the other one, or maybe the Inner stuff we talked about the other day) and see if you can get the StringBox constructor right, but feeding in the correct argument from getOrCreate
</code></pre>
</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Sun May 02 2021 05:26:44 GMT-0700 (Pacific Daylight Time)">12:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">So he told to get constructor crct lik dis , either using forward declare inner or with same type.I tried inner struct </td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Sun May 02 2021 05:27:43 GMT-0700 (Pacific Daylight Time)">12:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">given the current type definition's dependency is "ExclusiveData&lt;Inner&gt; =&gt;  Inner =&gt; StringBox::Ptr =&gt; StringBox", forward declaration alone won't solve</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Sun May 02 2021 05:29:27 GMT-0700 (Pacific Daylight Time)">12:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">Okay!! i ll try with another method then, by using same old type </td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Sun May 02 2021 05:29:43 GMT-0700 (Pacific Daylight Time)">12:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">or maybe it was about forward declaration of something else than <code>Inner</code></td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Sun May 02 2021 05:30:13 GMT-0700 (Pacific Daylight Time)">12:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">No he mentioned about Inner only clearly</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Sun May 02 2021 05:31:14 GMT-0700 (Pacific Daylight Time)">12:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <pre><code>One thing might be to save your work and try to start from scratch just adding a cache_ field (with same type as the other one, or maybe the Inner stuff we talked about the other day) and see if you can get the StringBox constructor right, but feeding in the correct argument from getOrCreate
</code></pre>
</blockquote></mx-reply>what does- ''but feeding in the correct argument from getOrCreate'' mean? here</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Sun May 02 2021 05:32:08 GMT-0700 (Pacific Daylight Time)">12:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/source/js/src/vm/SharedImmutableStringsCache.h#112">https://searchfox.org/mozilla-central/source/js/src/vm/SharedImmutableStringsCache.h#112</a>, there is the declaration of getOrCreate</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Sun May 02 2021 05:37:39 GMT-0700 (Pacific Daylight Time)">12:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><code>StringBox</code> is created inside <code>getOrCreate</code>, right?</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Sun May 02 2021 05:38:03 GMT-0700 (Pacific Daylight Time)">12:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I mean, <code>StringBox</code> constructor is called there?</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Sun May 02 2021 05:39:14 GMT-0700 (Pacific Daylight Time)">12:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/source/js/src/vm/SharedImmutableStringsCache.h#251-">https://searchfox.org/mozilla-central/source/js/src/vm/SharedImmutableStringsCache.h#251-</a> is the place where constructor of StringBox is called</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Sun May 02 2021 05:39:48 GMT-0700 (Pacific Daylight Time)">12:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, <code>StringBox::Create</code> is called by <code>getOrCreate</code>, right?</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Sun May 02 2021 05:40:49 GMT-0700 (Pacific Daylight Time)">12:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">in that case, it sounds like, <code>getOrCreate</code> has either parameter or local variable, that new <code>StringBox</code> constructor wants to receive?</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Sun May 02 2021 05:41:14 GMT-0700 (Pacific Daylight Time)">12:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if so, pass that into <code>StringBox</code> constructor</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Sun May 02 2021 05:42:02 GMT-0700 (Pacific Daylight Time)">12:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so, <code>StringBox::Create</code> is called by <code>getOrCreate</code>, right?</blockquote></mx-reply>yes</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Sun May 02 2021 05:42:32 GMT-0700 (Pacific Daylight Time)">12:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">Okay :)</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Sun May 02 2021 05:51:03 GMT-0700 (Pacific Daylight Time)">12:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">about <code>Inner</code> things, I wonder if you want <code>ExclusiveData&lt;Inner*&gt;</code>, or maybe just <code>Inner*</code> (just a guess tho).  in that way, you don't need the complete definition, and forward declaration works</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Sun May 02 2021 05:53:18 GMT-0700 (Pacific Daylight Time)">12:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">Idid<code> ExclusiveData&lt;Inner*&gt;</code>,  only in my present diff, still i was getting the incomplete tyep error .. was it due to no argument given to getOrCreate?</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Sun May 02 2021 05:54:32 GMT-0700 (Pacific Daylight Time)">12:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if you get incomplete type error, it has nothing to do with function call</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Sun May 02 2021 05:55:18 GMT-0700 (Pacific Daylight Time)">12:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(unless the function call introduces extra template instantiation)</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Sun May 02 2021 05:55:19 GMT-0700 (Pacific Daylight Time)">12:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <a href="https://paste.mozilla.org/c0Wc509Y-">https://paste.mozilla.org/c0Wc509Y-</a> this is my error<br><a href="https://paste.mozilla.org/63X540TO-this">https://paste.mozilla.org/63X540TO-this</a> is my diff file.<br><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1576885">https://bugzilla.mozilla.org/show_bug.cgi?id=1576885</a> -this is the bug i m trying to resolve<br>I m trying to add cache_ field in SharedImmutableString::StringBox,I think the problem is in initialisation of the cache_ field.<br> i forward declared struct Inner still it is showing me Incomplete type error.</blockquote></mx-reply>but here i was getting incomplete type error even after forward declaration of Inner</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Sun May 02 2021 05:56:17 GMT-0700 (Pacific Daylight Time)">12:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yes, <code>ExclusiveData&lt;Inner&gt;</code> requires <code>Inner</code> to be complete</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Sun May 02 2021 05:56:52 GMT-0700 (Pacific Daylight Time)">12:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">forward declaration is often used when the type is referred by pointer.</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Sun May 02 2021 05:57:18 GMT-0700 (Pacific Daylight Time)">12:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">because pointer field doesn't require the type's size to be known (so, the type can be incomplete)</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Sun May 02 2021 05:58:01 GMT-0700 (Pacific Daylight Time)">12:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so I wondered if <code>ExclusiveData&lt;Inner*&gt;</code> could be used (haven't looked into the details how the field is used)</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Sun May 02 2021 06:01:35 GMT-0700 (Pacific Daylight Time)">13:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell">okay! I ll look into it.. code is quite confusing.
I need field type to be   ExclusiveData&lt;Inner*&gt; type only for sure,.. i guess i have to find another way to declare cache_ pointer
If u need uses of the field-https://<a href="http://searchfox.org/mozilla-central/search?q=SharedImmutableString%3A%3ACache&amp;path=&amp;case=false&amp;regexp=false">searchfox.org/mozilla-central/search?q=SharedImmutableString%3A%3ACache&amp;path=&amp;case=false&amp;regexp=false</a></td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Sun May 02 2021 06:02:13 GMT-0700 (Pacific Daylight Time)">13:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@ashcode:mozilla.org">ashcode</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> in that case, it sounds like, <code>getOrCreate</code> has either parameter or local variable, that new <code>StringBox</code> constructor wants to receive?</blockquote></mx-reply>will dis still wrk if i use  ExclusiveData&lt;Inner*&gt; field type?</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Sun May 02 2021 06:03:57 GMT-0700 (Pacific Daylight Time)">13:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if you use <code>ExclusiveData&lt;Inner*&gt;</code> for the field, you'll need to rewrite all occurrences of <code>ExclusiveData&lt;Inner&gt;</code> with it (otherwise they're not compatible</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Sun May 02 2021 06:04:21 GMT-0700 (Pacific Daylight Time)">13:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">but after that, I guess you can do the same thing for the parameter etc</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Sun May 02 2021 08:26:32 GMT-0700 (Pacific Daylight Time)">15:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@mshariff:mozilla.org">mshariff</span>&gt;</div></td><td class="msg-cell">Are there any community specific questions that you would like me to answer in the application?</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Sun May 02 2021 08:27:48 GMT-0700 (Pacific Daylight Time)">15:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ashwiniwankhede:mozilla.org">ashwiniwankhede</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Are there any community specific questions that you would like me to answer in the application?</blockquote></mx-reply>I was also going to ask the same :)</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Sun May 02 2021 09:10:04 GMT-0700 (Pacific Daylight Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">mshariff</span>: <span class="nick-7">ashwiniwankhede</span> Nope, we don't have any community-specific questions</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Sun May 02 2021 09:10:58 GMT-0700 (Pacific Daylight Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ashwiniwankhede:mozilla.org">ashwiniwankhede</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-12">mshariff</span>: <span class="nick-7">ashwiniwankhede</span> Nope, we don't have any community-specific questions</blockquote></mx-reply>Okay. Thanks a lot :)</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Sun May 02 2021 09:11:02 GMT-0700 (Pacific Daylight Time)">16:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@mshariff:mozilla.org">mshariff</span>&gt;</div></td><td class="msg-cell">okay thank you.</td></tr>

</tbody></table></div></div></div>
</body></html>