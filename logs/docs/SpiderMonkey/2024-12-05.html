<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2024-12-05</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2024-12-05<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-12-04" class="nav-link"><span>prev</span></a>
<a href="2024-12-06" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Dec 04 2024 22:31:47 GMT-0800 (Pacific Standard Time)">06:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@glandium:mozilla.org">glandium</span>&gt;</div></td><td class="msg-cell">is there a pref to disable all jits?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Dec 05 2024 00:07:44 GMT-0800 (Pacific Standard Time)">08:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">glandium</span>: not a single pref, you have to disable the <code>blinterp</code> pref (baseline interpreter, disables all JS JITs too), <code>native_regexp</code> pref for the irregexp jit, and the <code>asmjs</code> and <code>wasm</code> prefs</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Dec 05 2024 00:08:27 GMT-0800 (Pacific Standard Time)">08:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">for the parent process we do have a single pref, <code>javascript.options.main_process_disable_jit</code></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Dec 05 2024 00:09:16 GMT-0800 (Pacific Standard Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">this calls <code>JS::DisableJitBackend()</code> and is the most robust way to disable all runtime codegen</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Dec 05 2024 00:09:39 GMT-0800 (Pacific Standard Time)">08:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@glandium:mozilla.org">glandium</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">jandem</span>: so, like these 4: <a href="https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml#8004,8023,8418,8709">https://searchfox.org/mozilla-central/source/modules/libpref/init/StaticPrefList.yaml#8004,8023,8418,8709</a> ?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Dec 05 2024 00:11:56 GMT-0800 (Pacific Standard Time)">08:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">glandium</span>: for Wasm this one: <a href="https://searchfox.org/mozilla-central/rev/8c9c85c74e366c11ffacbb5a2e457b33b0acc9cd/modules/libpref/init/all.js#884">https://searchfox.org/mozilla-central/rev/8c9c85c74e366c11ffacbb5a2e457b33b0acc9cd/modules/libpref/init/all.js#884</a></td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Dec 05 2024 00:12:02 GMT-0800 (Pacific Standard Time)">08:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">I don't see it in StaticPrefList.yaml</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Dec 05 2024 00:12:12 GMT-0800 (Pacific Standard Time)">08:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">this disables all Wasm support though because we don't have an interpreter for it</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Dec 05 2024 00:12:30 GMT-0800 (Pacific Standard Time)">08:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">so this hides the WebAssembly global name</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Dec 05 2024 00:13:32 GMT-0800 (Pacific Standard Time)">08:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@glandium:mozilla.org">glandium</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">jandem</span>: thanks</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Dec 05 2024 03:21:47 GMT-0800 (Pacific Standard Time)">11:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@itms:mozilla.org">itms</span>&gt;</div></td><td class="msg-cell">Hello! I wish to submit an enhancement for SM's pkg-config, I have created bug 1935346, and I'm about to submit to Phabricator. Who should I set as reviewer? Is <span class="nick-12">sfink</span>  still the relevant person? (from <code>hg log js/src/build/<a href="http://js.pc.in">js.pc.in</a></code>)</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Dec 05 2024 03:21:50 GMT-0800 (Pacific Standard Time)">11:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1935346">https://bugzil.la/1935346</a> — UNCONFIRMED (nobody) — Fix SpiderMonkey's pkg-config file for debug builds</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Dec 05 2024 07:41:04 GMT-0800 (Pacific Standard Time)">15:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">itms</span>: probably yes, but you could use #spidermonkey-reviewers which is a group, and we'll then triage to the right person</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Dec 05 2024 09:55:48 GMT-0800 (Pacific Standard Time)">17:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">itms</span>: I've added my comments. Let me know if that makes sense. It's a messy situation.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Dec 05 2024 10:01:08 GMT-0800 (Pacific Standard Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">For the room: does anyone here know that anything in a header that would affect binary compatibility with a compiled mozjs library should really be using <code>JS_DEBUG</code> and not <code>DEBUG</code>? I think I've learned and forgotten this many times now.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Dec 05 2024 10:01:28 GMT-0800 (Pacific Standard Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">as in, <code>#ifdef JS_DEBUG</code> vs <code>#ifdef DEBUG</code></td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Dec 05 2024 10:02:14 GMT-0800 (Pacific Standard Time)">18:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">it's a pointless distinction if we're not going to maintain it, and right now it's not tested at all in CI so it's guaranteed to not be correct</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Dec 05 2024 10:06:45 GMT-0800 (Pacific Standard Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">I agree. It's a footgun especially now that we have more code in classes/templates in our public headers</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Dec 05 2024 10:14:11 GMT-0800 (Pacific Standard Time)">18:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I wasn't aware of <code>JS_DEBUG</code> :P</td></tr>

</tbody></table></div></div></div>
</body></html>