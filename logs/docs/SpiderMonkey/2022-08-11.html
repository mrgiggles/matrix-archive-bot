<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-08-11</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-08-11<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-08-10" class="nav-link"><span>prev</span></a>
<a href="2022-08-12" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Aug 11 2022 05:02:32 GMT-0700 (Pacific Daylight Time)">12:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Is there any function for quick and dirty conversions from JSObject or JSValue to JSON string? I'm asking within the context of debugging an embedded SpiderMonkey C++ project. I often find myself wishing that I could peak inside the Object structure, but I haven't found a convenient way of doing this yet.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Aug 11 2022 05:09:26 GMT-0700 (Pacific Daylight Time)">12:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">liam_g</span>: in <code>--enable-debug</code> or <code>--enable-jitspew</code> builds you can do <code>obj-&gt;dump()</code></td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Aug 11 2022 05:10:02 GMT-0700 (Pacific Daylight Time)">12:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">in the debugger</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Aug 11 2022 05:10:26 GMT-0700 (Pacific Daylight Time)">12:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">there's also a <code>js::DumpObject(obj)</code> API</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Aug 11 2022 05:20:14 GMT-0700 (Pacific Daylight Time)">12:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Where is the <code>js::DumpObject()</code> function defined? I'm not seeing it in js/Debug.h.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Aug 11 2022 05:20:34 GMT-0700 (Pacific Daylight Time)">12:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">I think I compiled with --enable debug, but I'm not completely sure.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Aug 11 2022 05:25:24 GMT-0700 (Pacific Daylight Time)">12:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">it's defined in js/public/friend/DumpFunctions.h</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Aug 11 2022 05:25:32 GMT-0700 (Pacific Daylight Time)">12:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/source/js/public/friend/DumpFunctions.h">https://searchfox.org/mozilla-central/source/js/public/friend/DumpFunctions.h</a></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Aug 11 2022 05:29:30 GMT-0700 (Pacific Daylight Time)">12:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Thanks @arai. If there's no return value or out param, where is the object dumped to?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Aug 11 2022 05:29:56 GMT-0700 (Pacific Daylight Time)">12:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p>stderr <a href="https://searchfox.org/mozilla-central/rev/f655bdf6b4bf01b42609750ab94fc37635397260/js/src/util/DumpFunctions.cpp#192">https://searchfox.org/mozilla-central/rev/f655bdf6b4bf01b42609750ab94fc37635397260/js/src/util/DumpFunctions.cpp#192</a></p>
<pre><code class="language-cpp">void js::DumpObject(JSObject* obj) { DumpObject(obj, stderr); }
</code></pre>
</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Aug 11 2022 05:33:54 GMT-0700 (Pacific Daylight Time)">12:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Ah, this is so great! Will speed up my workflow a great deal.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Aug 11 2022 06:44:22 GMT-0700 (Pacific Daylight Time)">13:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@mohamed_atef:matrix.org">Mohamed Atef</span>&gt;</div></td><td class="msg-cell">more details about bug 1783948, please</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Aug 11 2022 06:44:25 GMT-0700 (Pacific Daylight Time)">13:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1783948">https://bugzil.la/1783948</a> — NEW (nobody) — Remove duplicate JS source from JS Bytecode Cache</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Aug 11 2022 06:51:42 GMT-0700 (Pacific Daylight Time)">13:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Mohamed Atef</span>: the background is the following:  without cache, JavaScript files used by web content is downloaded from server and compiled every time.  we have a network cache that stores the files received from web server, so that we can skip downloading.  then, still, we need to compile the possibly same JS file many times.  so, we cache the bytecode in the network cache, so that we can skip both download and compilation</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Aug 11 2022 06:53:22 GMT-0700 (Pacific Daylight Time)">13:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">then, when loading from network cache, currently only either the raw JS file or the bytecode cache can be loaded at once.  then, the bytecode cache contains the raw JavaScript source, for multiple purposes (e.g. for <code>Function.prototype.toString</code>)</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Aug 11 2022 06:53:51 GMT-0700 (Pacific Daylight Time)">13:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so in the cache we have 2 copies of JS source code</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Aug 11 2022 06:54:05 GMT-0700 (Pacific Daylight Time)">13:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">the bug is mostly a meta bug to track the task to remove the duplication</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Aug 11 2022 06:55:21 GMT-0700 (Pacific Daylight Time)">13:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, currently the bug itself is not immediately actionable (in term of, writing patch). we need to figure out necessary tasks to achieve the removal of the duplication  (rework in network cache, rework in the bytecode cache structure, etc)</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Aug 11 2022 06:55:37 GMT-0700 (Pacific Daylight Time)">13:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">and then we'll file bugs under that, and work on each</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Aug 11 2022 07:02:10 GMT-0700 (Pacific Daylight Time)">14:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">this is the area I'm currently working on, and if you're interested into it, I can mentor</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Aug 11 2022 07:06:30 GMT-0700 (Pacific Daylight Time)">14:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if you're interested into that area, try looking into documents around frontend and stencil <a href="https://searchfox.org/mozilla-central/rev/f655bdf6b4bf01b42609750ab94fc37635397260/js/src/frontend/Stencil.h#74">Stencil.h</a></td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Aug 11 2022 07:07:14 GMT-0700 (Pacific Daylight Time)">14:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">the bytecode cache is the serialization of the stencil</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Aug 11 2022 07:08:53 GMT-0700 (Pacific Daylight Time)">14:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">it's defined in <a href="https://searchfox.org/mozilla-central/rev/f655bdf6b4bf01b42609750ab94fc37635397260/js/src/frontend/StencilXdr.h">StencilXdr.h</a></td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Thu Aug 11 2022 07:13:29 GMT-0700 (Pacific Daylight Time)">14:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@mohamed_atef:matrix.org">Mohamed Atef</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> this is the area I'm currently working on, and if you're interested into it, I can mentor</blockquote></mx-reply>That seems interesting.<br>I am in.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Thu Aug 11 2022 08:38:34 GMT-0700 (Pacific Daylight Time)">15:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">once you've read through documents around that, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1782571">bug 1782571</a> could be a good start point to work on bugs around cache.  it's a part of effort to decouple the frontend and JSContext, to make the code around compilation more flexible</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu Aug 11 2022 08:38:35 GMT-0700 (Pacific Daylight Time)">15:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1782571">https://bugzil.la/1782571</a> — NEW (nobody) — Skip profiler pseudo-frames if JSContext is not available</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Thu Aug 11 2022 09:28:57 GMT-0700 (Pacific Daylight Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">I've been working to make native classes easier to implement, and here's my attempt
If anyone has any feedback for the user experience, that'd be nice.
<a href="https://github.com/Redfire75369/spiderfire/pull/22">https://github.com/Redfire75369/spiderfire/pull/22</a></td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu Aug 11 2022 09:35:21 GMT-0700 (Pacific Daylight Time)">16:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Redfire</span>: I don't know enough Rust or the current setup to give any useful advice, though it looks really clean in your example. One question—what's the \0 for in the "SPIDER\0" string? Is this using an older mozjs that likes to nul-terminate strings or something?</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Thu Aug 11 2022 09:38:07 GMT-0700 (Pacific Daylight Time)">16:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">It's mozjs 96 or 97 I believe<br>As far as I can tell, that nul termination is required.<br>I got 'SPIDERh8` or something when I forgot to add that.</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Thu Aug 11 2022 10:56:41 GMT-0700 (Pacific Daylight Time)">17:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@jon4t4n:mozilla.org">jon4t4n</span>&gt;</div></td><td class="msg-cell">Do I understand the <a href="https://html.spec.whatwg.org/#module-map">HTML spec</a> correctly? Before JSON modules, the <a href="https://searchfox.org/mozilla-central/rev/f655bdf6b4bf01b42609750ab94fc37635397260/js/loader/ModuleLoaderBase.h#150-152">module map</a> was (still is) only keyed by the URL. But now, it should also contain the module type. So that means if I am looking at the right piece of code, we need to change <a href="https://searchfox.org/mozilla-central/rev/f655bdf6b4bf01b42609750ab94fc37635397260/netwerk/base/nsURIHashKey.h#19">nsURIHashKey</a> to look something like <code>struct { nsIURI*; ModuleType; }</code>? According to the spec, the module type should be a string. My question is, do we want to follow the spec to the letter, or could we use an enum instead?</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Thu Aug 11 2022 11:20:12 GMT-0700 (Pacific Daylight Time)">18:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@jon4t4n:mozilla.org">jon4t4n</span>&gt;</div></td><td class="msg-cell">Or, we don't want to change the nsURIHashKey because it is used in a lot of other places. But instead, add a new key that can be used for the module map.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Thu Aug 11 2022 12:00:14 GMT-0700 (Pacific Daylight Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">@allstarschh| intermittent network</span>: ^</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Thu Aug 11 2022 12:00:20 GMT-0700 (Pacific Daylight Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">maybe you've looked at that</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Thu Aug 11 2022 12:14:32 GMT-0700 (Pacific Daylight Time)">19:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">known old bug that I had to patch around for forever: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1243367">https://bugzilla.mozilla.org/show_bug.cgi?id=1243367</a></td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Thu Aug 11 2022 12:17:21 GMT-0700 (Pacific Daylight Time)">19:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">this will crash the embedding randomly when mozjs is used as a shared library (if not patched around)</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Thu Aug 11 2022 12:20:57 GMT-0700 (Pacific Daylight Time)">19:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><del>oh wait, my bad, it's a different code (just looks very similar) xD</del><br>but actually not, the code in question <em>is</em> the relevant code (sorry, it's been a long day &gt;_&lt;)</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Thu Aug 11 2022 12:31:08 GMT-0700 (Pacific Daylight Time)">19:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>If anyone is interested the crash in such scenario is caused by different <code>free</code> calls:</p>
<ul>
<li>At least on some systems (notably Windows), heap might not be shared between dynamic libraries even if allocations is performed via the same methods, thus <code>malloc</code>/<code>free</code> in main application and mozjs shared library will use different heaps.</li>
<li>The code in question (<code>js_free</code>) is inlined in embedding (e.g. via mozjs templated classes and methods).</li>
<li>When <code>js_free</code> in embedder code is called to free the memory allocated in mozjs library, it causes <code>free</code> to use the wrong heap, which causes UB</li>
</ul>
</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Thu Aug 11 2022 12:34:28 GMT-0700 (Pacific Daylight Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">It's easy (as much as it's annoying having to do it at all) to fix on embedder side by patching mozjs headers <em>after</em> library is build (so that mozjs library can keep whatever internal logic it needs) with something like this: <a href="https://github.com/TheQwertiest/foo_spider_monkey_panel/blob/master/scripts/patches/mozjs-bug_1243367-wrong_free_call.patch">https://github.com/TheQwertiest/foo_spider_monkey_panel/blob/master/scripts/patches/mozjs-bug_1243367-wrong_free_call.patch</a></td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Thu Aug 11 2022 12:36:16 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Do I understand the <a href="https://html.spec.whatwg.org/#module-map">HTML spec</a> correctly? Before JSON modules, the <a href="https://searchfox.org/mozilla-central/rev/f655bdf6b4bf01b42609750ab94fc37635397260/js/loader/ModuleLoaderBase.h#150-152">module map</a> was (still is) only keyed by the URL. But now, it should also contain the module type. So that means if I am looking at the right piece of code, we need to change <a href="https://searchfox.org/mozilla-central/rev/f655bdf6b4bf01b42609750ab94fc37635397260/netwerk/base/nsURIHashKey.h#19">nsURIHashKey</a> to look something like <code>struct { nsIURI*; ModuleType; }</code>? According to the spec, the module type should be a string. My question is, do we want to follow the spec to the letter, or could we use an enum instead?</blockquote></mx-reply><p>Hmm. It certainly seems possible, but this is well outside my area of expertise.</p>
<p>Could you write that up in a bug, and then we can needinfo Jon (as a start)?</p>
</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Thu Aug 11 2022 12:48:29 GMT-0700 (Pacific Daylight Time)">19:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">btw, since module html spec was mentioned, what extension should I use for js modules? <code>.js</code> or <code>.mjs</code>? I was told before that <code>.js</code> is the way, but the spec above uses <code>.mjs</code></td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Thu Aug 11 2022 12:51:19 GMT-0700 (Pacific Daylight Time)">19:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">TheQwertiest</span>: I don't think we here have a strong opinion. MDN has <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#aside_%E2%80%94_.mjs_versus_.js">a discussion here</a></td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Thu Aug 11 2022 12:53:46 GMT-0700 (Pacific Daylight Time)">19:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">thanks</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Thu Aug 11 2022 12:53:52 GMT-0700 (Pacific Daylight Time)">19:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">though seems that it will be <code>.mjs</code> after all, since I'm 99% sure V8 (aka Google) will enforce it somewhere (as they often like doing)</td></tr>

</tbody></table></div></div></div>
</body></html>