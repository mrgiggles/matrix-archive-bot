<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2024-08-08</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2024-08-08<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-08-07" class="nav-link"><span>prev</span></a>
<a href="2024-08-09" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Aug 07 2024 17:49:23 GMT-0700 (Pacific Daylight Time)">00:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">good day all</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Aug 07 2024 17:49:42 GMT-0700 (Pacific Daylight Time)">00:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">Arai i was the one asking about the issues with conversion on strings</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Aug 07 2024 17:50:00 GMT-0700 (Pacific Daylight Time)">00:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">about memory crash</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Aug 07 2024 17:50:43 GMT-0700 (Pacific Daylight Time)">00:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">Just wandering why Mozzila has not created a Discord channel being as big discord is</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Aug 07 2024 17:53:46 GMT-0700 (Pacific Daylight Time)">00:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">IS any one here know c++ and spidermonkey embedding</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Aug 07 2024 17:54:33 GMT-0700 (Pacific Daylight Time)">00:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yes, feel free to ask questions</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Aug 07 2024 17:54:55 GMT-0700 (Pacific Daylight Time)">00:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">Okay same question i tryed to do debug with it but i end up with a different error</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Aug 07 2024 17:54:59 GMT-0700 (Pacific Daylight Time)">00:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">and i am unsure why</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Aug 07 2024 17:55:30 GMT-0700 (Pacific Daylight Time)">00:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">const corpseDecayTimer = GetServerSetting("CORPSEDECAYTIMER");</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Aug 07 2024 17:55:31 GMT-0700 (Pacific Daylight Time)">00:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">have you tried debug build + debugger ?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Aug 07 2024 17:55:36 GMT-0700 (Pacific Daylight Time)">00:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">this the string i am trying to get</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Aug 07 2024 17:55:48 GMT-0700 (Pacific Daylight Time)">00:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">using this code</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Aug 07 2024 17:55:49 GMT-0700 (Pacific Daylight Time)">00:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell"><p>std::string ConvertJSStringToString(JSContext* cx, JSString* jsString) {<br>// Root the JSString to ensure it's managed properly<br>JS::Rooted&lt;JSString*&gt; rootedString(cx, jsString);</p>
<pre><code>// Convert the JSString to a Latin1 encoded string
JS::UniqueChars latin1Chars = JS_EncodeStringToLatin1(cx, rootedString);
if (!latin1Chars) {
    std::cerr &lt;&lt; "Failed to convert JSString to Latin1!" &lt;&lt; std::endl;
    return "";
}

// Return as std::string
return std::string(latin1Chars.get());
</code></pre>
<p>}</p>
</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Aug 07 2024 17:56:17 GMT-0700 (Pacific Daylight Time)">00:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">i tryed so many differant ways but the system blows up and crashes</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Aug 07 2024 17:56:22 GMT-0700 (Pacific Daylight Time)">00:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">on trying to find that string</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Aug 07 2024 17:56:40 GMT-0700 (Pacific Daylight Time)">00:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">i registered the event</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Aug 07 2024 17:57:10 GMT-0700 (Pacific Daylight Time)">00:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">We have spent the last 6 to 8 months updating this project to 115 from spidermonkey 1.8</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Aug 07 2024 17:57:59 GMT-0700 (Pacific Daylight Time)">00:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/UOX3DevTeam/UOX3/tree/feature/spidermonkey-esr115">https://github.com/UOX3DevTeam/UOX3/tree/feature/spidermonkey-esr115</a></td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Aug 07 2024 17:58:02 GMT-0700 (Pacific Daylight Time)">00:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">this is the project</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Aug 07 2024 17:58:35 GMT-0700 (Pacific Daylight Time)">00:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">the sevrer emu uses spidermonkey 1.8 but we been working on getting it to current 115</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Aug 07 2024 17:58:51 GMT-0700 (Pacific Daylight Time)">00:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">because support for the old engine is getting harder and harder</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Aug 07 2024 17:59:54 GMT-0700 (Pacific Daylight Time)">00:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">i have not tryed that in vs yet</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Aug 07 2024 18:00:09 GMT-0700 (Pacific Daylight Time)">01:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">i just compile exe in debug mode and run it on vs as debug</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Aug 07 2024 18:01:03 GMT-0700 (Pacific Daylight Time)">01:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if the application literally crashes (segmentation fault etc), catching it in the debugger is the first step</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Aug 07 2024 18:02:14 GMT-0700 (Pacific Daylight Time)">01:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dragonslayer:mozilla.org">dragonslayer</span>&gt;</div></td><td class="msg-cell">ill ill run it again</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu Aug 08 2024 07:53:02 GMT-0700 (Pacific Daylight Time)">14:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@zcorpan:mozilla.org">zcorpan</span>&gt;</div></td><td class="msg-cell">FYI <a href="https://x.com/yoavweiss/status/1821470496971456725">https://x.com/yoavweiss/status/1821470496971456725</a></td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Thu Aug 08 2024 08:48:53 GMT-0700 (Pacific Daylight Time)">15:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">-sigh- love me a failure I can't reproduce locally </td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu Aug 08 2024 09:06:23 GMT-0700 (Pacific Daylight Time)">16:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">hi! anyone have a moment to look at the embedders migration guide for esr128 <a href="https://github.com/mozilla-spidermonkey/spidermonkey-embedding-examples/pull/85">https://github.com/mozilla-spidermonkey/spidermonkey-embedding-examples/pull/85</a> ? arai reviewed most of it but we have one open question about <code>JS::GCPolicy</code> that could use some feedback</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Thu Aug 08 2024 12:27:41 GMT-0700 (Pacific Daylight Time)">19:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">If I want to mark a function pointer as "I promise, this pointer won't GC"... is there an annotation for this, or should I be going straight to the  <a href="https://searchfox.org/mozilla-central/source/js/src/devtools/rootAnalysis/annotations.js#10-18"><code>ignoreIndirectCalls</code></a> list</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Thu Aug 08 2024 12:31:50 GMT-0700 (Pacific Daylight Time)">19:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is the function pointer used/called in multiple places?</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Thu Aug 08 2024 12:32:38 GMT-0700 (Pacific Daylight Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Yes :)</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Thu Aug 08 2024 12:32:59 GMT-0700 (Pacific Daylight Time)">19:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(I wondered if AutoSuppressGCAnalysis mentioned above fits, if it's called in a few places)</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Thu Aug 08 2024 12:33:10 GMT-0700 (Pacific Daylight Time)">19:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">(Otherwise I could use AutoSuppressGCAnalysis at the call site... I suppose I still could but was wondering if there was an annotation) </td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Thu Aug 08 2024 12:33:56 GMT-0700 (Pacific Daylight Time)">19:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">(This is for the MOZ_LOG interface I've been working on -- I've hooked it up to JitSpewer, so that'd put AutoSuppressGCAnalysis in a lot of places) </td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Thu Aug 08 2024 12:34:45 GMT-0700 (Pacific Daylight Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Oh wait. Hold on. No. I forgot. JitSpew is wierd... it does have only one call site. but JS_LOG would have more than one,  should we use it more frequently </td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Thu Aug 08 2024 13:35:52 GMT-0700 (Pacific Daylight Time)">20:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@kfjvj:matrix.org">kfjvj</span>&gt;</div></td><td class="msg-cell">Question about interrupt handling: Is there any way to attach additional information to an interrupt request so that I can tell exactly where the request came from?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Thu Aug 08 2024 13:40:07 GMT-0700 (Pacific Daylight Time)">20:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">the engine itself doesn't provide a way to add info.  but as long as there's no recursive interrupt request, you can have single global variable or something that shared between the requester and the the consumer, in order to track the additional info</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Thu Aug 08 2024 13:41:19 GMT-0700 (Pacific Daylight Time)">20:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@kfjvj:matrix.org">kfjvj</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> the engine itself doesn't provide a way to add info.  but as long as there's no recursive interrupt request, you can have single global variable or something that shared between the requester and the the consumer, in order to track the additional info</blockquote></mx-reply>That's what I was afraid of.</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Thu Aug 08 2024 13:42:33 GMT-0700 (Pacific Daylight Time)">20:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">do you mean there can be multiple requests?  what's the situation or the requester ?</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Thu Aug 08 2024 13:46:03 GMT-0700 (Pacific Daylight Time)">20:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@kfjvj:matrix.org">kfjvj</span>&gt;</div></td><td class="msg-cell">I just want to distinguish my own interrupts from those invoked by the GC or other things.</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Thu Aug 08 2024 13:48:53 GMT-0700 (Pacific Daylight Time)">20:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/rev/0c55d51c0d2a9b672e42ad40ea54f90267f92a8e/js/src/shell/js.cpp#4792-4793">JS_RequestInterruptCallback consumer</a> and <a href="https://searchfox.org/mozilla-central/rev/0c55d51c0d2a9b672e42ad40ea54f90267f92a8e/js/src/shell/js.cpp#997-1007">ShellInterruptCallback</a> in the JS shell uses single bool to distinguish them</td></tr>

</tbody></table></div></div></div>
</body></html>