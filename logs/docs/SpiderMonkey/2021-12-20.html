<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2021-12-20</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2021-12-20<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-12-19" class="nav-link"><span>prev</span></a>
<a href="2021-12-21" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Dec 20 2021 03:41:39 GMT-0800 (Pacific Standard Time)">11:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><p>Hi! My Record&amp;Tuple patches are ready, and they have all been approved by <span class="nick-3">mgaudet|OOO-until-January-2022|Happy-Holidays</span> and <span class="nick-10">jandem (back Jan 3rd)</span>. @\mgaudet wanted to land them on Friday before going on vacation, but I didn't notice a <code>clang-format</code> error in one of them (D129675) so he couldn't do it üò¨</p>
<p>I fixed the <code>clang-format</code> error, and I wonder if anyone else is willing to land them? üôè<br>The stack starts at <a href="https://phabricator.services.mozilla.com/D125644">https://phabricator.services.mozilla.com/D125644</a> (it should all be landed except for D132467 - @\mgaudet asked to wait and move that last patch to a different tracking bug), and a passing <code>mach try</code> is at <a href="https://treeherder.mozilla.org/jobs?repo=try&amp;revision=3adf5ad3cc18a60cad5de77e09003cbb85cbea7d&amp;selectedTaskRun=LIkfvJlMTZ-EfbzEpdmDkg.0">https://treeherder.mozilla.org/jobs?repo=try&amp;revision=3adf5ad3cc18a60cad5de77e09003cbb85cbea7d&amp;selectedTaskRun=LIkfvJlMTZ-EfbzEpdmDkg.0</a></p>
<p>The source code analysis is still running because I just re-uploaded the patches to fix the clang-format error, but when it finishes everything is ready.</p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Dec 20 2021 03:45:25 GMT-0800 (Pacific Standard Time)">11:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">nicolo-ribaudo</span>: Can you check all review comments and mark them as "Done", to make sure all of them are handled?  after that, I can land them</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Dec 20 2021 03:45:54 GMT-0800 (Pacific Standard Time)">11:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(I think all of them are handled, according to the replies, but just to make sure</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Dec 20 2021 03:46:45 GMT-0800 (Pacific Standard Time)">11:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Sure, I'll do it now üëçÔ∏è</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Dec 20 2021 03:47:41 GMT-0800 (Pacific Standard Time)">11:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">actually, Part 17-bis has not-handled comment</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Dec 20 2021 03:49:31 GMT-0800 (Pacific Standard Time)">11:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Oh thanks, I didn't notice until now that it suggested <code>enum class</code> (initially I named them something diffferent from <code>Record</code> and <code>Object</code>, and I only noticed now that I didn't just have to reame them). I'll ping you again when everything is ready.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Dec 20 2021 04:16:22 GMT-0800 (Pacific Standard Time)">12:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Is this something I should worry about?  ü§î
<a href="https://phabricator.services.mozilla.com/D125647#4366218">https://phabricator.services.mozilla.com/D125647#4366218</a></td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Dec 20 2021 04:29:55 GMT-0800 (Pacific Standard Time)">12:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">nicolo-ribaudo</span>: no</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Dec 20 2021 07:12:40 GMT-0800 (Pacific Standard Time)">15:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">arai</span> Souce code analysis for every patch passed now, and I checked that all the review comments are done (except the one you pointed out in 17-bis, for which I re-uploaded the patch).</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Dec 20 2021 07:13:15 GMT-0800 (Pacific Standard Time)">15:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">thanks :)  I'll take a look shortly</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Dec 20 2021 07:17:49 GMT-0800 (Pacific Standard Time)">15:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">looks good :)  queued the patches for landing</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Dec 20 2021 07:18:16 GMT-0800 (Pacific Standard Time)">15:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Thank you!</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Dec 20 2021 09:26:37 GMT-0800 (Pacific Standard Time)">17:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">I was having a conversation with a friend, and they were having this issue. (I asked them to file a bug, but I just wanted to check here first)</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Dec 20 2021 10:22:22 GMT-0800 (Pacific Standard Time)">18:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Redfire</span>: what's the exact reproduction steps before that input?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Dec 20 2021 10:22:45 GMT-0800 (Pacific Standard Time)">18:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I'm wondering where the value of <code>a</code> comes from</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Dec 20 2021 10:23:15 GMT-0800 (Pacific Standard Time)">18:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">whether from the script that hit syntax error, or if it was <code>[5]</code> before that point</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Dec 20 2021 10:24:58 GMT-0800 (Pacific Standard Time)">18:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">the <code>SyntaxError</code> itself is basically valid (the error message isn't helpful tho)</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Dec 20 2021 10:25:59 GMT-0800 (Pacific Standard Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">devtool's console partially supports top-level <code>await</code>, but iiuc it's only on really top-level (not inside any block)</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Dec 20 2021 10:27:45 GMT-0800 (Pacific Standard Time)">18:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">then, if <code>a = [];</code> immediately followed by the input results in <code>a</code> being <code>[5]</code>, that would be yet another bug, that there's unexpected fallback or something</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Dec 20 2021 10:30:46 GMT-0800 (Pacific Standard Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">for <code>await</code> outside of async function, we have some code path to print helpful message ("SyntaxError: await is only valid in async functions, async generators and modules"), but apparently it doesn't work inside parenthesis</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Dec 20 2021 10:31:48 GMT-0800 (Pacific Standard Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if the issue you're having is the syntax error, please CC me in the bug.  I can work on it</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Dec 20 2021 13:57:08 GMT-0800 (Pacific Standard Time)">21:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@tjr:mozilla.org">tjr</span>&gt;</div></td><td class="msg-cell">would a js peer be able to rubber stamp <a href="https://phabricator.services.mozilla.com/D133930">https://phabricator.services.mozilla.com/D133930</a> for me?  I think it's pretty simple....</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Dec 20 2021 14:09:59 GMT-0800 (Pacific Standard Time)">22:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">tjr</span>: I'm not a JS peer, but as a bit of unasked for driveby commentary, cx arguments are generally first, so the code looks a little odd to my eye.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Dec 20 2021 15:42:57 GMT-0800 (Pacific Standard Time)">23:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Caveat: if a function can fail, then the cx argument goes first. On failure, it should set a pending exception on the context. If a function returns bool, but false does <em>not</em> imply failure, then we often make cx the last argument instead. (<a href="https://searchfox.org/mozilla-central/rev/a11b63915bd7810a03635d733123448ab5bfcad3/js/src/vm/JSObject-inl.h#275">Here's an example</a>.)</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Dec 20 2021 15:44:33 GMT-0800 (Pacific Standard Time)">23:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Well, "often" might be an overstatement. It doesn't come up much</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Dec 20 2021 15:45:54 GMT-0800 (Pacific Standard Time)">23:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">Ah, interesting!</td></tr>

</tbody></table></div></div></div>
</body></html>