<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-11-28</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-11-28<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-11-27" class="nav-link"><span>prev</span></a>
<a href="2023-11-29" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Nov 28 2023 09:08:17 GMT-0800 (Pacific Standard Time)">17:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@hsivonen:mozilla.org">hsivonen</span>&gt;</div></td><td class="msg-cell">Currently, <code>String.prototype.normalize</code> retains unpaired surrogates as unpaired surrogates across the normalization operation, because ICU4C does so. The spec doesn't say explicitly either way. In ICU4X, it was previously decided that output should always be well-formed. Therefore, it we switched <code>String.prototype.normalize</code> to be ICU4X-backed without changing ICU4X internals, <code>String.prototype.normalize</code> would in addition to normalization also do what <code>String.prototype.toWellFormed</code> does. I think this should be OK, since binary storage in JS strings use cases don't make sense combined with normalization. This has turned up as a discussion item to be rehashed. I think ICU4X should stick to guaranteeing well-formed output. Is anyone aware of an actual problem with <code>String.prototype.normalize</code> replacing unpaired surrogates with the REPLACEMENT CHARACTER?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Nov 28 2023 09:51:55 GMT-0800 (Pacific Standard Time)">17:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dbezhetskov:igalia.com">dbezhetskov</span>&gt;</div></td><td class="msg-cell">is there a way to serialize/deserialize SM's JS bytecode? </td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Nov 28 2023 09:56:37 GMT-0800 (Pacific Standard Time)">17:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">dbezhetskov</span>: The output of the parser is a stencil, which is designed to be serialized. See <a href="https://searchfox.org/mozilla-central/source/js/src/frontend/Stencil.h#71">here</a></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Nov 28 2023 09:57:17 GMT-0800 (Pacific Standard Time)">17:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">Stencil' transcoding API is provided in <a href="https://searchfox.org/mozilla-central/rev/9bc264fbc5d6e618d8f3b9677a8f5e8550b94dbc/js/public/experimental/JSStencil.h#191-213">js/public/experimental/JSStencil.h</a></td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Nov 28 2023 10:03:46 GMT-0800 (Pacific Standard Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@dbezhetskov:igalia.com">dbezhetskov</span>&gt;</div></td><td class="msg-cell">thanks for the pointers!</td></tr>

</tbody></table></div></div></div>
</body></html>