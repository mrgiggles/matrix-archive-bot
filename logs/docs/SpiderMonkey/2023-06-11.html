<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-06-11</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-06-11<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-06-10" class="nav-link"><span>prev</span></a>
<a href="2023-06-12" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sat Jun 10 2023 21:48:22 GMT-0700 (Pacific Daylight Time)">04:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><p>I'm not exactly sure how modules are supposed to work, but I can get it to work with dynamic import at least. If I change <code>main.js</code> to:</p>
<pre><code>import('mod1.mjs').then(({fn1, fn2}) =&gt; {
    fn1();
    fn2(10,20);
});
</code></pre>
<p>then it works if I just run <code>js main.js</code>.</p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sat Jun 10 2023 21:49:34 GMT-0700 (Pacific Daylight Time)">04:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">regular imports work between modules too.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sun Jun 11 2023 02:00:22 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Neither is outdated or limited, you're just expecting the engines themselves to do much more work than their required to by the ECMA-262 spec</blockquote></mx-reply>I am still confused about what to go with</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sun Jun 11 2023 02:00:29 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">it seems like QuickJS works out of the box</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sun Jun 11 2023 02:00:37 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">while SM seems like it might not</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sun Jun 11 2023 02:12:25 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but with QuickJS I won't have compatibility with SM</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sun Jun 11 2023 02:12:34 GMT-0700 (Pacific Daylight Time)">09:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">at least directly</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Sun Jun 11 2023 02:13:06 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">maybe one could write a tool that allows writing against the SM API with QuickJS</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Sun Jun 11 2023 02:13:27 GMT-0700 (Pacific Daylight Time)">09:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">so that SM would be just a kind of a target</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Sun Jun 11 2023 02:30:05 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what's the minimal requirement for the application you want?  I guess a "100% Node.js compatible alternative" is not what you want?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Sun Jun 11 2023 02:30:30 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">yes it doesn't need to be compatible with existing Node code</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Sun Jun 11 2023 02:30:59 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but it should have about the same features: produce an executable, write arbitrary JS programs, run on server-side, embed to browser</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Sun Jun 11 2023 02:31:03 GMT-0700 (Pacific Daylight Time)">09:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">or deploy to browser</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Sun Jun 11 2023 02:31:44 GMT-0700 (Pacific Daylight Time)">09:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">okay, let's look into each of them what it mean</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Sun Jun 11 2023 02:33:09 GMT-0700 (Pacific Daylight Time)">09:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">by "produce an executable", is it fine if you get a single executable file for given JS code?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Sun Jun 11 2023 02:33:40 GMT-0700 (Pacific Daylight Time)">09:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if so, it's not difficult.  you just need to embed the JS code as string in the executable and evaluate it when the executable runs</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Sun Jun 11 2023 02:34:37 GMT-0700 (Pacific Daylight Time)">09:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, it's almost same task as creating REPL</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Sun Jun 11 2023 02:35:51 GMT-0700 (Pacific Daylight Time)">09:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> by "produce an executable", is it fine if you get a single executable file for given JS code?</blockquote></mx-reply>yes?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Sun Jun 11 2023 02:36:11 GMT-0700 (Pacific Daylight Time)">09:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but I don't understand why SM doesn't implement a way to pass in a JS file yet</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Sun Jun 11 2023 02:36:18 GMT-0700 (Pacific Daylight Time)">09:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">or it does, but I presumed that it doesn't support modules</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Sun Jun 11 2023 02:36:38 GMT-0700 (Pacific Daylight Time)">09:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">it supports both</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Sun Jun 11 2023 02:36:53 GMT-0700 (Pacific Daylight Time)">09:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">it's about JS shell, right?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Sun Jun 11 2023 02:38:16 GMT-0700 (Pacific Daylight Time)">09:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">to be clear, SpiderMonkey JS shell is intended for testing the SpiderMonkey implementation itself.  not for "run on server-side" thing.   it contains so many testing functions that can easily crash the process (to test the engine internal)</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Sun Jun 11 2023 02:38:37 GMT-0700 (Pacific Daylight Time)">09:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">and if you want a shell, you need to implement your own shell</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Sun Jun 11 2023 02:39:36 GMT-0700 (Pacific Daylight Time)">09:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">yes and I don't really understand what the design goal was</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Sun Jun 11 2023 02:39:41 GMT-0700 (Pacific Daylight Time)">09:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">if it doesn't implement it out of box</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Sun Jun 11 2023 02:40:07 GMT-0700 (Pacific Daylight Time)">09:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">design goal of what?  the JS shell?</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Sun Jun 11 2023 02:40:48 GMT-0700 (Pacific Daylight Time)">09:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">SM</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Sun Jun 11 2023 02:41:05 GMT-0700 (Pacific Daylight Time)">09:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">you mean SpiderMonkey itself?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Sun Jun 11 2023 02:41:07 GMT-0700 (Pacific Daylight Time)">09:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">I think it's designed to be only used as a part of a browser</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Sun Jun 11 2023 02:41:13 GMT-0700 (Pacific Daylight Time)">09:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">and not as a separate engine</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Sun Jun 11 2023 02:41:24 GMT-0700 (Pacific Daylight Time)">09:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">it doesn't seem very separate</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Sun Jun 11 2023 02:42:04 GMT-0700 (Pacific Daylight Time)">09:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">it can be used as separate JS engine</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Sun Jun 11 2023 02:42:13 GMT-0700 (Pacific Daylight Time)">09:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">which part do you see "not separate" ?</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Sun Jun 11 2023 02:43:07 GMT-0700 (Pacific Daylight Time)">09:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">that it doesn't provide a tool where one can just load and run JS</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Sun Jun 11 2023 02:46:15 GMT-0700 (Pacific Daylight Time)">09:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">okay, first. SpiderMonkey is a library.  not a standalone application.  it can be used by any application by linking it and calling APIs to operate on it</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Sun Jun 11 2023 02:48:18 GMT-0700 (Pacific Daylight Time)">09:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, if you want to evaluate JavaScript in your application, you can use SpiderMonkey, and also provide custom functions to the JS world code, so that the JS code can interact with the application</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Sun Jun 11 2023 02:49:44 GMT-0700 (Pacific Daylight Time)">09:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what SpiderMonkey provides is pure ECMAScript, which doesn't have much feature to interact with external world.  for example, it doesn't have stdin/stdout things, file, network, etc.   so those things are supposed to be provided by embedders</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Sun Jun 11 2023 02:50:52 GMT-0700 (Pacific Daylight Time)">09:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, going back to the requirement, "write arbitrary JS programs" depends on what APIs you expect the application to have</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Sun Jun 11 2023 02:51:13 GMT-0700 (Pacific Daylight Time)">09:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if you want pure ECMAScript, then just embedding SpiderMonkey and creating REPL would work</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Sun Jun 11 2023 02:52:14 GMT-0700 (Pacific Daylight Time)">09:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">then, can you describe what you actually expect with "run on server-side" ?  just a command-line application that runs given JS file ?  or some more?</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Sun Jun 11 2023 02:52:35 GMT-0700 (Pacific Daylight Time)">09:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">yes I mean since SpiderMonkey already runs all of the web</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Sun Jun 11 2023 02:52:49 GMT-0700 (Pacific Daylight Time)">09:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">then I thought that creating a REPL should be pretty simple</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Sun Jun 11 2023 02:55:01 GMT-0700 (Pacific Daylight Time)">09:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yeah, REPL without additional feature would be simple</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Sun Jun 11 2023 02:55:12 GMT-0700 (Pacific Daylight Time)">09:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">and it should support the same as SM on browser I believe</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Sun Jun 11 2023 02:55:19 GMT-0700 (Pacific Daylight Time)">09:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">without much modification</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Sun Jun 11 2023 02:56:13 GMT-0700 (Pacific Daylight Time)">09:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what are you expecting with "the same as..." part ?</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Sun Jun 11 2023 02:56:41 GMT-0700 (Pacific Daylight Time)">09:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">that one can throw all the libraries into and whatever that one'd use on the web</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Sun Jun 11 2023 02:57:10 GMT-0700 (Pacific Daylight Time)">09:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">and be able to at least in principle produce the same web app to a folder</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Sun Jun 11 2023 02:57:23 GMT-0700 (Pacific Daylight Time)">09:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">without the browser</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Sun Jun 11 2023 02:57:59 GMT-0700 (Pacific Daylight Time)">09:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">that's not simple thing, because web app is built with many Web API, which is provided by browser not SpiderMonkey</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Sun Jun 11 2023 02:58:06 GMT-0700 (Pacific Daylight Time)">09:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">see I personally ultimately want to write site/app generators</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Sun Jun 11 2023 02:58:29 GMT-0700 (Pacific Daylight Time)">09:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but one can surely limit to FF</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Sun Jun 11 2023 02:58:39 GMT-0700 (Pacific Daylight Time)">09:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">so should one then be able to use SM without FF and then add FF</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Sun Jun 11 2023 02:59:42 GMT-0700 (Pacific Daylight Time)">09:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if you want to create web app generator, I'd suggest looking into browser from the beginning.  there's not much point of starting with raw JS engine</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Sun Jun 11 2023 03:00:26 GMT-0700 (Pacific Daylight Time)">10:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">possibly</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Sun Jun 11 2023 03:00:55 GMT-0700 (Pacific Daylight Time)">10:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but I thought of how to write apps that can act like they don't need the browser installation</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Sun Jun 11 2023 03:02:16 GMT-0700 (Pacific Daylight Time)">10:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">and yes they said that there's e.g. --kiosk</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Sun Jun 11 2023 03:06:58 GMT-0700 (Pacific Daylight Time)">10:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">yes okay</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Sun Jun 11 2023 03:07:09 GMT-0700 (Pacific Daylight Time)">10:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">maybe QuickJS is for separate use cases</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Sun Jun 11 2023 03:07:20 GMT-0700 (Pacific Daylight Time)">10:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">particularly for non-web</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Sun Jun 11 2023 03:07:49 GMT-0700 (Pacific Daylight Time)">10:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">because it seems like once one strips the web apis, then it seems pretty similar to CPython</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Sun Jun 11 2023 03:23:28 GMT-0700 (Pacific Daylight Time)">10:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yeah, if the API you want to use is not listed in <a href="https://tc39.es/ecma262/">https://tc39.es/ecma262/</a> , that's defined by other spec and provided by browser</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Sun Jun 11 2023 03:52:25 GMT-0700 (Pacific Daylight Time)">10:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">I wonder how should I study the FF API w.r.t. to SM then</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Sun Jun 11 2023 03:53:12 GMT-0700 (Pacific Daylight Time)">10:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but yes for this use case it seems more reasonable to target full FF</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Sun Jun 11 2023 03:53:50 GMT-0700 (Pacific Daylight Time)">10:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but is there a server-side server for FF then?</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Sun Jun 11 2023 03:54:05 GMT-0700 (Pacific Daylight Time)">10:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">an official one and not django or something</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Sun Jun 11 2023 04:04:29 GMT-0700 (Pacific Daylight Time)">11:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">or maybe one can generate offline FF pages?</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Sun Jun 11 2023 07:18:15 GMT-0700 (Pacific Daylight Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">so is there some package that defines FF specific JS/HTML/CSS?</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Sun Jun 11 2023 07:18:30 GMT-0700 (Pacific Daylight Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">or i.e. "a SpiderMonkey Document"</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Sun Jun 11 2023 07:58:55 GMT-0700 (Pacific Daylight Time)">14:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so is there some package that defines FF specific JS/HTML/CSS?</blockquote></mx-reply>For this, you'd want to look into the "DOM" code in Firefox</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Sun Jun 11 2023 09:39:27 GMT-0700 (Pacific Daylight Time)">16:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">hm... just wondering, what is ICU used in SM for?</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Sun Jun 11 2023 09:41:59 GMT-0700 (Pacific Daylight Time)">16:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">the <code>Intl</code> object and any <code>toLocaleString()</code> methods, for one thing</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Sun Jun 11 2023 09:42:15 GMT-0700 (Pacific Daylight Time)">16:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">V8 uses it for regexp character classes as well; not sure if SM does that</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Sun Jun 11 2023 09:43:51 GMT-0700 (Pacific Daylight Time)">16:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">huh, first time hearing about Intl API, I'll take a look, thanks :)</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Sun Jun 11 2023 09:46:30 GMT-0700 (Pacific Daylight Time)">16:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>I'm not exactly sure how modules are supposed to work, but I can get it to work with dynamic import at least. If I change <code>main.js</code> to:</p>
<pre><code>import('mod1.mjs').then(({fn1, fn2}) =&gt; {
    fn1();
    fn2(10,20);
});
</code></pre>
<p>then it works if I just run <code>js main.js</code>.</p>
</blockquote></mx-reply>awesome, I didn't think of using dynamic imports, thank you</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Sun Jun 11 2023 09:47:12 GMT-0700 (Pacific Daylight Time)">16:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell">one last thing I noticed that I can't seem to use top-level await from the JS shell, is this normal?</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Sun Jun 11 2023 09:48:37 GMT-0700 (Pacific Daylight Time)">16:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell">I have to wrap it in an async function like this:
<pre><code>==&gt; mod1.mjs &lt;==
export const fn1 = () =&gt; {
  console.log("i'm fn1");
};

export const fn2 = (p1,p2) =&gt; {
  console.log(`i'm fn2, pars: ${p1}, ${p2}`);
};

==&gt; main.js &lt;==
#!/usr/bin/js78
(async () =&gt; {
  const {fn1,fn2} = await import('mod1.mjs');
  fn1();
  fn2(10,20);
})();
</code></pre></td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Sun Jun 11 2023 09:48:49 GMT-0700 (Pacific Daylight Time)">16:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">It seems that SM binary is actually completely broken, I was just lucky first time with SM calls during my limited testing...<br>I doubt that clang did something that totally broke MSVC-compat (since clang-cl is actively used everywhere for Win builds), so I think that the problem is with compilation flags changes between 91ESR and 102ESR</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Sun Jun 11 2023 09:51:03 GMT-0700 (Pacific Daylight Time)">16:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I have to wrap it in an async function like this:
<pre><code>==&gt; mod1.mjs &lt;==
export const fn1 = () =&gt; {
  console.log("i'm fn1");
};

export const fn2 = (p1,p2) =&gt; {
  console.log(`i'm fn2, pars: ${p1}, ${p2}`);
};

==&gt; main.js &lt;==
#!/usr/bin/js78
(async () =&gt; {
  const {fn1,fn2} = await import('mod1.mjs');
  fn1();
  fn2(10,20);
})();
</code></pre></blockquote></mx-reply>if I don't wrap it, it throws <code>SyntaxError: await is only valid in async functions and async generators:</code></td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Sun Jun 11 2023 10:05:05 GMT-0700 (Pacific Daylight Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> one last thing I noticed that I can't seem to use top-level await from the JS shell, is this normal?</blockquote></mx-reply>top-level await is only supported in modules, js shell runs as a script (with dynamic imports) but still a script</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Sun Jun 11 2023 10:27:35 GMT-0700 (Pacific Daylight Time)">17:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell">great thanks! Now I think I can write the script to work for SM too</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Sun Jun 11 2023 10:32:33 GMT-0700 (Pacific Daylight Time)">17:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>btw, if I find this flag that breaks ms-compat, would such a bug report be actually accepted? Since, IIRC, SM no longer targets windows builds</p>
<p>PS: I'm 99% sure that this is the cause, since 91 esr works fine when built with the same compiler</p>
</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Sun Jun 11 2023 11:16:53 GMT-0700 (Pacific Daylight Time)">18:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">I don't think SM not targeting windows builds would make any sense</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Sun Jun 11 2023 11:40:34 GMT-0700 (Pacific Daylight Time)">18:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">we don't target msvc on windows anymore. We definitely target clang-cl on windows, and that is where the majority of our users are. We try to maintain msvc compatibility when compiling with our headers, on a best-effort basis, and we appreciate bug reports when that breaks.</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Sun Jun 11 2023 11:57:31 GMT-0700 (Pacific Daylight Time)">18:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">well, I give up</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Sun Jun 11 2023 11:58:50 GMT-0700 (Pacific Daylight Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>I found two new compile flags in 102:</p>
<pre><code>-fno-strict-aliasing
-ffp-contract=off 
</code></pre>
<p>I've removed them from <code>python\mozbuild\mozbuild\frontend\context.py</code>, but the problem is still there after compilation... (and it takes around 20mins to build it on my machine)</p>
</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Sun Jun 11 2023 11:59:57 GMT-0700 (Pacific Daylight Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">I didn't find any other differences in compilation flags (aside from various warning suppresions)</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Sun Jun 11 2023 12:00:39 GMT-0700 (Pacific Daylight Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">there are no differences in linker flags</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Sun Jun 11 2023 12:04:10 GMT-0700 (Pacific Daylight Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">guess I'll have to stay on 91esr for foreseeable future</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Sun Jun 11 2023 12:44:30 GMT-0700 (Pacific Daylight Time)">19:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">I've accidentally found out one place, which makes at least some of the calls borked: during compilation <code>MOZ_DIAGNOSTIC_ASSERT_ENABLED</code> is defined, but it's not defined in generated <code>js-config.h</code>, thus it generates different code in SM and in embedding</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Sun Jun 11 2023 13:17:56 GMT-0700 (Pacific Daylight Time)">20:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>more macros that are defined during compile time and used in public headers, but are not defined in generated js-config:</p>
<pre><code>#define JS_CODEGEN_X86 1
#define JS_DEBUG 1
#define JS_JITSPEW 1
#define JS_MASM_VERBOSE 1
#define JS_STANDALONE 1
#define MOZ_DEBUG 1
#define MOZ_DIAGNOSTIC_ASSERT_ENABLED 1
</code></pre>
</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Sun Jun 11 2023 13:19:17 GMT-0700 (Pacific Daylight Time)">20:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">adding these fixed at least some of the crashes, but regretfully it's only a small part of them</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Sun Jun 11 2023 13:20:47 GMT-0700 (Pacific Daylight Time)">20:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">I won't be surprised, if there are more missing (or different) macro defines other than those from config.status</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Sun Jun 11 2023 13:50:21 GMT-0700 (Pacific Daylight Time)">20:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>I think I've got it!</p>
<pre><code>#define XP_WIN 1
#define JS_CODEGEN_X86 1
#define JS_JITSPEW 1
#define JS_MASM_VERBOSE 1
#define JS_STANDALONE 1
#define MOZ_DEBUG 1
#define MOZ_DIAGNOSTIC_ASSERT_ENABLED 1
</code></pre>
</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Sun Jun 11 2023 13:50:41 GMT-0700 (Pacific Daylight Time)">20:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">have yet to see a crash with these defined</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Sun Jun 11 2023 13:51:04 GMT-0700 (Pacific Daylight Time)">20:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">but someone really needs take a good and loooooong look at this</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Sun Jun 11 2023 13:51:16 GMT-0700 (Pacific Daylight Time)">20:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">7 missing macros is a lot</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Sun Jun 11 2023 13:53:45 GMT-0700 (Pacific Daylight Time)">20:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">this easily takes top 1 in my list of most annoying things I've had to debug to embed SM</td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Sun Jun 11 2023 13:56:28 GMT-0700 (Pacific Daylight Time)">20:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">and I'm 100% sure that this bug would generate UB in other embedings as well (thought I don't know how many of them adopted 102)</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Sun Jun 11 2023 14:02:31 GMT-0700 (Pacific Daylight Time)">21:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">(at least there were no <code>#ifdef __clang__</code> defines that affected code generation, otherwise it would be a huge PITA to fix)</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Sun Jun 11 2023 15:14:36 GMT-0700 (Pacific Daylight Time)">22:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">and another thing: these macros must be defined <em>before</em> including <em>any</em> SM header</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Sun Jun 11 2023 15:15:08 GMT-0700 (Pacific Daylight Time)">22:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">because they affect mozilla/* headers, which do not include js-config</td></tr>

</tbody></table></div></div></div>
</body></html>