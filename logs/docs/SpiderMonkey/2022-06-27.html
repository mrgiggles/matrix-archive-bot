<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-06-27</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-06-27<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-06-25" class="nav-link"><span>prev</span></a>
<a href="2022-06-28" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Jun 27 2022 06:06:20 GMT-0700 (Pacific Daylight Time)">13:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> So JS_ReportErrorNumberASCII is the version of JS_ReportErrorASCII that would allow you to select the type of error to throw</blockquote></mx-reply>I went with this in the end, it works perfectly, thank you all for the advice ☺️</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Jun 27 2022 10:37:59 GMT-0700 (Pacific Daylight Time)">17:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">On a different matrix account<br>I noticed that my <code>meson-log.txt</code> has (<strong>modified to ran manually from CLI</strong>)<br><code>ccache c++ -L/home/dj/workspace/scriptingService/POC/SpiderMonkey/_build/~/spiderMonkey/install/lib /home/dj/workspace/scriptingService/POC/SpiderMonkey/test.cpp -o /home/dj/workspace/scriptingService/POC/SpiderMonkey/test.exe -pipe -isystem ~/spiderMonkey/install/include/mozjs-103a1 -D_FILE_OFFSET_BITS=64 -O0 -fpermissive -std=c++17 -DDEBUG=1 -Wl,--start-group -lmozjs-103a1 -Wl,--end-group</code><br>and <strong>where it failed</strong> but it <strong>works</strong> with<br><code>ccache c++ -L/home/dj/spiderMonkey/install/lib /home/dj/workspace/scriptingService/POC/SpiderMonkey/test.cpp -o /home/dj/workspace/scriptingService/POC/SpiderMonkey/test.exe -pipe -isystem ~/spiderMonkey/install/include/mozjs-103a1 -D_FILE_OFFSET_BITS=64 -O0 -fpermissive -std=c++17 -DDEBUG=1 -Wl,--start-group -lmozjs-103a1 -Wl,--end-group</code><br>i.e. I deleted <code>/home/dj/workspace/scriptingService/POC/SpiderMonkey/_build/</code> from <code>-L</code></td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Jun 27 2022 10:39:25 GMT-0700 (Pacific Daylight Time)">17:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">My <code>meson-log.txt</code> <a href="https://termbin.com/jlzk">https://termbin.com/jlzk</a></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Jun 27 2022 10:47:36 GMT-0700 (Pacific Daylight Time)">17:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">i did change the manual execution to <code>test.cpp</code> and <code>test.exe</code> as the code it was testing via <code>meson</code> was temporary from <code><a href="http://meson.build">meson.build</a></code> which gets deleted<br>I.e. I copy pasted the test code from <code><a href="http://meson.build">meson.build</a></code> and made it as <code>test.cpp</code></td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Jun 27 2022 10:48:21 GMT-0700 (Pacific Daylight Time)">17:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">The meson command: <code>LD_LIBRARY_PATH=/home/dj/spiderMonkey/install/lib PKG_CONFIG_PATH=/home/dj/spiderMonkey/install/lib/pkgconfig meson _build</code><br>I did try with <code>export</code> as well</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Jun 27 2022 12:36:49 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">trying this without a prefix on the install still gives the same errors...</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Jun 27 2022 12:39:24 GMT-0700 (Pacific Daylight Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">but running the command that's failing and changing:<br><code>ccache c++ /home/dj/workspace/scriptingService/POC/SpiderMonkey/_build/meson-private/tmp4xako0ph/testfile.cpp -o /home/dj/workspace/scriptingService/POC/SpiderMonkey/_build/meson-private/tmp4xako0ph/output.exe -pipe -isystem /usr/local/include/mozjs-103a1 -D_FILE_OFFSET_BITS=64 -O0 -fpermissive -std=c++17 -DDEBUG=1 -Wl,--start-group /usr/local/lib/<a href="http://libmozjs-103a1.so">libmozjs-103a1.so</a> -Wl,--end-group </code><br>to<br><code>ccache c++ /home/dj/workspace/scriptingService/POC/SpiderMonkey/test.cpp -o /home/dj/workspace/scriptingService/POC/SpiderMonkey/test.exe -pipe -isystem /usr/local/include/mozjs-103a1 -D_FILE_OFFSET_BITS=64 -O0 -fpermissive -std=c++17 -DDEBUG=1 -Wl,--start-group /usr/local/lib/<a href="http://libmozjs-103a1.so">libmozjs-103a1.so</a> -Wl,--end-group </code><br><strong>works</strong>....</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Jun 27 2022 12:40:15 GMT-0700 (Pacific Daylight Time)">19:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">was a typo above, fixed</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Jun 27 2022 12:42:15 GMT-0700 (Pacific Daylight Time)">19:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">The error I get is different this time:<br><code>/home/dj/workspace/scriptingService/POC/SpiderMonkey/\_build/meson-private/tmp4xako0ph/output.exe: error while loading shared libraries: <a href="http://libmozjs-103a1.so">libmozjs-103a1.so</a>: cannot open shared object file: No such file or directory</code><br><a href="https://termbin.com/grh1">https://termbin.com/grh1</a><br>I do have a <code><a href="http://libmozjs-103a1.so">libmozjs-103a1.so</a></code> in <code>/usr/local/lib</code></td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Jun 27 2022 12:42:25 GMT-0700 (Pacific Daylight Time)">19:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">davidj361</span>: Given Meson is only used in the embedding examples, I'd suggest you'd find the most help by opening an issue there</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Jun 27 2022 12:45:39 GMT-0700 (Pacific Daylight Time)">19:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-13">davidj361</span>: Given Meson is only used in the embedding examples, I'd suggest you'd find the most help by opening an issue there</blockquote></mx-reply>on the embedding example repo as a github issue right?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Jun 27 2022 12:46:02 GMT-0700 (Pacific Daylight Time)">19:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Yeah; something seems to be particular about paths</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Jun 27 2022 12:46:19 GMT-0700 (Pacific Daylight Time)">19:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">it almost seems like a pkg-config or meson inherent issue</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Jun 27 2022 12:46:26 GMT-0700 (Pacific Daylight Time)">19:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">but I don't understand meson, or how it composes these things so I feel like you're not getting enough help here</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Jun 27 2022 12:52:43 GMT-0700 (Pacific Daylight Time)">19:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">maybe i can just manually compile an example or 2  via <code>g++</code>?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Jun 27 2022 12:54:51 GMT-0700 (Pacific Daylight Time)">19:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">probably! For your own project, if you're not already into meson, you'd likely use something else (Makefiles/Cmake etc) to manage your builds, so not the worst idea to figure that out</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Jun 27 2022 13:08:43 GMT-0700 (Pacific Daylight Time)">20:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">What's the easiest way of copying all of one object's properties to another?</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Jun 27 2022 13:11:04 GMT-0700 (Pacific Daylight Time)">20:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Context: I've created an object with a given prototype, and before I return it, I want to clear the prototype. But the <code>JS_SetPrototype()</code> function has all sorts of warnings. So I thought it might be easier just to create a clone of that object, but without the prototype.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Jun 27 2022 13:14:44 GMT-0700 (Pacific Daylight Time)">20:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-12">liam_g</span>: What happens to the newly created object? Just dropped on the floor for GC?</p>
<p>Can you just create the object at the start will a null prototype?</p>
</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Jun 27 2022 13:19:32 GMT-0700 (Pacific Daylight Time)">20:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">I need the prototype in the middle though.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Jun 27 2022 13:20:15 GMT-0700 (Pacific Daylight Time)">20:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">I know this sounds fishy. Maybe there's another way of doing what I'm trying to do. But if there's a simple way of copying, it might work.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Jun 27 2022 13:22:24 GMT-0700 (Pacific Daylight Time)">20:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Why do you need the prototype at all?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Jun 27 2022 13:23:23 GMT-0700 (Pacific Daylight Time)">20:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">(To your question though, there's <a href="https://searchfox.org/mozilla-central/source/js/src/jsfriendapi.h#175-176">this </a> which will do what you want I suspect)</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Jun 27 2022 13:24:09 GMT-0700 (Pacific Daylight Time)">20:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">If you want to call a method on an object, you can always use <code><a href="http://theProto.method.call">theProto.method.call</a>(yourObject, some, arguments)</code></td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Jun 27 2022 13:25:00 GMT-0700 (Pacific Daylight Time)">20:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">(Although that could run into problems depending on what those methods are doing, and whether they expect the object to have other methods available)</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Jun 27 2022 13:26:48 GMT-0700 (Pacific Daylight Time)">20:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> If you want to call a method on an object, you can always use <code><a href="http://theProto.method.call">theProto.method.call</a>(yourObject, some, arguments)</code></blockquote></mx-reply>Is this Javascript code or C++ / Spidermonkey code?</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Mon Jun 27 2022 13:27:25 GMT-0700 (Pacific Daylight Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">JS</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Mon Jun 27 2022 13:29:45 GMT-0700 (Pacific Daylight Time)">20:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">I'm working on embedding Spidermonkey into an audio application. My use case is a bit unusual, and I'm using the prototype in a bit of a non-standard way.</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Mon Jun 27 2022 13:30:03 GMT-0700 (Pacific Daylight Time)">20:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">The equivalent in C++ would be something like <a href="https://searchfox.org/mozilla-central/source/js/public/CallAndConstruct.h#68-72">JS_CallFunction</a></td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Mon Jun 27 2022 13:31:54 GMT-0700 (Pacific Daylight Time)">20:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">(But this is just me guessing about what you are using the prototype for)</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Mon Jun 27 2022 13:34:33 GMT-0700 (Pacific Daylight Time)">20:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Basically, in my app, there is a hierarchy of special objects called Cells which I'm implementing as JSProxies. Each Cell has its parent object set as the prototype. This is something that I'm implementing in C++, and the user will not be able to change it in JS. The idea is that when the user looks up a property in a Cell that doesn't exist in that Cell, it will (always) search in all parent Cells also, because the prototype chain matches the Cell hierarchy.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Mon Jun 27 2022 13:35:51 GMT-0700 (Pacific Daylight Time)">20:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">If you're not exposing an object to JS before changing its prototype, then the big warnings on JS_Prototype shouldn't apply</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Mon Jun 27 2022 13:36:12 GMT-0700 (Pacific Daylight Time)">20:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Oh, that is good to know.</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Mon Jun 27 2022 13:36:18 GMT-0700 (Pacific Daylight Time)">20:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Unless you're changing the prototype of something that is already a prototype for something else</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Mon Jun 27 2022 13:37:04 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Right.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Mon Jun 27 2022 13:37:11 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">I think that answers my question.</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Mon Jun 27 2022 13:37:43 GMT-0700 (Pacific Daylight Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Note also that proxies are themselves kind of slow</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Mon Jun 27 2022 13:38:10 GMT-0700 (Pacific Daylight Time)">20:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">So if you can find a way to solve your problem that doesn't use them, that might be good for performance</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Mon Jun 27 2022 13:38:19 GMT-0700 (Pacific Daylight Time)">20:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">But it's probably best to get something working and then measure</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Mon Jun 27 2022 13:38:37 GMT-0700 (Pacific Daylight Time)">20:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">yeah, but it's much smoother programming than the other method using virtual functions.</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Mon Jun 27 2022 13:39:33 GMT-0700 (Pacific Daylight Time)">20:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Thanks for the warning though. I'll keep it in mind.</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Mon Jun 27 2022 13:44:21 GMT-0700 (Pacific Daylight Time)">20:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Since you know about proxies, maybe you can help me with another question. When is the BaseProxyHandler::enter() virtual method called? I had assumed that it was called before any get / set operation on the proxy, but this doesn't seem to be the case. And in fact, I haven't yet found any conditions under which it gets called.</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Mon Jun 27 2022 14:06:39 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Not super familiar with that code, but it looks like it's used for implementing security boundaries</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Mon Jun 27 2022 14:07:29 GMT-0700 (Pacific Daylight Time)">21:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">You can see that in <code>AutoEnterPolicy</code> <a href="https://searchfox.org/mozilla-central/source/js/public/Proxy.h#612-614">here</a>, we only call the <code>enter</code> method if the <code>hasSecurityPolicy</code> <a href="https://searchfox.org/mozilla-central/source/js/public/Proxy.h#190-196">flag</a> is set</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Mon Jun 27 2022 15:16:16 GMT-0700 (Pacific Daylight Time)">22:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">I see. So if I'm not using security boundaries I can ignore it then.</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Mon Jun 27 2022 15:16:23 GMT-0700 (Pacific Daylight Time)">22:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@liam_g:mozilla.org">liam_g</span>&gt;</div></td><td class="msg-cell">Thanks for your help!</td></tr>

</tbody></table></div></div></div>
</body></html>