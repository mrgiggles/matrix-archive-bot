<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-01-10</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-01-10<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-01-09" class="nav-link"><span>prev</span></a>
<a href="2022-01-11" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Jan 10 2022 02:29:16 GMT-0800 (Pacific Standard Time)">10:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">wraitii</span>: Trace-logger was not updated in a long time, and I do not tihnk any of us are still using it.  <code>--enable-arm64-fjcvtzs</code> is safe iff you know for sure that the target implement this instruction. On ARM Mac it is safe to enable it by default.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Jan 10 2022 02:34:58 GMT-0800 (Pacific Standard Time)">10:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">decoder</span>: <a href="https://pypi.org/project/FuzzManager/">https://pypi.org/project/FuzzManager/</a> I guess someone forgot to copy &amp; paste the README.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Jan 10 2022 02:56:27 GMT-0800 (Pacific Standard Time)">10:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@decoder:mozilla.org">decoder</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">nbp</span>: thx, ill mention it to truber</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Jan 10 2022 02:56:29 GMT-0800 (Pacific Standard Time)">10:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@decoder:mozilla.org">decoder</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">truber</span>: ^^</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Jan 10 2022 04:58:11 GMT-0800 (Pacific Standard Time)">12:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-12">wraitii</span>: Trace-logger was not updated in a long time, and I do not tihnk any of us are still using it.  <code>--enable-arm64-fjcvtzs</code> is safe iff you know for sure that the target implement this instruction. On ARM Mac it is safe to enable it by default.</blockquote></mx-reply>Ok, makes sense. I indeed noted the trace-logger wasn't enabled still</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Jan 10 2022 04:58:49 GMT-0800 (Pacific Standard Time)">12:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Is there any way for an embedder to profile the JS code in the engine? We're using some manual profiling (essentially calling C++ code that times stuff), but this is opt-in, somewhat inefficient, and doesn't give us that much information</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Jan 10 2022 04:59:03 GMT-0800 (Pacific Standard Time)">12:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Ideally we'd have data on on things causing JIT bailouts</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Jan 10 2022 05:01:59 GMT-0800 (Pacific Standard Time)">13:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">JIT bailout can be logged by IONFLAGS environment variable. see <a href="https://searchfox.org/mozilla-central/rev/b3933df6e119bd6caf5d9e5868670348ec26dee3/js/moz.configure#413-417">https://searchfox.org/mozilla-central/rev/b3933df6e119bd6caf5d9e5868670348ec26dee3/js/moz.configure#413-417</a> and <a href="https://searchfox.org/mozilla-central/rev/b3933df6e119bd6caf5d9e5868670348ec26dee3/js/src/jit/JitSpewer.cpp#338-387">https://searchfox.org/mozilla-central/rev/b3933df6e119bd6caf5d9e5868670348ec26dee3/js/src/jit/JitSpewer.cpp#338-387</a></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Jan 10 2022 05:03:52 GMT-0800 (Pacific Standard Time)">13:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">does that just output to stdout ? I don't believe I've found any sort of documentation for these kind of functions unfortunately</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Jan 10 2022 05:04:42 GMT-0800 (Pacific Standard Time)">13:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">stderr I think</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Jan 10 2022 05:05:39 GMT-0800 (Pacific Standard Time)">13:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/rev/b3933df6e119bd6caf5d9e5868670348ec26dee3/js/src/jit/JitSpewer.cpp#514-523">https://searchfox.org/mozilla-central/rev/b3933df6e119bd6caf5d9e5868670348ec26dee3/js/src/jit/JitSpewer.cpp#514-523</a></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Jan 10 2022 05:06:08 GMT-0800 (Pacific Standard Time)">13:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Right, guess I'll experiment with that</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Jan 10 2022 05:06:25 GMT-0800 (Pacific Standard Time)">13:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">it does seem like with the right flag we can get some useful information</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Jan 10 2022 05:50:52 GMT-0800 (Pacific Standard Time)">13:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">For profiling in general there is the perf command on Linux, and some configure flag to enable some instrumentation in SpiderMonkey. However, I do not tihnk it is easy to figure out the mapping with JS code.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Jan 10 2022 05:51:41 GMT-0800 (Pacific Standard Time)">13:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">I do not know how hard it would be to create a Gecko-profiler like, or if it can be embedded as well, probably really hard.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Jan 10 2022 05:52:04 GMT-0800 (Pacific Standard Time)">13:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">I saw some stuff for Instruments on macOS but it seems Apple dropped support for the library at some point</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Jan 10 2022 05:53:02 GMT-0800 (Pacific Standard Time)">13:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Running Instruments I see time spent in addresses (which are obviously JIT-ed code), but obviously can't really map those to JS files</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Jan 10 2022 05:53:24 GMT-0800 (Pacific Standard Time)">13:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">basically <em>some</em> way to get a rough idea of "this function is slow" would be great</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Jan 10 2022 05:55:58 GMT-0800 (Pacific Standard Time)">13:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">I've forwarded the question about embedding the Gecko profiler without Gecko to <a href="https://matrix.to/#/#profiler:mozilla.org">#profiler:mozilla.org</a> room.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Jan 10 2022 06:13:21 GMT-0800 (Pacific Standard Time)">14:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">wraitii</span>: From what I've been told it might be easier than I thought initialy. Also you might have a look at an old patch from <span class="nick-10">jandem</span> <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1511370">https://bugzilla.mozilla.org/show_bug.cgi?id=1511370</a></td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Jan 10 2022 06:23:51 GMT-0800 (Pacific Standard Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">for what it's worth I tried enabled MOZ_GECKO_PROFILER but ran into some issues - overall didn't get it to work, but I'm not sure what is needed to get data. Can look into that</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Jan 10 2022 06:23:57 GMT-0800 (Pacific Standard Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">maybe IONFLAGS will provide some worthy data</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Jan 10 2022 06:29:32 GMT-0800 (Pacific Standard Time)">14:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@wes:mozilla.org">wes</span>&gt;</div></td><td class="msg-cell">Sun at one point added dtrace probes for profiling the engine.  Code name "helper monkey".  Should work on Mac/Linux these days as dtrace has been ported outward.  Would be awesome to see that rejuvinated.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Jan 10 2022 06:29:36 GMT-0800 (Pacific Standard Time)">14:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell"><p>Question: We ran into a situation where the old SpiderMonkey (1.8.5) ran to completion on a test but JS78 barfs trying to use simple regular expressions.</p>
<p>We can 'fix' it by calling JS_SetNativeStackQuota and choosing <strong>someNumber</strong> but could use some guidance about what <strong>somenumber</strong> should be.<br>And wondering about this code throwing this error:</p>
<p>const str1 = "Check this sentence for non-whitespace characters";<br>const patt1 = /\S/g; // too much recursion</p>
</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Jan 10 2022 06:34:25 GMT-0800 (Pacific Standard Time)">14:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">chaircrusher</span>: here's example consumer of the API in Firefox <a href="https://searchfox.org/mozilla-central/rev/b3933df6e119bd6caf5d9e5868670348ec26dee3/js/xpconnect/src/XPCJSContext.cpp#1154-1287">https://searchfox.org/mozilla-central/rev/b3933df6e119bd6caf5d9e5868670348ec26dee3/js/xpconnect/src/XPCJSContext.cpp#1154-1287</a></td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Jan 10 2022 06:35:19 GMT-0800 (Pacific Standard Time)">14:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">I recall we used the trace profiler at some point in the past, but that generated so much data it wasn't even that usable. But yeah our target is mostly getting an idea of what gets jit-compiled, what causes bailouts, stuff like that. For the high-level stuff, our own tracing profiler is generally good enough, but low-level optimisation is harder to do</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Mon Jan 10 2022 06:35:26 GMT-0800 (Pacific Standard Time)">14:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">chaircrusher</span>: also, about the latter part, is that the entire code?  or you have some more code after it that performs RegExp execution?</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Mon Jan 10 2022 06:39:40 GMT-0800 (Pacific Standard Time)">14:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">@arai It barfs actualy on str1.match(patt1) </td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Mon Jan 10 2022 06:41:02 GMT-0800 (Pacific Standard Time)">14:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">const str1 = "Check this sentence for non-whitespace characters";
const patt1 = /\S/g; // too much recursion
var result1 = str1.match(patt1); // this is the line that provokes the error
print_stdout('Done!\n');</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Mon Jan 10 2022 06:42:58 GMT-0800 (Pacific Standard Time)">14:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">which OS and architecture are you using?</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Mon Jan 10 2022 06:43:12 GMT-0800 (Pacific Standard Time)">14:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">x86_64/RHEL8</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Mon Jan 10 2022 06:44:47 GMT-0800 (Pacific Standard Time)">14:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I don't think it's normal.  with the <a href="https://searchfox.org/mozilla-central/rev/b3933df6e119bd6caf5d9e5868670348ec26dee3/js/src/vm/JSContext.cpp#156-169">default stack quota</a>, it doesn't hit too much recursion</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Mon Jan 10 2022 06:45:15 GMT-0800 (Pacific Standard Time)">14:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">This is in a CGI that embeds SpiderMonkey. We're currently on JS78</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Mon Jan 10 2022 06:47:14 GMT-0800 (Pacific Standard Time)">14:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">have you modified JIT compiler option for RegExp ?</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Mon Jan 10 2022 06:47:52 GMT-0800 (Pacific Standard Time)">14:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><code>JS_SetGlobalJitCompilerOption</code> with <code>JSJITCOMPILER_NATIVE_REGEXP_ENABLE</code></td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Mon Jan 10 2022 06:48:11 GMT-0800 (Pacific Standard Time)">14:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">So I don't know what's normal, or default for stack allocation, or why regex handling barfs the stack. </td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Mon Jan 10 2022 06:48:43 GMT-0800 (Pacific Standard Time)">14:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">Well that sounds like a better solution than picking a number out of the air to use for the stack quota</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Mon Jan 10 2022 06:48:50 GMT-0800 (Pacific Standard Time)">14:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">might be nice to add breakpoint to the too much recursion error and see the backtrace</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Mon Jan 10 2022 06:49:06 GMT-0800 (Pacific Standard Time)">14:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">And we don't set any Jit compilation options</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Mon Jan 10 2022 06:53:17 GMT-0800 (Pacific Standard Time)">14:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">oh, about the regexp on 78, there are 2 engines and I think it can be selectable with build flag <code>--disable-new-regexp</code></td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Mon Jan 10 2022 06:54:28 GMT-0800 (Pacific Standard Time)">14:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, unless you've added the configure parameter, it uses the new one in <code>js/src/new-regexp</code></td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Mon Jan 10 2022 06:55:16 GMT-0800 (Pacific Standard Time)">14:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">and the "too much recursion" would happen here <a href="https://searchfox.org/mozilla-esr78/rev/3c633b1a0994f380032a616eced632398354d83e/js/src/new-regexp/regexp-parser.cc#76">https://searchfox.org/mozilla-esr78/rev/3c633b1a0994f380032a616eced632398354d83e/js/src/new-regexp/regexp-parser.cc#76</a></td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Mon Jan 10 2022 06:56:03 GMT-0800 (Pacific Standard Time)">14:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">Thanks</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Mon Jan 10 2022 06:56:28 GMT-0800 (Pacific Standard Time)">14:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if that line hits, looking into <code>StackLimitCheck</code> and internal will tell you how it hits the limit</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Mon Jan 10 2022 06:57:13 GMT-0800 (Pacific Standard Time)">14:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">Fun fact: I used find to search the Mozilla source and it didn't find that preprocessor constant:

 /develop/pagewiz/build/js $ find . -type f -print0 | xargs -0 grep JSJITCOMPILER_NATIVE_REGEXP_ENABLE
./js/src/jsapi.cpp:    case JSJITCOMPILER_NATIVE_REGEXP_ENABLE:
./js/src/jsapi.cpp:    case JSJITCOMPILER_NATIVE_REGEXP_ENABLE:
./js/xpconnect/src/XPCJSContext.cpp:  JS_SetGlobalJitCompilerOption(cx, JSJITCOMPILER_NATIVE_REGEXP_ENABLE,
</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Mon Jan 10 2022 06:58:46 GMT-0800 (Pacific Standard Time)">14:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">other fun fact, no comments or documentation in jsapi on the options or what they mean</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Mon Jan 10 2022 07:04:22 GMT-0800 (Pacific Standard Time)">15:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">OK figured that out, it's defined in a macro</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Mon Jan 10 2022 07:08:50 GMT-0800 (Pacific Standard Time)">15:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">we're trying to compile ESR91 with VS17, it seems to think that JS::Error isn't trivially copyable/destructible. Any clue where that would be defined ? </td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Mon Jan 10 2022 07:10:04 GMT-0800 (Pacific Standard Time)">15:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/search?q=JS%3A%3AError">https://searchfox.org/mozilla-central/search?q=JS%3A%3AError</a></td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Mon Jan 10 2022 07:42:13 GMT-0800 (Pacific Standard Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@denschub:mozilla.org">denschub</span>&gt;</div></td><td class="msg-cell">Hey everyone! I've just been looking into a very interesting WebCompat issue... caused by <code>Array.prototype.sort</code>. As it turns out, the parameters for the compare function are swapped in Chrome vs. Firefox, see this screenshot (Firefox left, Chrome right)</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Mon Jan 10 2022 07:42:24 GMT-0800 (Pacific Standard Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@denschub:mozilla.org">denschub</span>&gt;</div></td><td class="msg-cell">... is this even part of any spec?</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Mon Jan 10 2022 07:49:03 GMT-0800 (Pacific Standard Time)">15:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">the sort algorithm and the parameter order is totally implementation dependent</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Mon Jan 10 2022 07:49:29 GMT-0800 (Pacific Standard Time)">15:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><a href="https://tc39.es/ecma262/#sec-array.prototype.sort">https://tc39.es/ecma262/#sec-array.prototype.sort</a></td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Mon Jan 10 2022 07:49:41 GMT-0800 (Pacific Standard Time)">15:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><blockquote>
<ol start="8">
<li>Sort items using an implementation-defined sequence of calls to SortCompare.</li>
</ol>
</blockquote>
</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Mon Jan 10 2022 07:50:21 GMT-0800 (Pacific Standard Time)">15:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@denschub:mozilla.org">denschub</span>&gt;</div></td><td class="msg-cell">fun. :)</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Mon Jan 10 2022 07:51:18 GMT-0800 (Pacific Standard Time)">15:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@denschub:mozilla.org">denschub</span>&gt;</div></td><td class="msg-cell">well, okay then, I'll write a nice email to that site's developers. thanks for the info!</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Mon Jan 10 2022 08:01:06 GMT-0800 (Pacific Standard Time)">16:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@annevk:mozilla.org">annevk</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">denschub</span>: FWIW, it's worth keeping track of how often we run into this as sometimes implementation-defined just needs to be standardized one way or another</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Mon Jan 10 2022 08:02:04 GMT-0800 (Pacific Standard Time)">16:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@denschub:mozilla.org">denschub</span>&gt;</div></td><td class="msg-cell">this is the first time in my career that I've ever seen this issue (unfortunately in a medium-traffic application), so it's certainly not widespread. and from reading their code, this is clearly just a bug in their code that just so happened not to fail in Chrome, but oh well</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Mon Jan 10 2022 08:02:18 GMT-0800 (Pacific Standard Time)">16:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@denschub:mozilla.org">denschub</span>&gt;</div></td><td class="msg-cell">we'll certainly make some more noise if things happen to come up more than once :)</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Mon Jan 10 2022 08:27:02 GMT-0800 (Pacific Standard Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> we'll certainly make some more noise if things happen to come up more than once :)</blockquote></mx-reply>While this is implementation defined, if we find that it is causing issues then this can be adjusted in the spec as well</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Mon Jan 10 2022 08:27:24 GMT-0800 (Pacific Standard Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">Sort is a bit tricky though</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Mon Jan 10 2022 08:27:48 GMT-0800 (Pacific Standard Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">but we updated it recently to make it a constant sort</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Mon Jan 10 2022 08:27:59 GMT-0800 (Pacific Standard Time)">16:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@denschub:mozilla.org">denschub</span>&gt;</div></td><td class="msg-cell">I'm happy to file an issue if you want one filed, but given this is only affecting one application, I'm not sure if it's worth spending that much time on it.</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Mon Jan 10 2022 08:28:34 GMT-0800 (Pacific Standard Time)">16:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i would say for now lets follow it but not file an issue -- if it crops up more, we may want to open an issue to investigate on the spec</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Mon Jan 10 2022 08:29:41 GMT-0800 (Pacific Standard Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">I'm not sure you can fix this without mandating a specific sorting algorithm, and I'm not convinced that would be a good thing</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Mon Jan 10 2022 08:29:49 GMT-0800 (Pacific Standard Time)">16:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">But maybe there's an intermediate guarantee we could make</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Mon Jan 10 2022 08:30:33 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I'm not sure you can fix this without mandating a specific sorting algorithm, and I'm not convinced that would be a good thing</blockquote></mx-reply>yeah, this is what makes it tricky</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Mon Jan 10 2022 08:30:54 GMT-0800 (Pacific Standard Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">This is amazing that the sort algorithm is not specified as the order of evaluation can clearly be defined by the implementation.</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Mon Jan 10 2022 08:31:40 GMT-0800 (Pacific Standard Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">Maybe we should create a fuzzy JS engine mode, which goes and evaluate everything differently where JS is unspecified.</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Mon Jan 10 2022 08:32:25 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">immediate reaction to that: sounds like a lot of work ;)</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Mon Jan 10 2022 08:32:30 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">but also could be funny</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Mon Jan 10 2022 08:32:53 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">but you can also identify it where the spec says implementation defined so</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Mon Jan 10 2022 08:32:55 GMT-0800 (Pacific Standard Time)">16:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">A quick-sort, insert-sort, merge-sort and heap-sort all have different evaluation orders …</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Mon Jan 10 2022 08:34:05 GMT-0800 (Pacific Standard Time)">16:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">Maybe this could be a fuzzy.js library … which is defined with the spec, to make sure that users who want to make cross-platform code can test what the spec claims.</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Mon Jan 10 2022 08:36:08 GMT-0800 (Pacific Standard Time)">16:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">that is kind of what test262 guarantees </td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Mon Jan 10 2022 08:36:12 GMT-0800 (Pacific Standard Time)">16:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">but this would fall outside of that (sorting) as it is implementation defined</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Mon Jan 10 2022 08:37:02 GMT-0800 (Pacific Standard Time)">16:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">test262 only tests what the spec asserts, but explicitly doesn't test behavior that is implementation defined or results from certain types of incorrect readings of the spec</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Mon Jan 10 2022 08:37:41 GMT-0800 (Pacific Standard Time)">16:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i need to find a better way to put this... i was playing around with "the test262 is a complete but unsound test of js" but it isn't quite right because its not about soundness</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Mon Jan 10 2022 08:38:40 GMT-0800 (Pacific Standard Time)">16:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">maybe someone came up with a better characterization, i was trying to explain it to students (and that language doesn't really work there)</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Mon Jan 10 2022 08:39:30 GMT-0800 (Pacific Standard Time)">16:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">for example, you don't test in test262 if someone incorrectly exposed behavior that shouldn't be exposed</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Mon Jan 10 2022 08:49:33 GMT-0800 (Pacific Standard Time)">16:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">"test262 is complete within the boundary defined by the spec" ?</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Mon Jan 10 2022 08:49:53 GMT-0800 (Pacific Standard Time)">16:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yeah that works actually...</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Mon Jan 10 2022 08:50:03 GMT-0800 (Pacific Standard Time)">16:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">how would you communicated "but it doesn't test all this weird stuff"</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Mon Jan 10 2022 08:50:08 GMT-0800 (Pacific Standard Time)">16:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">"[…] within the well specified boundaries of […]"</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Mon Jan 10 2022 08:51:04 GMT-0800 (Pacific Standard Time)">16:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">test 262 will accept all approximations of js...</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Mon Jan 10 2022 08:52:55 GMT-0800 (Pacific Standard Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">"test262 should valide all variants of ECMAScript modulo the variability induced by part which are specific to each implementation"</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Mon Jan 10 2022 08:56:03 GMT-0800 (Pacific Standard Time)">16:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">" plus monkey patching"</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Mon Jan 10 2022 09:04:58 GMT-0800 (Pacific Standard Time)">17:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell">Looking for ideas with settings/configuring SM. We currently have static <a href="https://searchfox.org/mozilla-central/source/js/src/jit/x86-shared/Assembler-x86-shared.cpp#206">avxEnabled</a> . With jsshell it was easy: just add <code>--enable-avx</code> and it will tweak the static var via <code>SetAvxEnable</code></td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Mon Jan 10 2022 09:07:06 GMT-0800 (Pacific Standard Time)">17:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell">Now looking for something, I hope temporary, for the browser. What will be the right place to stick this <code>SetAvxEnable</code> call? Or, perhaps, refactor all <code>HasAvx</code> to cary some state to the masm?</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Mon Jan 10 2022 09:44:14 GMT-0800 (Pacific Standard Time)">17:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">yury</span>: <a href="https://searchfox.org/mozilla-central/source/js/src/vm/Initialization.cpp#212">https://searchfox.org/mozilla-central/source/js/src/vm/Initialization.cpp#212</a> maybe?</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Mon Jan 10 2022 09:46:17 GMT-0800 (Pacific Standard Time)">17:46</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-14" title="@yury:mozilla.org">yury</span></div></td><td class="msg-cell">checking if StaticPrefs are available there</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Mon Jan 10 2022 09:47:03 GMT-0800 (Pacific Standard Time)">17:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">krosylight</span>: <span class="nick-2">mgaudet</span> I just uploaded my signal handling patch for pipeTo. We seem to be passing all pipeTo related tests except one under WPT streams/piping.</td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Mon Jan 10 2022 09:48:12 GMT-0800 (Pacific Standard Time)">17:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> * checking if StaticPrefs are available there</blockquote></mx-reply>probably not, <span class="nick-15">tcampbell</span> might know better about static prefs and JS_Init.</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Mon Jan 10 2022 10:14:25 GMT-0800 (Pacific Standard Time)">18:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@krosylight:mozilla.org">krosylight</span>&gt;</div></td><td class="msg-cell">I guess this is probably spidermonkey question: How can I run a sandbox in https context where [SecureContext] things are available, for an xpcshell test?</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Mon Jan 10 2022 10:29:13 GMT-0800 (Pacific Standard Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: Do you recall <a href="https://searchfox.org/mozilla-central/source/js/src/vm/JSScript.h#421-455">PinnedUnits</a>, would it be ok to add a second one for concurrent off-thread delazification uses?</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Mon Jan 10 2022 10:29:58 GMT-0800 (Pacific Standard Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@krosylight:mozilla.org">krosylight</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I guess this is probably spidermonkey question: How can I run a sandbox in https context where [SecureContext] things are available, for an xpcshell test?</blockquote></mx-reply>Got it, <code>forceSecureContext: true</code>,</td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Mon Jan 10 2022 10:33:00 GMT-0800 (Pacific Standard Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">nbp</span>: I do not remember that, I'll take a look....</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Mon Jan 10 2022 10:36:18 GMT-0800 (Pacific Standard Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">nbp</span> (or anyone who may know), we have an interesting problem in Node.js of not knowing what error to throw for <code>structuredClone()</code>, <code>atob()</code>, and <code>btoa()</code> w/o any arguments and would like to align w/ browsers, but are unsure where this is specified. Am wondering what we should do if there is no specification for this.. <a href="https://github.com/nodejs/node/issues/41450">https://github.com/nodejs/node/issues/41450</a></td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Mon Jan 10 2022 10:38:01 GMT-0800 (Pacific Standard Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@usharma:igalia.com">ryzokuken</span>&gt;</div></td><td class="msg-cell">There must be some spec text in whatwg? </td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Mon Jan 10 2022 10:38:08 GMT-0800 (Pacific Standard Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">DerekNonGeneric</span>: it's specified by WebIDL as the last comment points out correctly</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Mon Jan 10 2022 10:39:44 GMT-0800 (Pacific Standard Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">nbp: So it wouldn't be LIFO any more if there are two threads, right?  I guess why you said 'add a second one'.  If we don't need the stack of pinned uses for anything maybe this could be done more simply with a counter.</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Mon Jan 10 2022 10:39:47 GMT-0800 (Pacific Standard Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">evilpie</span>: does Web IDL specify behavior for those utility methods? I don't think those are governed by that spec</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Mon Jan 10 2022 10:40:20 GMT-0800 (Pacific Standard Time)">18:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">It's specified in WebIDL here: <a href="https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope">https://html.spec.whatwg.org/multipage/webappapis.html#windoworworkerglobalscope</a></td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Mon Jan 10 2022 10:50:06 GMT-0800 (Pacific Standard Time)">18:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">evilpie</span>, thanks for that link (had not seen that yet); it looks like Deno's implementation is wrong then since they are throwing <code>DOMException</code>, eh?</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Mon Jan 10 2022 10:50:52 GMT-0800 (Pacific Standard Time)">18:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">DerekNonGeneric</span>: There is no standardization on the error content, at best this would be the error type.</td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Mon Jan 10 2022 10:51:42 GMT-0800 (Pacific Standard Time)">18:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: Right, it would be multiple Lifo.</td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Mon Jan 10 2022 10:53:17 GMT-0800 (Pacific Standard Time)">18:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: The comment suggested that the GC might change the underlying pointer to the script source and that the PinnedUnits were used to abstract over this possibly-mutated pointer.</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Mon Jan 10 2022 10:53:49 GMT-0800 (Pacific Standard Time)">18:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">So, we probably need some references to these PinnedUnit, to patch them, I would expect.</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Mon Jan 10 2022 10:54:29 GMT-0800 (Pacific Standard Time)">18:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">ScriptSource isn't a GC thing so the GC will not move it </td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Mon Jan 10 2022 10:55:28 GMT-0800 (Pacific Standard Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">I can't see a use of the stack other than to check whether it's empty, although I am not familiar with this at all</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Mon Jan 10 2022 10:59:49 GMT-0800 (Pacific Standard Time)">18:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">So far the searchfox only show case the source compression, which trigger on the last PinnedUnit destruction.</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Mon Jan 10 2022 11:00:29 GMT-0800 (Pacific Standard Time)">19:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">In which case the atomic counter will do fine. Thanks</td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Mon Jan 10 2022 11:47:30 GMT-0800 (Pacific Standard Time)">19:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@dheitbrink:mozilla.org">dheitbrink</span>&gt;</div></td><td class="msg-cell">If I set 
JSJITCOMPILER_NATIVE_REGEXP_ENABLE, to false, does any one know what this falls back on exactly for regex? </td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Mon Jan 10 2022 11:49:08 GMT-0800 (Pacific Standard Time)">19:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">dheitbrink</span>: It will still use the same regexp engine, but it won't compile any code. It will use the interpreter instead.</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Mon Jan 10 2022 11:51:13 GMT-0800 (Pacific Standard Time)">19:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">For reasonably sized inputs (&lt;1000 characters), the first 10 executions of a given regexp are done in the interpreter before we decide to JIT compile it, so if you're seeing a problem the first time you execute a regexp, it's unlikely that turning off the compiler will do anything</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Mon Jan 10 2022 11:52:16 GMT-0800 (Pacific Standard Time)">19:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@dheitbrink:mozilla.org">dheitbrink</span>&gt;</div></td><td class="msg-cell">ok thanks. </td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Mon Jan 10 2022 11:59:23 GMT-0800 (Pacific Standard Time)">19:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">If you want to try out the old engine, there's a <code>--disable-new-regexp</code> <a href="https://searchfox.org/mozilla-esr78/source/js/moz.configure#622">configure option</a> in esr78</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Mon Jan 10 2022 11:59:49 GMT-0800 (Pacific Standard Time)">19:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">But that isn't available for anything past esr78.</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Mon Jan 10 2022 14:28:08 GMT-0800 (Pacific Standard Time)">22:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">Hey there</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Mon Jan 10 2022 14:30:28 GMT-0800 (Pacific Standard Time)">22:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">We're having some troubles compiling  0 A.D. with ESR31 on windows, did the minimum version of Visual Studio change? We're using v141_xp (2017)</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Mon Jan 10 2022 14:31:51 GMT-0800 (Pacific Standard Time)">22:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">Also created this ticket because it prevented from building from a tarball at all on windows <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1749306">https://bugzilla.mozilla.org/show_bug.cgi?id=1749306</a></td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Mon Jan 10 2022 14:34:31 GMT-0800 (Pacific Standard Time)">22:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">My bad *91</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Mon Jan 10 2022 14:35:21 GMT-0800 (Pacific Standard Time)">22:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">stan</span>: There's a note here: <a href="https://firefox-source-docs.mozilla.org/setup/windows_build.html">https://firefox-source-docs.mozilla.org/setup/windows_build.html</a></td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Mon Jan 10 2022 14:35:42 GMT-0800 (Pacific Standard Time)">22:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Although it looks like that was added in the 96 timeframe: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1740167">https://bugzilla.mozilla.org/show_bug.cgi?id=1740167</a></td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Mon Jan 10 2022 14:37:05 GMT-0800 (Pacific Standard Time)">22:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">Right so VS2022 or nothing ^^ That's gonna be fun </td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Mon Jan 10 2022 14:38:43 GMT-0800 (Pacific Standard Time)">22:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Reading the comments on the bug, it looks like 2019 should still work for now, it's just harder to find the download. I would be a little surprised if anything that requires 2022 was backported to esr.</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Mon Jan 10 2022 14:38:57 GMT-0800 (Pacific Standard Time)">22:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">But this is very much not my area of expertise.</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Mon Jan 10 2022 14:39:26 GMT-0800 (Pacific Standard Time)">22:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">Thanks anyway, even updating to 2019 will require some changes on our side</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Mon Jan 10 2022 14:39:57 GMT-0800 (Pacific Standard Time)">22:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">There was some weird compilation failure on linux too <a href="https://code.wildfiregames.com/D4428#188935">https://code.wildfiregames.com/D4428#188935</a> </td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Mon Jan 10 2022 14:40:12 GMT-0800 (Pacific Standard Time)">22:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">But might be just noise</td></tr>
  <tr class="msg" id="L130"><td class="ts-cell"><a class="ts" href="#L130" alt="Mon Jan 10 2022 14:46:38 GMT-0800 (Pacific Standard Time)">22:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">I should add: we dropped support for MSVC at some point, so now you have to use clang to compile on Windows. I might be able to dig up the timeframe, if that's relevant for you.</td></tr>
  <tr class="msg" id="L131"><td class="ts-cell"><a class="ts" href="#L131" alt="Mon Jan 10 2022 14:47:58 GMT-0800 (Pacific Standard Time)">22:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">Should have mentioned it's after a build of spidermonkey the game fails with the headers</td></tr>
  <tr class="msg" id="L132"><td class="ts-cell"><a class="ts" href="#L132" alt="Mon Jan 10 2022 14:48:34 GMT-0800 (Pacific Standard Time)">22:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell"><a href="https://pastebin.com/eLXQKS70">https://pastebin.com/eLXQKS70</a></td></tr>
  <tr class="msg" id="L133"><td class="ts-cell"><a class="ts" href="#L133" alt="Mon Jan 10 2022 14:48:46 GMT-0800 (Pacific Standard Time)">22:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">This is the bug where we removed MSVC support: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1512504">https://bugzilla.mozilla.org/show_bug.cgi?id=1512504</a></td></tr>
  <tr class="msg" id="L134"><td class="ts-cell"><a class="ts" href="#L134" alt="Mon Jan 10 2022 14:50:48 GMT-0800 (Pacific Standard Time)">22:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">and yet, there are things like bug 1700585. I was under the impression that we were no longer supporting building with MSVC, but we were still trying to maintain header compatibility with MSVC so you could compile with MSVC and link with a clang-built library. But I could be wrong.</td></tr>
  <tr class="msg" id="L135"><td class="ts-cell"><a class="ts" href="#L135" alt="Mon Jan 10 2022 14:50:50 GMT-0800 (Pacific Standard Time)">22:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1700585">https://bugzil.la/1700585</a> — NEW (nobody) — Suggestion: Add tier 2 latest-MSVC/gcc/clang build tasks</td></tr>
  <tr class="msg" id="L136"><td class="ts-cell"><a class="ts" href="#L136" alt="Mon Jan 10 2022 14:52:45 GMT-0800 (Pacific Standard Time)">22:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">If that's the case that's good news for us ^^</td></tr>
  <tr class="msg" id="L137"><td class="ts-cell"><a class="ts" href="#L137" alt="Mon Jan 10 2022 14:54:49 GMT-0800 (Pacific Standard Time)">22:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">stan</span>: Are you updating from an older ESR?</td></tr>
  <tr class="msg" id="L138"><td class="ts-cell"><a class="ts" href="#L138" alt="Mon Jan 10 2022 14:54:58 GMT-0800 (Pacific Standard Time)">22:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">Yeah 78.4</td></tr>
  <tr class="msg" id="L139"><td class="ts-cell"><a class="ts" href="#L139" alt="Mon Jan 10 2022 14:56:17 GMT-0800 (Pacific Standard Time)">22:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Looking at the error messages, it seems like you're hitting this assertion: <a href="https://searchfox.org/mozilla-esr91/source/mfbt/Result.h#206-207">https://searchfox.org/mozilla-esr91/source/mfbt/Result.h#206-207</a></td></tr>
  <tr class="msg" id="L140"><td class="ts-cell"><a class="ts" href="#L140" alt="Mon Jan 10 2022 14:56:41 GMT-0800 (Pacific Standard Time)">22:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">That's correct</td></tr>
  <tr class="msg" id="L141"><td class="ts-cell"><a class="ts" href="#L141" alt="Mon Jan 10 2022 14:56:42 GMT-0800 (Pacific Standard Time)">22:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Which was added in 83 as part of this bug: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1665927">https://bugzilla.mozilla.org/show_bug.cgi?id=1665927</a></td></tr>
  <tr class="msg" id="L142"><td class="ts-cell"><a class="ts" href="#L142" alt="Mon Jan 10 2022 14:56:53 GMT-0800 (Pacific Standard Time)">22:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Not sure what that means in practice</td></tr>
  <tr class="msg" id="L143"><td class="ts-cell"><a class="ts" href="#L143" alt="Mon Jan 10 2022 14:59:12 GMT-0800 (Pacific Standard Time)">22:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Maybe MSVC is having problems with this: <a href="https://searchfox.org/mozilla-esr78/source/mfbt/Result.h#265-281">https://searchfox.org/mozilla-esr78/source/mfbt/Result.h#265-281</a></td></tr>
  <tr class="msg" id="L144"><td class="ts-cell"><a class="ts" href="#L144" alt="Mon Jan 10 2022 15:06:37 GMT-0800 (Pacific Standard Time)">23:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">Could be because I didn't pass  <code>--with-visual-studio-version</code></td></tr>
  <tr class="msg" id="L145"><td class="ts-cell"><a class="ts" href="#L145" alt="Mon Jan 10 2022 15:07:14 GMT-0800 (Pacific Standard Time)">23:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell">Usually we use <code>--with-visual-studio-version=2017</code> But I only had 2022 installed with the 2017 toolset and that does not work.</td></tr>
  <tr class="msg" id="L146"><td class="ts-cell"><a class="ts" href="#L146" alt="Mon Jan 10 2022 15:08:11 GMT-0800 (Pacific Standard Time)">23:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@stan:mozilla.org">stan</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/0ad/0ad/blob/master/libraries/source/spidermonkey/build.sh#L45">https://github.com/0ad/0ad/blob/master/libraries/source/spidermonkey/build.sh#L45</a></td></tr>

</tbody></table></div></div></div>
</body></html>