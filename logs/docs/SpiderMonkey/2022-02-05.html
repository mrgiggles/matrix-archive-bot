<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-02-05</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-02-05<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-02-04" class="nav-link"><span>prev</span></a>
<a href="2022-02-07" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Feb 04 2022 16:01:24 GMT-0800 (Pacific Standard Time)">00:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gankra:mozilla.org">Gankra [she/they]</span>&gt;</div></td><td class="msg-cell">But yeah it just seems good to find out if there's like some established stuff in case it's Basically What You Wanted To Do Anyway and were going to do equivalent work that otherwise wouldn't have interoperated</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Feb 04 2022 16:06:10 GMT-0800 (Pacific Standard Time)">00:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gankra:mozilla.org">Gankra [she/they]</span>&gt;</div></td><td class="msg-cell"><p>it <em>does</em> appear that the RTlInstallFunctionTableCallback stuff <em>does</em> get stuffed in the minidump, so, in theory I think SpiderMonkey could like, generate DWARF unwinding tables that the minidump actually gets</p>
<p>But that sounds horrendously complicated and expensive and not actually a good idea</p>
</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Feb 04 2022 16:06:53 GMT-0800 (Pacific Standard Time)">00:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gankra:mozilla.org">Gankra [she/they]</span>&gt;</div></td><td class="msg-cell">(this does not mean that I won't glare at it and insist to myself that everything would be so much better if those dang spidermonkey devs would just emit CFI like everyone else)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Feb 04 2022 16:08:15 GMT-0800 (Pacific Standard Time)">00:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Oh, I'm sure each individual SM dev would agree with that statement, as long as they get to exempt themselves from the set of "those dang spidermonkey devs" doing the actual work to make it happen</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Feb 04 2022 16:08:27 GMT-0800 (Pacific Standard Time)">00:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gankra:mozilla.org">Gankra [she/they]</span>&gt;</div></td><td class="msg-cell">yuup</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Feb 04 2022 16:08:56 GMT-0800 (Pacific Standard Time)">00:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">(modulo concerns about runtime overhead, depending on exactly what we're talking about implementing)</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Feb 04 2022 16:10:14 GMT-0800 (Pacific Standard Time)">00:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">But I'll make you a deal: if you can talk Intel into adding a few more registers on 32 bit x86 so that we don't have to worry so much about register pressure, I'll do all the CFI stuff myself</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Feb 04 2022 16:13:05 GMT-0800 (Pacific Standard Time)">00:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gankra:mozilla.org">Gankra [she/they]</span>&gt;</div></td><td class="msg-cell">loll</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Feb 04 2022 16:15:08 GMT-0800 (Pacific Standard Time)">00:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gankra:mozilla.org">Gankra [she/they]</span>&gt;</div></td><td class="msg-cell">One thing that feels <em>so close</em> is that Microsoft <em>does</em> have a special flag for pages that are "Guard Pages" even though you could of course(?) implement the same functionality by just making the page have no permissions. So like they clearly see the value in being able to more semantically mark pages with their purpose. <em>sigh</em></td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Feb 04 2022 16:23:32 GMT-0800 (Pacific Standard Time)">00:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gankra:mozilla.org">Gankra [she/they]</span>&gt;</div></td><td class="msg-cell">I assume spidermonkey can at least <em>enumerate</em> the set of all JIT pages? Or is it actually too RAII for even that?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Feb 04 2022 16:30:44 GMT-0800 (Pacific Standard Time)">00:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gankra:mozilla.org">Gankra [she/they]</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">iain</span>: wanna be CC'd on this email to MS?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Feb 04 2022 16:34:28 GMT-0800 (Pacific Standard Time)">00:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Yeah, sure</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Feb 04 2022 16:35:14 GMT-0800 (Pacific Standard Time)">00:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">I think we can probably enumerate pages via the ExecutableAllocator</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Feb 04 2022 16:47:58 GMT-0800 (Pacific Standard Time)">00:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">The JS memory reporter probably iterates over JIT pages somewhere.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Feb 04 2022 17:41:31 GMT-0800 (Pacific Standard Time)">01:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gankra:mozilla.org">Gankra [she/they]</span>&gt;</div></td><td class="msg-cell">oh huh, luser pointed out that some code for specifically categorizing JIT crashes does exist: <a href="https://github.com/mozilla-services/minidump-stackwalk/blob/634f9624f5583521e79039e9d29b498f971a4fb4/minidump-stackwalk/jit-crash-categorize.cc">https://github.com/mozilla-services/minidump-stackwalk/blob/634f9624f5583521e79039e9d29b498f971a4fb4/minidump-stackwalk/jit-crash-categorize.cc</a></td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Feb 04 2022 17:42:11 GMT-0800 (Pacific Standard Time)">01:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gankra:mozilla.org">Gankra [she/they]</span>&gt;</div></td><td class="msg-cell">I don't know if this actually runs anywhere or is looked at by anything (I sure didn't port it to rust-minidump!)</td></tr>

</tbody></table></div></div></div>
</body></html>