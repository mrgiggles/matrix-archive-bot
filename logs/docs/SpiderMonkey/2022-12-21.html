<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-12-21</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-12-21<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-12-20" class="nav-link"><span>prev</span></a>
<a href="2022-12-23" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Dec 21 2022 01:20:53 GMT-0800 (Pacific Standard Time)">09:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">arai</span>: Thanks :)</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Dec 21 2022 01:56:30 GMT-0800 (Pacific Standard Time)">09:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">When I use JS_InitClass does ps, fs, static_ps and static_fs are copied or I should keep then alive ?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Dec 21 2022 02:05:56 GMT-0800 (Pacific Standard Time)">10:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jandem:mozilla.org">jandem|pto</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">gschwind</span>: I think they're only used by <code>JS_InitClass</code> to define properties on the object(s) and not used after the call returns. We typically use statically-allocated constant arrays for fs/ps though (similar to JSClass), but I don't think we depend on this atm</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Dec 21 2022 02:10:21 GMT-0800 (Pacific Standard Time)">10:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">jandem|pto</span>: Ok thanks, thus they are more convenient way to avoid to call JS_DefineFunction or JS_DefineProperty</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Dec 21 2022 02:14:22 GMT-0800 (Pacific Standard Time)">10:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jandem:mozilla.org">jandem|pto</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">gschwind</span>: yeah. You can also use ps/fs with <code>JS_DefineProperties</code> or <code>JS_DefineFunctions</code></td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Dec 21 2022 02:43:00 GMT-0800 (Pacific Standard Time)">10:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">If I understand correctly when a JSAPI function return false it also call JS_SetPendingException ?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Dec 21 2022 02:54:21 GMT-0800 (Pacific Standard Time)">10:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if the API receives <code>JSContext*</code>, in most case it sets pending exception</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Dec 21 2022 02:55:16 GMT-0800 (Pacific Standard Time)">10:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">there might be some exceptions, but such function should have a comment above the declaration</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Dec 21 2022 03:05:36 GMT-0800 (Pacific Standard Time)">11:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@ms2ger:igalia.com">Ms2ger ðŸ’‰ðŸ’‰ðŸ’‰</span>&gt;</div></td><td class="msg-cell">"some exceptions", huh. I see what you did there</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Dec 21 2022 08:09:30 GMT-0800 (Pacific Standard Time)">16:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">Can I have something like WeakRooted ? I would like to keep reference to an object that I may use sometime but avoiding global lookup every time</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Dec 21 2022 08:15:55 GMT-0800 (Pacific Standard Time)">16:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">As far as I understand Rooted&lt;T&gt; prevent the GC to move the object around or deleted, is it bad if I keep an object Rooted forever ?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Dec 21 2022 08:35:36 GMT-0800 (Pacific Standard Time)">16:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">gschwind</span>: the only problem would be that you'd need it to be on the stack the whole time, and that could be annoying depending on how you structure your program. But yes, that would be totally fine for an object you never want to delete.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Dec 21 2022 08:37:04 GMT-0800 (Pacific Standard Time)">16:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(and if the structure <em>is</em> a problem, then you can always use <code>PersistentRooted</code> instead. For things that you never want to die, you need to root them somehow, and both <code>Rooted</code> and <code>PersistentRooted</code> will serve that purpose.)</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Dec 21 2022 08:53:08 GMT-0800 (Pacific Standard Time)">16:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: My use case is that I want create js class and I want to keep the constructor until destruction of the runtime. Basically can I allocate it on Heap and keep it ? I also do not need that the constructor is available from global, even if user can reach it using Object.getPrototypeOf.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Dec 21 2022 08:57:35 GMT-0800 (Pacific Standard Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">When I says constructor I mean the JSObject that handle the JSFunction Constructor</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Dec 21 2022 08:57:43 GMT-0800 (Pacific Standard Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">yes, <code>Rooted</code> or <code>PersistentRooted</code> would work fine for that.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Dec 21 2022 08:59:41 GMT-0800 (Pacific Standard Time)">16:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">sometimes people will have several things like that, and will instead use a callback to trigger a <code>trace</code> function of some sort to be called that will go through and trace it all. But these days, the easiest way to register that callback is to use a <code>PersistentRooted&lt;YourStruct&gt;</code> so that it will call <code>YourStruct::trace()</code>.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Dec 21 2022 09:00:15 GMT-0800 (Pacific Standard Time)">17:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">but that's really no different than just having a bunch of <code>PersistentRooted&lt;JSObject*&gt;</code>s lying around somewhere.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Dec 21 2022 09:01:27 GMT-0800 (Pacific Standard Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">ok, In the document of PersistentRooted they write that "Note that you must not use an PersistentRooted in an object owned by a JS object". But in my case JSFunction construtor is held by JSFunction.prototype.constructor and JSFunction.prototype will be held by instance of those class. thus I'am puzzled</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Dec 21 2022 09:03:39 GMT-0800 (Pacific Standard Time)">17:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">It's seems that I falling into the exclusion case</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Dec 21 2022 09:03:43 GMT-0800 (Pacific Standard Time)">17:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I need to fix that wording somehow.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Dec 21 2022 09:04:28 GMT-0800 (Pacific Standard Time)">17:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">it's meant to say that if you use a <code>PersistentRooted</code> in an object owned by a JS object, then you will create a permanent memory leak. Or rather, one that will last until the runtime is shutdown. But that's what you want anyway.</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Dec 21 2022 09:05:00 GMT-0800 (Pacific Standard Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">You may need to reset or null out the <code>PersistentRooted</code> before shutting down the runtime. I can't remember if those are scanned or not during a shutdown GC.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Dec 21 2022 09:05:43 GMT-0800 (Pacific Standard Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">But it will assert if it wants it and you don't do it, so you can test (with a DEBUG build).</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Dec 21 2022 09:09:21 GMT-0800 (Pacific Standard Time)">17:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">I will try to use PersistentRooted and see what happen :D</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Dec 21 2022 09:10:07 GMT-0800 (Pacific Standard Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">actually, it explains it pretty well in the next 2 paragraphs, so I can probably just change it to "Note that you must not use an PersistentRooted in an object owned by a JS object, unless you are ok with keeping the entire object graph reachable from the PersistentRooted alive until shutdown, regardless of the liveness of the owning JS object."</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Dec 21 2022 09:10:35 GMT-0800 (Pacific Standard Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">though that's still complicated enough to be confusing</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Dec 21 2022 09:12:49 GMT-0800 (Pacific Standard Time)">17:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">I think I understood you last wording, All object reachable from the the PersistentRooted will stay alive, and this make sence</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Dec 21 2022 09:14:15 GMT-0800 (Pacific Standard Time)">17:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">the usual problem people run into is that the object that owns the PersistentRooted will be reachable from the PersistentRooted, thus creating an uncollectable cycle. And usually that's because the owning object is reachable from the global. (And the global is almost always reachable from just about anything.)</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Dec 21 2022 09:18:19 GMT-0800 (Pacific Standard Time)">17:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">mm this case is bad, how an object can be linked to the global object ?</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Dec 21 2022 09:19:15 GMT-0800 (Pacific Standard Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">I mean other than behin connectect manually, such as o.g = this</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Dec 21 2022 09:19:19 GMT-0800 (Pacific Standard Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">if your constructor is available via <code>new MyConstructorName()</code>, then it's reachable somehow.</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Dec 21 2022 09:19:28 GMT-0800 (Pacific Standard Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">probably as a property on the global</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Dec 21 2022 09:19:42 GMT-0800 (Pacific Standard Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">yes but the oposite is not true ?</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Dec 21 2022 09:20:17 GMT-0800 (Pacific Standard Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Dec 21 2022 09:21:03 GMT-0800 (Pacific Standard Time)">17:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">MyConstructorName.any.path can never reach global ?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Dec 21 2022 09:21:31 GMT-0800 (Pacific Standard Time)">17:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">as far as you take care to not bind it by mistake</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Dec 21 2022 09:22:03 GMT-0800 (Pacific Standard Time)">17:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I think there are internal links. In the shell if I do <code>findPath({}, this)</code> (so find a path from an object literal to the global), it gives {} -&gt; "group" -&gt; "group_global" -&gt; global</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Dec 21 2022 09:22:18 GMT-0800 (Pacific Standard Time)">17:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I'm looking to see what those are.</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Dec 21 2022 09:23:34 GMT-0800 (Pacific Standard Time)">17:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">So I need to break this kind of link</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Dec 21 2022 09:24:35 GMT-0800 (Pacific Standard Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I don't think it'll be possible to prevent the global from being reachable. There are internal things like the object's Shape (hidden class) that I believe has a reference to the global.</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Dec 21 2022 09:25:12 GMT-0800 (Pacific Standard Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">you didn't want the global to live until shutdown?</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Dec 21 2022 09:25:30 GMT-0800 (Pacific Standard Time)">17:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">I'm fine with it :)</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Dec 21 2022 09:26:14 GMT-0800 (Pacific Standard Time)">17:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">then I think you're ok</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Dec 21 2022 09:28:31 GMT-0800 (Pacific Standard Time)">17:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">It was more about curriosity, why object are always linked to globals</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Dec 21 2022 09:28:52 GMT-0800 (Pacific Standard Time)">17:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">ah, ok</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Dec 21 2022 09:29:22 GMT-0800 (Pacific Standard Time)">17:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">I did not expected that</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Dec 21 2022 09:30:27 GMT-0800 (Pacific Standard Time)">17:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">the usual one I think of is something like obj -&gt; Shape -&gt; BaseShape -&gt; realm -&gt; global. Though that last edge is weak, so that's probably not a great example.</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Dec 21 2022 09:35:03 GMT-0800 (Pacific Standard Time)">17:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">though looking at <a href="https://searchfox.org/mozilla-central/rev/cef96316b3643720769dec96542604c3209f1877/js/src/gc/TraceMethods-inl.h#304-306">the code</a>, it doesn't look very weak to me.</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Dec 21 2022 09:36:35 GMT-0800 (Pacific Standard Time)">17:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><code>js  -e 'print(JSON.stringify(findPath({}, this)))'</code> is giving me obj -&gt; shape -&gt; base -&gt; baseshape_global -&gt; global_window_proxy. You can ignore the global_window_proxy part.</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Dec 21 2022 09:37:10 GMT-0800 (Pacific Standard Time)">17:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I haven't played with <code>findPath</code> much, it's pretty neat.</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Dec 21 2022 09:38:54 GMT-0800 (Pacific Standard Time)">17:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">it also shows that I should make the shell's <code>performance</code> object non-enumerable</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Dec 21 2022 09:39:35 GMT-0800 (Pacific Standard Time)">17:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@gschwind:matrix.org">gschwind</span>&gt;</div></td><td class="msg-cell">^^ Thanks for you help</td></tr>

</tbody></table></div></div></div>
</body></html>