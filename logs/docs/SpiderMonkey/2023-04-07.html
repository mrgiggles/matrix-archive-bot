<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-04-07</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-04-07<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-04-06" class="nav-link"><span>prev</span></a>
<a href="2023-04-08" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Apr 06 2023 20:33:29 GMT-0700 (Pacific Daylight Time)">03:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@luyahan:mozilla.org">luyahan</span>&gt;</div></td><td class="msg-cell">I am gdb asm.js/testBug1301191.js on riscv64 and break on js/src/shell/js.cpp:11223. Then print "p cx-&gt;zone()", result is "$1 = (JS::Zone *) 0x0"</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Apr 06 2023 20:33:34 GMT-0700 (Pacific Daylight Time)">03:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@luyahan:mozilla.org">luyahan</span>&gt;</div></td><td class="msg-cell">Is it normal?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Apr 07 2023 02:07:04 GMT-0700 (Pacific Daylight Time)">09:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">if I'm looking at the same line, yeah that's expected. We don't have an active zone at that point</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Apr 07 2023 02:16:07 GMT-0700 (Pacific Daylight Time)">09:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@luyahan:mozilla.org">luyahan</span>&gt;</div></td><td class="msg-cell"><pre><code>Thread 1 received signal SIGSEGV, Segmentation fault.
JS::shadow::Zone::isAtomsZone (this=0x0) at /home/luyahan/source/gecko/obj-opt-riscv64-unknown-linux-gnu/dist/include/js/shadow/Zone.h:111
111       bool isAtomsZone() const { return kind_ == AtomsZone; }
(gdb) bt
#0  JS::shadow::Zone::isAtomsZone (this=0x0) at /home/luyahan/source/gecko/obj-opt-riscv64-unknown-linux-gnu/dist/include/js/shadow/Zone.h:111
#1  0x00000040023b7e40 in JSLinearString::newValidLength&lt;(js::AllowGC)1, unsigned char&gt; (cx=0x4008030100, chars=..., length=40, heap=js::gc::DefaultHeap)
    at /home/luyahan/source/gecko/js/src/vm/StringType-inl.h:283
#2  0x00000040023b7da4 in js::NewStringCopyNDontDeflateNonStaticValidLength&lt;(js::AllowGC)1, unsigned char&gt; (cx=0x4008030100, 
    s=0x400801b600 "Can't open self-hosted stencil XDR file.", n=40, heap=js::gc::DefaultHeap) at /home/luyahan/source/gecko/js/src/vm/StringType.cpp:1674
#3  0x00000040023b8316 in js::NewStringCopyNDontDeflate&lt;(js::AllowGC)1, unsigned char&gt; (cx=0x4008030100, 
    s=0x400801b600 "Can't open self-hosted stencil XDR file.", n=40, heap=js::gc::DefaultHeap) at /home/luyahan/source/gecko/js/src/vm/StringType.cpp:1694
#4  0x00000040023b864a in js::NewStringCopyN&lt;(js::AllowGC)1, unsigned char&gt; (cx=0x4008030100, s=0x400801b600 "Can't open self-hosted stencil XDR file.", 
    n=40, heap=js::gc::DefaultHeap) at /home/luyahan/source/gecko/js/src/vm/StringType.cpp:1733
#5  0x00000040023ab402 in js::NewStringCopyUTF8N (cx=0x4008030100, utf8=..., heap=js::gc::DefaultHeap)
    at /home/luyahan/source/gecko/js/src/vm/StringType.cpp:1807
#6  0x0000004001d59530 in js::NewStringCopyUTF8Z (cx=0x4008030100, utf8=..., heap=js::gc::DefaultHeap)
    at /home/luyahan/source/gecko/js/src/vm/StringType.h:1541
#7  0x00000040025af88a in JS_NewStringCopyUTF8Z (cx=0x4008030100, s=...) at /home/luyahan/source/gecko/js/src/jsapi.cpp:2985
#8  0x00000040025b4f2c in JSErrorBase::newMessageString (this=0x40063bc850, cx=0x4008030100) at /home/luyahan/source/gecko/js/src/jsapi.cpp:3861
#9  0x00000040025bca02 in js::ErrorToException (cx=0x4008030100, reportp=0x40063bc850, callback=0x40020783e0 &lt;js::GetErrorMessage(void*, unsigned int)&gt;, 
    userRef=0x0) at /home/luyahan/source/gecko/js/src/jsexn.cpp:321
#10 0x000000400207d584 in ReportError (cx=0x4008030100, reportp=0x40063bc850, callback=0x0, userRef=0x0)
    at /home/luyahan/source/gecko/js/src/vm/ErrorReporting.cpp:149
#11 0x000000400207dbe8 in js::ReportErrorVA (cx=0x4008030100, isWarning=js::IsWarning::No, 
    format=0x4000314c60 "Can't open self-hosted stencil XDR file.", argumentsType=js::ArgumentsAreUTF8, ap=0x40063bc900)
    at /home/luyahan/source/gecko/js/src/vm/ErrorReporting.cpp:553
#12 0x00000040025b3dda in JS_ReportErrorUTF8 (cx=0x4008030100, format=0x4000314c60 "Can't open self-hosted stencil XDR file.")
    at /home/luyahan/source/gecko/js/src/jsapi.cpp:3592
#13 0x0000004001cf0c72 in WriteSelfHostedXDRFile (cx=0x4008030100, buffer=...) at /home/luyahan/source/gecko/js/src/shell/js.cpp:10972
#14 0x0000004002338f08 in JSRuntime::initSelfHostingStencil (this=0x4008023000, cx=0x4008030100, xdrCache=..., 
    xdrWriter=0x4001cf0c04 &lt;WriteSelfHostedXDRFile(JSContext*, mozilla::Span&lt;unsigned char const, 18446744073709551615ul&gt;)&gt;)
    at /home/luyahan/source/gecko/js/src/vm/SelfHosting.cpp:2493
#15 0x00000040020e3c04 in JS::InitSelfHostedCode (cx=0x4008030100, cache=..., 
    writer=0x4001cf0c04 &lt;WriteSelfHostedXDRFile(JSContext*, mozilla::Span&lt;unsigned char const, 18446744073709551615ul&gt;)&gt;)
    at /home/luyahan/source/gecko/js/src/vm/Initialization.cpp:220
#16 0x0000004001cecf12 in main (argc=19, argv=0x40063bd3b8) at /home/luyahan/source/gecko/js/src/shell/js.cpp:11223
```
</code></pre>
</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Apr 07 2023 02:17:43 GMT-0700 (Pacific Daylight Time)">09:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@luyahan:mozilla.org">luyahan</span>&gt;</div></td><td class="msg-cell">It segmentation fault here but I can't find any AutoAllocInAtomsZone in stack info.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Apr 07 2023 02:21:53 GMT-0700 (Pacific Daylight Time)">09:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">the error is "Can't open self-hosted stencil XDR file."</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Apr 07 2023 02:22:19 GMT-0700 (Pacific Daylight Time)">09:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">it's possible the code is wrong but we just don't have test coverage for it</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Apr 07 2023 02:27:36 GMT-0700 (Pacific Daylight Time)">09:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@luyahan:mozilla.org">luyahan</span>&gt;</div></td><td class="msg-cell"> * <pre><code>(gdb) p selfHostedXDRPath
$2 = 0x40063bd7d5 "/tmp/tmp9w62cfna/shell.xdr"
</code></pre>
</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Apr 07 2023 02:28:45 GMT-0700 (Pacific Daylight Time)">09:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@luyahan:mozilla.org">luyahan</span>&gt;</div></td><td class="msg-cell"> * Was it produced when build js shell?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Apr 07 2023 02:30:13 GMT-0700 (Pacific Daylight Time)">09:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@luyahan:mozilla.org">luyahan</span>&gt;</div></td><td class="msg-cell"> I find it pass  arg `--selfhosted-xdr-path /tmp/tmp9w62cfna/shell.xdr' to js shell</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Apr 07 2023 02:40:19 GMT-0700 (Pacific Daylight Time)">09:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@luyahan:mozilla.org">luyahan</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>I find it pass  arg `--selfhosted-xdr-path /tmp/tmp9w62cfna/shell.xdr' to js shell</p>
</blockquote>
<p>It can't open this file because don't have right to  /tmp/tmp9w62cfna</p>
</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Apr 07 2023 02:40:39 GMT-0700 (Pacific Daylight Time)">09:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@luyahan:mozilla.org">luyahan</span>&gt;</div></td><td class="msg-cell">After I mkdir mkdir , it pass</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Apr 07 2023 02:45:06 GMT-0700 (Pacific Daylight Time)">09:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">luyahan</span>: can you file a bug? we should fix this</td></tr>

</tbody></table></div></div></div>
</body></html>