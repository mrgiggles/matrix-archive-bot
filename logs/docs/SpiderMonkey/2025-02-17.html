<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2025-02-17</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2025-02-17<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-02-16" class="nav-link"><span>prev</span></a>
<a href="2025-02-18" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Feb 17 2025 01:27:06 GMT-0800 (Pacific Standard Time)">09:27</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-4" title="@ms2ger:igalia.com">Ms2ger</span></div></td><td class="msg-cell">waves at <span class="nick-3">jdm</span></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Feb 17 2025 10:00:57 GMT-0800 (Pacific Standard Time)">18:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@debadree25:mozilla.org">debadree25</span>&gt;</div></td><td class="msg-cell">i had a question regarding the implementation of the <a href="https://searchfox.org/mozilla-central/source/js/src/vm/Opcodes.h#426">TypeofEq bytecode</a> i am trying to understand why its implemented with IC isnt it possible to directly load the value <a href="https://searchfox.org/mozilla-central/source/js/src/jit/BaselineCodeGen.cpp#4645">here</a> for ex and check the type? or i guess having the guards is more faster or something else maybe ðŸ˜…ðŸ˜…</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Feb 17 2025 11:06:27 GMT-0800 (Pacific Standard Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">debadree25</span>: There are 8+ different options for typeof (See <a href="https://searchfox.org/mozilla-central/source/js/src/jit/CodeGenerator.cpp#18159-18162">here</a> for an example of where we don't generate an IC.) Using ICs means that we check for the cases that we're actually seeing first. We also have an optimization that uses the entry counts on baseline ICs to pick the best order to generate the checks in Ion.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Feb 17 2025 11:08:36 GMT-0800 (Pacific Standard Time)">19:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Although now that I'm thinking about it, we could consider using the type tag to index into a static table of strings. But we'd need special handling for doubles (because they don't have a tag in the same way) and objects (because we have to distinguish "object" and "function"), so there's still some messiness.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Feb 17 2025 11:19:24 GMT-0800 (Pacific Standard Time)">19:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@debadree25:mozilla.org">debadree25</span>&gt;</div></td><td class="msg-cell">understood thank you so much for explaining!</td></tr>

</tbody></table></div></div></div>
</body></html>