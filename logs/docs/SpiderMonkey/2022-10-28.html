<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-10-28</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-10-28<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-10-27" class="nav-link"><span>prev</span></a>
<a href="2022-10-29" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Oct 28 2022 09:00:33 GMT-0700 (Pacific Daylight Time)">16:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">Is the Debugger api available within webextensions?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Oct 28 2022 09:01:38 GMT-0700 (Pacific Daylight Time)">16:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">I know it used to be within xpi, IIRC</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Oct 28 2022 11:43:43 GMT-0700 (Pacific Daylight Time)">18:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@kfjvj:mozilla.org">kfjvj</span>&gt;</div></td><td class="msg-cell">What is the best way to construct a module object with SpiderMonkey?  At present, I'm adding a hierarchy of properties to the global object (i.e. type Foo in namespace a.b.c.d becomes <a href="http://global.a.b.c.d.Foo">global.a.b.c.d.Foo</a>).  I've just been using plain objects.  Should I be using a particular function to generate module objects specifically?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Oct 28 2022 11:47:37 GMT-0700 (Pacific Daylight Time)">18:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@kfjvj:mozilla.org">kfjvj</span>&gt;</div></td><td class="msg-cell">I want these to look and act just like modules loaded from a JS source file, even though they're generated from C++ code.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Oct 28 2022 11:55:52 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">Bug 1722802 was supposed to add functions for this, but it hasn't had any progress for a while.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Oct 28 2022 11:55:54 GMT-0700 (Pacific Daylight Time)">18:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1722802">https://bugzil.la/1722802</a> — UNCONFIRMED (nobody) — Add JSAPI functions to create JS modules w/ custom exports</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Oct 28 2022 11:56:36 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@kfjvj:mozilla.org">kfjvj</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Bug 1722802 was supposed to add functions for this, but it hasn't had any progress for a while.</blockquote></mx-reply>Thanks for letting me know.  I'm stuck using version 68 as it is, so I don't think I'll have access to that.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Oct 28 2022 12:06:31 GMT-0700 (Pacific Daylight Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@kfjvj:mozilla.org">kfjvj</span>&gt;</div></td><td class="msg-cell">I'm seeing some functions in jsapi.h: ModuleInstantiate, ModuleEvaluate, and others.  Some of them accept a JS::HandleObject parameter named moduleRecord, but there's no indication as to what properties that object should have.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Oct 28 2022 12:22:06 GMT-0700 (Pacific Daylight Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">kfjvj</span>: I think you get the module records from here: <a href="https://searchfox.org/mozilla-esr68/source/js/src/jsapi.h#1960-1967">https://searchfox.org/mozilla-esr68/source/js/src/jsapi.h#1960-1967</a></td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Oct 28 2022 12:24:32 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Note that the steps for initializing modules in JS are somewhat complicated, and the spec has been rewritten pretty heavily in the last few years for stuff like async imports and top-level await, so if you want to use modules in 68 you're probably going to have to do some code spelunking</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Oct 28 2022 12:28:11 GMT-0700 (Pacific Daylight Time)">19:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@kfjvj:mozilla.org">kfjvj</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Note that the steps for initializing modules in JS are somewhat complicated, and the spec has been rewritten pretty heavily in the last few years for stuff like async imports and top-level await, so if you want to use modules in 68 you're probably going to have to do some code spelunking</blockquote></mx-reply>OK.  I'll stick with plain objects until I can figure something out.</td></tr>

</tbody></table></div></div></div>
</body></html>