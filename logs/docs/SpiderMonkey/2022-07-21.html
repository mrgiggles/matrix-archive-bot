<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-07-21</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-07-21<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-07-20" class="nav-link"><span>prev</span></a>
<a href="2022-07-22" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Jul 20 2022 19:57:54 GMT-0700 (Pacific Daylight Time)">02:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is <code>undefined</code> in self-hosted JS optimized somewhere in JIT ?  it's compiled as <code>JSOp::GetIntrinsic "undefined"</code>, but it can be <code>JSOp::Undefined</code>, and I'm wondering if bytecode emitter can handle it specially, or if something in JIT already handles it</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Jul 20 2022 19:59:27 GMT-0700 (Pacific Daylight Time)">02:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I see both <code>undefined</code> and <code>void 0</code> in self-hosted JS code, and the latter implies <code>undefined</code> isn't preferred, I think</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Jul 21 2022 00:27:17 GMT-0700 (Pacific Daylight Time)">07:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">arai</span>: in warp, <code>GetIntrinsic</code> is a constant if the intrinsic is available when we do the compile, but I think it would be nice to emit <code>JSOp::Undefined</code> in self-hosted code because it's used quite a lot</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Jul 21 2022 00:28:57 GMT-0700 (Pacific Daylight Time)">07:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">okay, I'll look into modifying bytecode emitter.  and also fixing existing <code>void 0</code>, and new ones in onNativeCall patch</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Jul 21 2022 06:34:12 GMT-0700 (Pacific Daylight Time)">13:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">When implementing a new built-in class, how can we define <code>String(new Builtin)</code> to return <code>"[object Builtin]"</code> instead of <code>"[object Object]"</code>?<br>I thought it would be via the JSClass name field (e.g. <code>const JSClass class_ = {"Builtin", JSCLASS_HAS_RESERVED_SLOTS(Slots::Count) | class_flags, JS_NULL_CLASS_OPS};</code>) however that doesn't seem to change it for me</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Jul 21 2022 06:40:32 GMT-0700 (Pacific Daylight Time)">13:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">hmm, maybe it is the way I'm constructing instances - I'm using JS_NewObjectForConstructor from the JS_PUBLIC_API as this is being implemented outside of the spidermonkey codebase</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Jul 21 2022 06:43:21 GMT-0700 (Pacific Daylight Time)">13:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">jakechampion</span>: it's <code>Symbol.toStringTag</code> property of the prototype object</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Jul 21 2022 06:43:51 GMT-0700 (Pacific Daylight Time)">13:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><a href="https://tc39.es/ecma262/#sec-object.prototype.tostring">https://tc39.es/ecma262/#sec-object.prototype.tostring</a></td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Jul 21 2022 06:44:22 GMT-0700 (Pacific Daylight Time)">13:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">yeah, before that it did use the <code>JSClass</code> name but now it's based on the symbol</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Jul 21 2022 06:44:56 GMT-0700 (Pacific Daylight Time)">13:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">silly me, I forgot about Symbols :D</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Jul 21 2022 06:47:21 GMT-0700 (Pacific Daylight Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">Nice, that worked and now more of the web-platform-tests are passing ü•≥</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Jul 21 2022 06:49:01 GMT-0700 (Pacific Daylight Time)">13:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">I'm working on implementing <a href="https://wicg.github.io/compression/#ref-for-decompressionstream">DecompressionStream</a> within Fastly's JS runtime which is based on SpiderMonkey - I'm very thankful for all the excellent work that has gone into both SpiderMonkey and the web-platform-tests - it's made working on this really enjoyable ‚ò∫Ô∏è</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Jul 21 2022 08:27:18 GMT-0700 (Pacific Daylight Time)">15:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I'm working on implementing <a href="https://wicg.github.io/compression/#ref-for-decompressionstream">DecompressionStream</a> within Fastly's JS runtime which is based on SpiderMonkey - I'm very thankful for all the excellent work that has gone into both SpiderMonkey and the web-platform-tests - it's made working on this really enjoyable ‚ò∫Ô∏è</blockquote></mx-reply>Oh interesting. Is this based on the JS Streams implementation?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Jul 21 2022 08:31:03 GMT-0700 (Pacific Daylight Time)">15:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Oh interesting. Is this based on the JS Streams implementation?</blockquote></mx-reply>We are on a quite old SpiderMonkey version which has streams implemented and that is what this is based upon</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Jul 21 2022 08:32:11 GMT-0700 (Pacific Daylight Time)">15:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">We did a slight fork from  96.0b9 </td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Jul 21 2022 08:32:21 GMT-0700 (Pacific Daylight Time)">15:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">jakechampion</span>: Interesting (just because I don't think we ever finished -transform- streams, which IIRC is a dependency for DecompressionStreams)</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Jul 21 2022 08:37:06 GMT-0700 (Pacific Daylight Time)">15:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-16">jakechampion</span>: Interesting (just because I don't think we ever finished -transform- streams, which IIRC is a dependency for DecompressionStreams)</blockquote></mx-reply>We have implemented TransformStream here <a href="https://github.com/fastly/js-compute-runtime/blob/4c87f8f554bf748c49353af42e671017b0f0de40/c-dependencies/js-compute-runtime/js-compute-builtins.cpp#L1180-L1213">https://github.com/fastly/js-compute-runtime/blob/4c87f8f554bf748c49353af42e671017b0f0de40/c-dependencies/js-compute-runtime/js-compute-builtins.cpp#L1180-L1213</a></td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Jul 21 2022 08:38:23 GMT-0700 (Pacific Daylight Time)">15:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">And this is the small amount of changes we've made in our fork of spidermonkey - <a href="https://github.com/bytecodealliance/gecko-dev/compare/7bd6b355da3f1a5418e521e193f4693259c2d3e5...stream-pipeto-fix">https://github.com/bytecodealliance/gecko-dev/compare/7bd6b355da3f1a5418e521e193f4693259c2d3e5...stream-pipeto-fix</a></td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Jul 21 2022 08:39:54 GMT-0700 (Pacific Daylight Time)">15:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Interesting! Cool :) Glad you're enjoying working on SM stuff :) </td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Jul 21 2022 08:40:45 GMT-0700 (Pacific Daylight Time)">15:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><a href="https://github.com/fastly/js-compute-runtime/blob/4c87f8f554bf748c49353af42e671017b0f0de40/c-dependencies/js-compute-runtime/js-compute-builtins.cpp#L3876">https://github.com/fastly/js-compute-runtime/blob/4c87f8f554bf748c49353af42e671017b0f0de40/c-dependencies/js-compute-runtime/js-compute-builtins.cpp#L3876</a> missing null check</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Jul 21 2022 08:40:45 GMT-0700 (Pacific Daylight Time)">15:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">anyway kind of interesting seeing someone else writing spidermonkey code</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Jul 21 2022 08:42:51 GMT-0700 (Pacific Daylight Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">Is DecompressionStream on a standards track?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Jul 21 2022 08:43:31 GMT-0700 (Pacific Daylight Time)">15:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">I believe so -&gt; <a href="https://wicg.github.io/compression/#decompression-stream">https://wicg.github.io/compression/#decompression-stream</a></td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Thu Jul 21 2022 08:44:07 GMT-0700 (Pacific Daylight Time)">15:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">WICG is not a standards body</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Thu Jul 21 2022 08:44:11 GMT-0700 (Pacific Daylight Time)">15:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">I'm new to this work though so I can be completely wrong here</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu Jul 21 2022 08:48:20 GMT-0700 (Pacific Daylight Time)">15:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Is DecompressionStream on a standards track?</blockquote></mx-reply><p>I can't see mention on the GitHub issues except for annevk asking if it would become part of the Streams standard - <a href="https://github.com/WICG/compression/issues/32">https://github.com/WICG/compression/issues/32</a></p>
<p>Is there another place I should go to find the answer?</p>
</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Thu Jul 21 2022 08:48:51 GMT-0700 (Pacific Daylight Time)">15:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@bthrall:mozilla.org">Bryan Thrall [:bthrall]</span>&gt;</div></td><td class="msg-cell">I'm trying to understand why <a href="https://searchfox.org/mozilla-central/source/js/src/vm/JSContext.cpp#368">allocation overflows are ignored for helper threads</a>. The version history didn't explain why, so does anyone here have an idea?</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu Jul 21 2022 08:51:13 GMT-0700 (Pacific Daylight Time)">15:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>I can't see mention on the GitHub issues except for annevk asking if it would become part of the Streams standard - <a href="https://github.com/WICG/compression/issues/32">https://github.com/WICG/compression/issues/32</a></p>
<p>Is there another place I should go to find the answer?</p>
</blockquote></mx-reply>I don't know, this seems like a good place</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Thu Jul 21 2022 08:52:13 GMT-0700 (Pacific Daylight Time)">15:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I'm trying to understand why <a href="https://searchfox.org/mozilla-central/source/js/src/vm/JSContext.cpp#368">allocation overflows are ignored for helper threads</a>. The version history didn't explain why, so does anyone here have an idea?</blockquote></mx-reply>I guess because we can't report exceptions on helper threads</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Thu Jul 21 2022 08:53:38 GMT-0700 (Pacific Daylight Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">it could have added a pending exception similar to OOM though. I think it's just relying on propagated-false-return being treated as an OOM elsewhere.. would be good to fix</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Thu Jul 21 2022 08:54:57 GMT-0700 (Pacific Daylight Time)">15:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@bthrall:mozilla.org">Bryan Thrall [:bthrall]</span>&gt;</div></td><td class="msg-cell">I can create a bug to fix it, then...</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Thu Jul 21 2022 08:57:15 GMT-0700 (Pacific Daylight Time)">15:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">that'd be great, thanks! </td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Thu Jul 21 2022 09:19:10 GMT-0700 (Pacific Daylight Time)">16:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@bthrall:mozilla.org">Bryan Thrall [:bthrall]</span>&gt;</div></td><td class="msg-cell">Bug 1780599</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Thu Jul 21 2022 09:19:12 GMT-0700 (Pacific Daylight Time)">16:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1780599">https://bugzil.la/1780599</a> ‚Äî NEW (nobody) ‚Äî js::ReportAllocationOverflow() should store pending error for helper threads</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Thu Jul 21 2022 11:19:30 GMT-0700 (Pacific Daylight Time)">18:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@mbroadst:mozilla.org">mbroadst</span>&gt;</div></td><td class="msg-cell">Is it possible to reimplement the AutoReportException type outside of the jsshell source? In particular, I think <a href="https://searchfox.org/mozilla-central/source/js/src/shell/js.cpp#10246-10261">these lines</a> are using JSObject in a way that you can't through public API</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Thu Jul 21 2022 11:21:08 GMT-0700 (Pacific Daylight Time)">18:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@mbroadst:mozilla.org">mbroadst</span>&gt;</div></td><td class="msg-cell">(we don't have type information for JSObject, so we can't call like <code>jsObject-&gt;as&lt;ErrorObject&gt;()</code>)</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Thu Jul 21 2022 11:21:27 GMT-0700 (Pacific Daylight Time)">18:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">yes, we have a reimplementation in GJS, let me get you a link</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Thu Jul 21 2022 11:22:22 GMT-0700 (Pacific Daylight Time)">18:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">mbroadst</span>: <a href="https://gitlab.gnome.org/GNOME/gjs/-/blob/master/modules/console.cpp#L59-96">https://gitlab.gnome.org/GNOME/gjs/-/blob/master/modules/console.cpp#L59-96</a></td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Thu Jul 21 2022 11:24:56 GMT-0700 (Pacific Daylight Time)">18:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">although looking at it I guess we don't have that Error.cause feature yet</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Thu Jul 21 2022 11:25:06 GMT-0700 (Pacific Daylight Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@mbroadst:mozilla.org">mbroadst</span>&gt;</div></td><td class="msg-cell">Thanks <span class="nick-13">ptomato</span> , I see that you print out the error and format the stack trace if available. This code I linked to in the shell seems to go a step further and print out a "cause", which I don't understand very well</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Thu Jul 21 2022 11:26:47 GMT-0700 (Pacific Daylight Time)">18:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@mbroadst:mozilla.org">mbroadst</span>&gt;</div></td><td class="msg-cell">I couldn't find an easy way to do what they do in the shell there with the jsapi, maybe I'm missing some obvious method</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Thu Jul 21 2022 11:28:31 GMT-0700 (Pacific Daylight Time)">18:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">there is no equivalent for <code>exception-&gt;is&lt;ErrorObject&gt;()</code> but you can achieve the same effect with <code>JS::GetExceptionCause()</code> <a href="https://searchfox.org/mozilla-central/source/js/public/Exception.h#192">https://searchfox.org/mozilla-central/source/js/public/Exception.h#192</a></td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Thu Jul 21 2022 11:28:54 GMT-0700 (Pacific Daylight Time)">18:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">it'll return <code>mozilla::Nothing</code> if the object wasn't an Error object or didn't have a cause</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Thu Jul 21 2022 11:34:00 GMT-0700 (Pacific Daylight Time)">18:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@mbroadst:mozilla.org">mbroadst</span>&gt;</div></td><td class="msg-cell">Cool, thank you!</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Thu Jul 21 2022 11:44:02 GMT-0700 (Pacific Daylight Time)">18:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">dumb hg question: how do I clean up all the phab-D1234 branches from <code>hg wip</code> view?</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Thu Jul 21 2022 11:50:06 GMT-0700 (Pacific Daylight Time)">18:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">I did <code>hg bookmark -D phab-D123</code> and then <code>hg prune rev1..revN</code>, but I wonder if there is supposed to be a better way</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Thu Jul 21 2022 11:58:16 GMT-0700 (Pacific Daylight Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">That's basically what I do</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Thu Jul 21 2022 12:15:22 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><code>hg prune -r 'descendants(bottom-most-patch)'</code> is my go to; but you also have to manually delete the phab bookmarks</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Thu Jul 21 2022 12:15:44 GMT-0700 (Pacific Daylight Time)">19:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">I really ought to use <code>--no-bookmark</code> when running <code>moz-phab patch</code>, but I never do.</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Thu Jul 21 2022 12:18:13 GMT-0700 (Pacific Daylight Time)">19:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@owlish:mozilla.org">owlish</span>&gt;</div></td><td class="msg-cell">hey folks, not sure where to ask this - does anyone know what this assertion is for? <a href="https://searchfox.org/mozilla-central/source/js/src/wasm/WasmCompile.cpp#66">https://searchfox.org/mozilla-central/source/js/src/wasm/WasmCompile.cpp#66</a> I get exception on it, even thought I build for Intel and run on Intel emulator..... (I build for Android)</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Thu Jul 21 2022 12:22:56 GMT-0700 (Pacific Daylight Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">That's definitely surprising. </td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Thu Jul 21 2022 12:23:39 GMT-0700 (Pacific Daylight Time)">19:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">We're packing two pieces of information into a uint32_t for return, and are trying to make sure we can sensibly pack that; but for some reason you're seeing a case where we can't</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Thu Jul 21 2022 12:24:05 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">It's surprising to me particularly given that you're saying you're doing an intel build, and this code should only run for JS_CODEGEN_ARM</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Thu Jul 21 2022 12:24:25 GMT-0700 (Pacific Daylight Time)">19:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">owlish</span>: Thing that might help would be seeing your mozconfig; but might also be best to open a bug if you're seeing this.</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Thu Jul 21 2022 12:25:16 GMT-0700 (Pacific Daylight Time)">19:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@owlish:mozilla.org">owlish</span>&gt;</div></td><td class="msg-cell"><p>yes, I made sure in my mozconfig I have only these lines:</p>
<pre><code>ac_add_options --enable-application=mobile/android
ac_add_options --target=x86_64
ac_add_options --enable-debug
</code></pre>
</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Thu Jul 21 2022 12:25:28 GMT-0700 (Pacific Daylight Time)">19:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@owlish:mozilla.org">owlish</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">mgaudet</span>: ^</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Thu Jul 21 2022 12:28:32 GMT-0700 (Pacific Daylight Time)">19:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Hrm. I'm just trying to spin up my android build to see if I can figure this out.</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Thu Jul 21 2022 12:28:51 GMT-0700 (Pacific Daylight Time)">19:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">two Q: Do you always see this assertion, and where?</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Thu Jul 21 2022 12:29:34 GMT-0700 (Pacific Daylight Time)">19:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@owlish:mozilla.org">owlish</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">mgaudet</span>: Thanks! I start geckoview example app (GVE) and it crashes soon after start</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Thu Jul 21 2022 12:29:41 GMT-0700 (Pacific Daylight Time)">19:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@owlish:mozilla.org">owlish</span>&gt;</div></td><td class="msg-cell">due to this assertion</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Thu Jul 21 2022 12:36:28 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@owlish:mozilla.org">owlish</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">mgaudet</span>: I cleaned up my build, invalidated cashes in AS, bootstrapped and built again - seems to be working now!</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Thu Jul 21 2022 12:37:01 GMT-0700 (Pacific Daylight Time)">19:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">owlish</span>: Ok. That's good to hear. Sad you ran into it, but glad that fixed it!</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Thu Jul 21 2022 14:51:05 GMT-0700 (Pacific Daylight Time)">21:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@seirdy:seirdy.one">Seirdy</span>&gt;</div></td><td class="msg-cell">i noticed that the cranelift option in about:config was removed a long time ago. was cranelift integration abandoned or did it ship?</td></tr>

</tbody></table></div></div></div>
</body></html>