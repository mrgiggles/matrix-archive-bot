<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2024-06-28</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2024-06-28<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-06-27" class="nav-link"><span>prev</span></a>
<a href="2024-07-01" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Jun 28 2024 08:22:47 GMT-0700 (Pacific Daylight Time)">15:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">Bryan Thrall [:bthrall]</span>: You want me to merge the component experts PR or do you have more work you wanted to do?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Jun 28 2024 08:26:01 GMT-0700 (Pacific Daylight Time)">15:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@bthrall:mozilla.org">Bryan Thrall [:bthrall]</span>&gt;</div></td><td class="msg-cell">If everyone is happy with how it reads and looks, I'm fine with merging it</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Jun 28 2024 08:34:21 GMT-0700 (Pacific Daylight Time)">15:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">I figure worst case we can iterate on it </td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Jun 28 2024 08:34:26 GMT-0700 (Pacific Daylight Time)">15:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">so I'll land it</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Jun 28 2024 08:50:10 GMT-0700 (Pacific Daylight Time)">15:50</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span></div></td><td class="msg-cell">narrows eyes at lack of crashes on patch... </td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Jun 28 2024 08:50:31 GMT-0700 (Pacific Daylight Time)">15:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">I'm always un-nerved when a patch -seems- to have worked without actually crashing</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Jun 28 2024 08:53:41 GMT-0700 (Pacific Daylight Time)">15:53</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span></div></td><td class="msg-cell">sighs relief... </td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Jun 28 2024 08:53:42 GMT-0700 (Pacific Daylight Time)">15:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">it appears to be never testedd. wait. That's not good. </td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Jun 28 2024 09:56:35 GMT-0700 (Pacific Daylight Time)">16:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">iain</span>: I have a prototype of the invalidation based generation counter on try right now... so quicker than earlier next week. We'll see how it goes :)</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Jun 28 2024 09:57:57 GMT-0700 (Pacific Daylight Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">It's not the prettiest patch, and certainly some aspects could/should be cleaned up... but it does work (tho, I had to write my own test to verify it... turns out that editing the global after we have warp compiled bodies... not represented in our test suite!) </td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Jun 28 2024 10:39:12 GMT-0700 (Pacific Daylight Time)">17:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">In other news: I've been using Jujutsu for the past month or so, and wrote it up here <a href="https://www.mgaudet.ca/technical/2024/6/28/jujitsu-two-a-better-experience">https://www.mgaudet.ca/technical/2024/6/28/jujitsu-two-a-better-experience</a></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Jun 28 2024 10:39:49 GMT-0700 (Pacific Daylight Time)">17:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">I was embarassed to learn when I asked ChatGPT to proofread my post... that I've been calling the tool Jujitsu forever... but it's definitely Jujutsu... oops</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Jun 28 2024 10:42:49 GMT-0700 (Pacific Daylight Time)">17:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Yeah, that still bothers me. It seems like the meaning is the same, but I've always only ever heard jujitsu before jj showed up, so I have a lot of trouble with it.</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Jun 28 2024 10:44:21 GMT-0700 (Pacific Daylight Time)">17:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">maybe this is just an evolving romanization thing?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Jun 28 2024 10:45:14 GMT-0700 (Pacific Daylight Time)">17:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Seems like it... <a href="https://en.wikipedia.org/wiki/Jujutsu">https://en.wikipedia.org/wiki/Jujutsu</a></td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Jun 28 2024 10:47:29 GMT-0700 (Pacific Daylight Time)">17:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">huh, nice writeup on jj, thanks!</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Jun 28 2024 10:47:43 GMT-0700 (Pacific Daylight Time)">17:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Hah. I screwed up the title still... so the URL slug will still reveal my ignorance forever</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Jun 28 2024 10:48:16 GMT-0700 (Pacific Daylight Time)">17:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"> You're welcome</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Jun 28 2024 10:49:20 GMT-0700 (Pacific Daylight Time)">17:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">I am definitely writing these for y'all. I continue to think plain git is bad, and we should have something better. I'm really happy to report that both Sapling and Jujutsu seem like totally cromulent options</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Jun 28 2024 11:27:45 GMT-0700 (Pacific Daylight Time)">18:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@cpeterson:mozilla.org">Chris Peterson (:cpeterson)</span>&gt;</div></td><td class="msg-cell">FWIW: Google announced that they're switching Google Sheets' calculation engine from Java-compiled-to-JS to Java-compiled-to-WasmGC. They claim a 2x speedup in Chrome. So be on the look out for any new bugs or perf issues in Firefox related to WasmGC. <a href="https://web.dev/case-studies/google-sheets-wasmgc">https://web.dev/case-studies/google-sheets-wasmgc</a></td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Jun 28 2024 11:39:10 GMT-0700 (Pacific Daylight Time)">18:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh, did they finally update that post to give a final performance difference? It looks like they did.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Jun 28 2024 11:41:34 GMT-0700 (Pacific Daylight Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">that post is not very good. "JavaScript slow. Java fast. Dynamic! Static! We worked hard. It's more better now."</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Jun 28 2024 11:43:00 GMT-0700 (Pacific Daylight Time)">18:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">even the final result they added in: "the final WasmGC version of Sheets achieves a calculation performance approximately twice as fast as JavaScript" has this weird hedging by saying <em>calculation</em> performance. Which is not a bad thing to be measuring, but the complete absence of mention of the overall performance kind of leaves me wondering.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Jun 28 2024 11:44:29 GMT-0700 (Pacific Daylight Time)">18:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I kept getting the feeling from that post that things did not go well, and now they're declaring victory while distracting attention from something. Which is weird, because they have a core piece twice as fast (after beating on it for a long time with a lot of people, but whatever). I would have expected a much clearer victory announcement.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Jun 28 2024 11:50:39 GMT-0700 (Pacific Daylight Time)">18:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> FWIW: Google announced that they're switching Google Sheets' calculation engine from Java-compiled-to-JS to Java-compiled-to-WasmGC. They claim a 2x speedup in Chrome. So be on the look out for any new bugs or perf issues in Firefox related to WasmGC. <a href="https://web.dev/case-studies/google-sheets-wasmgc">https://web.dev/case-studies/google-sheets-wasmgc</a></blockquote></mx-reply>Yeah, I saw that. I've been trying for a while to get access to the new version, but haven't gotten access yet. For a while they relied on a non-standardized wasm proposal (stringref) which we didn't support in the Wasm CG or implement in SM. But then we got them to switch to a different proposal (js-string-builtins), which we do support and implement. But I heard that hadn't fully switched over yet. I should reach out again</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Jun 28 2024 11:51:45 GMT-0700 (Pacific Daylight Time)">18:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> even the final result they added in: "the final WasmGC version of Sheets achieves a calculation performance approximately twice as fast as JavaScript" has this weird hedging by saying <em>calculation</em> performance. Which is not a bad thing to be measuring, but the complete absence of mention of the overall performance kind of leaves me wondering.</blockquote></mx-reply>I got the impression that it's just their calculation engine that's in Java/Wasm-GC, so their UI might not be affected. But I suppose you'd hope calculations getting faster would improve UX?</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Jun 28 2024 11:53:20 GMT-0700 (Pacific Daylight Time)">18:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">yeah, I guess I wanted a brief answer to "does it matter?" Even if it was handwavy. There must be some end to end perf test (make a change, measure the latency until the update is displayed?) that could show a benefit to a user.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Jun 28 2024 12:01:29 GMT-0700 (Pacific Daylight Time)">19:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@bvisness:mozilla.org">bvisness</span>&gt;</div></td><td class="msg-cell">spreadsheets do a lot of calculations...</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Jun 28 2024 12:22:14 GMT-0700 (Pacific Daylight Time)">19:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">so it should be an easy connection to make. But we have no idea how much the "calculation engine" actually handles. For example, if  massaging inputs and outputs from this engine were more expensive than 90% of the calculations you end up doing, then Amdahl's little brother is going to laugh at your 2x speedup.</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Jun 28 2024 12:23:41 GMT-0700 (Pacific Daylight Time)">19:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I dunno, normally I don't push back on core tech blog posts, it's just that the way this one was written rubbed me the wrong way and made me suspicious</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Jun 28 2024 13:01:36 GMT-0700 (Pacific Daylight Time)">20:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-4">iain</span>: I have a prototype of the invalidation based generation counter on try right now... so quicker than earlier next week. We'll see how it goes :)</blockquote></mx-reply>Huh. Well first toss at speedometer has almost no impact except for a few high confidence regressions: <a href="https://treeherder.mozilla.org/perfherder/comparesubtest?originalProject=try&amp;newProject=try&amp;newRevision=4b90f651adf793124230740393537f4b577d2542&amp;originalSignature=4586009&amp;newSignature=4586009&amp;framework=13&amp;application=firefox&amp;originalRevision=89dc6f0f9886e50e3d2210c2d7607e2f81e9cd3d&amp;page=1">https://treeherder.mozilla.org/perfherder/comparesubtest?originalProject=try&amp;newProject=try&amp;newRevision=4b90f651adf793124230740393537f4b577d2542&amp;originalSignature=4586009&amp;newSignature=4586009&amp;framework=13&amp;application=firefox&amp;originalRevision=89dc6f0f9886e50e3d2210c2d7607e2f81e9cd3d&amp;page=1</a></td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Jun 28 2024 13:02:06 GMT-0700 (Pacific Daylight Time)">20:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">(I am stealing this approach to dependency management however) </td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Jun 28 2024 13:15:32 GMT-0700 (Pacific Daylight Time)">20:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">mgaudet</span>: Huh. Does it affect jetstream 2 at all?</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Jun 28 2024 13:17:11 GMT-0700 (Pacific Daylight Time)">20:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">didn't dispatch the run -- will have to try on Monday </td></tr>

</tbody></table></div></div></div>
</body></html>