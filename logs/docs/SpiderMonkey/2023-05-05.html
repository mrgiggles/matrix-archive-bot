<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-05-05</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-05-05<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-05-04" class="nav-link"><span>prev</span></a>
<a href="2023-05-06" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri May 05 2023 03:41:52 GMT-0700 (Pacific Daylight Time)">10:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">jandem</span>: <span class="nick-4">jonco</span> curious, has anyone looked into <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1821293">https://bugzilla.mozilla.org/show_bug.cgi?id=1821293</a> yet?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri May 05 2023 03:42:29 GMT-0700 (Pacific Daylight Time)">10:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">Does js engine perhaps need some more information whether DOM thinks the global is probably gone</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri May 05 2023 03:43:57 GMT-0700 (Pacific Daylight Time)">10:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">smaug</span>: I guess this is on my backlog but I don't have time to work on it at the moment</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri May 05 2023 03:46:43 GMT-0700 (Pacific Daylight Time)">10:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@smaug:mozilla.org">smaug</span>&gt;</div></td><td class="msg-cell">ok. Looks like especially Android and linux would like using less memory while running sp3.  Perhaps I'll try to hack something there</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri May 05 2023 04:17:29 GMT-0700 (Pacific Daylight Time)">11:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">Will the mastodon account be moving over to <a href="http://mozilla.social">mozilla.social</a>? ie this one <a href="https://mastodon.social/@SpiderMonkey">https://mastodon.social/@SpiderMonkey</a></td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri May 05 2023 04:57:26 GMT-0700 (Pacific Daylight Time)">11:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">is that even possible to have a Firefox account held by a group of persons instead of invididuals?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri May 05 2023 04:58:00 GMT-0700 (Pacific Daylight Time)">11:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">Let's not ask why this service even requires a Firefox Account ðŸ¤¦</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri May 05 2023 05:55:46 GMT-0700 (Pacific Daylight Time)">12:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">evilpie</span>: hey, I'm looking at WPT failures related to worker modules.  I saw you filed for the credentials failures.  Do you happen to know why the following tests are failing? /workers/modules/dedicated-worker-import-data-url-cross-origin.html and /workers/modules/dedicated-worker-import-referrer.html (plus shared- versions)</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri May 05 2023 06:13:01 GMT-0700 (Pacific Daylight Time)">13:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> is that even possible to have a Firefox account held by a group of persons instead of invididuals?</blockquote></mx-reply>Apparently it's planned</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri May 05 2023 06:16:16 GMT-0700 (Pacific Daylight Time)">13:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-15">evilpie</span>: hey, I'm looking at WPT failures related to worker modules.  I saw you filed for the credentials failures.  Do you happen to know why the following tests are failing? /workers/modules/dedicated-worker-import-data-url-cross-origin.html and /workers/modules/dedicated-worker-import-referrer.html (plus shared- versions)</blockquote></mx-reply>Let me take a look. Most likely it's the same root cause that is also causing problems for CSP.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri May 05 2023 06:32:53 GMT-0700 (Pacific Daylight Time)">13:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">For <code>dedicated-worker-import-data-url-cross-origin.html</code> I am not really sure what is going on. I wasn't aware of this restriction for imports from data: URLs. I suspect we might be missing something from fetch, but I would necessarily trust the WPT 100% either.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri May 05 2023 06:57:15 GMT-0700 (Pacific Daylight Time)">13:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@jhirsch:mozilla.org">Jared Hirsch [:jhirsch]</span>&gt;</div></td><td class="msg-cell">[edit: found the answer in <a href="https://firefox-source-docs.mozilla.org/js/build.html#setting-up-a-mozconfig">the docs</a>, sorry!] hey folks - what are the suggested mozconfig settings for spidermonkey?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri May 05 2023 06:59:54 GMT-0700 (Pacific Daylight Time)">13:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: for the dynamic import issue. We seem to always be using the fetchOptions (which contains the referrer policy) from the active script (which I think would be the main Worker script fetched with the windows' policy) in <code>WorkerModuleLoader::CreateDynamicImport</code>. I think <code>workerPrivate-&gt;GetReferrerPolicy()</code> set from <code>WorkerPrivate::UpdateReferrerInfoFromHeader</code> would be correct instead</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri May 05 2023 07:00:28 GMT-0700 (Pacific Daylight Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">evilpie</span>: great, thank you for investigating these</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri May 05 2023 15:07:35 GMT-0700 (Pacific Daylight Time)">22:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rice7th:matrix.org">rice7th</span>&gt;</div></td><td class="msg-cell">Hello! Sorry for the newly created account.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri May 05 2023 15:08:54 GMT-0700 (Pacific Daylight Time)">22:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rice7th:matrix.org">rice7th</span>&gt;</div></td><td class="msg-cell">I've recently made a post on r/firefox about the concerning performance of Spidermonkey compared to V8 and JSC. <a href="https://www.reddit.com/r/firefox/comments/138uciq/why_spidermonkey_is_way_slower_than_v8_or/">https://www.reddit.com/r/firefox/comments/138uciq/why_spidermonkey_is_way_slower_than_v8_or/</a></td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri May 05 2023 15:09:13 GMT-0700 (Pacific Daylight Time)">22:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rice7th:matrix.org">rice7th</span>&gt;</div></td><td class="msg-cell">somebpdy in the comments told me to ask here for more technical details, so here am I.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri May 05 2023 15:10:06 GMT-0700 (Pacific Daylight Time)">22:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rice7th:matrix.org">rice7th</span>&gt;</div></td><td class="msg-cell">I need to however warn you that I am still learning such topics and I might have said some wrong things, so please, correct me if I am wrong</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri May 05 2023 15:15:44 GMT-0700 (Pacific Daylight Time)">22:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">SpiderMonkey hasn't been a tracing JIT for around a decade, for what it is worth.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri May 05 2023 15:17:22 GMT-0700 (Pacific Daylight Time)">22:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">Also, Octane 2.0 is about a decade old. I wouldn't worry too much about how different engines perform in that.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri May 05 2023 15:18:02 GMT-0700 (Pacific Daylight Time)">22:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">If you have specific websites where Firefox is slow, you are better off filing issues for those and not focusing on benchmarks. Writing a good benchmark is very difficult, so looking at actual website performance is a better place to start.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri May 05 2023 15:20:33 GMT-0700 (Pacific Daylight Time)">22:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">rice7th</span>: Octane is basically retired at this point. V8 wrote a good blog post about why: <a href="https://v8.dev/blog/retiring-octane">https://v8.dev/blog/retiring-octane</a></td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri May 05 2023 15:23:19 GMT-0700 (Pacific Daylight Time)">22:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">When we did a big overhaul of our optimizing compiler a few years ago (<a href="https://hacks.mozilla.org/2020/11/warp-improved-js-performance-in-firefox-83/">https://hacks.mozilla.org/2020/11/warp-improved-js-performance-in-firefox-83/</a>), we made the deliberate choice not to worry about getting Octane performance back, because it mostly doesn't matter in the real world</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri May 05 2023 15:26:04 GMT-0700 (Pacific Daylight Time)">22:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">The benchmark of choice these days is Speedometer. We're still a bit behind Chrome on it, but we're in the middle of an active push to catch up. Speedometer 3 (an updated version of the current Speedometer 2) is currently being developed as a collaboration between the major browsers; we are aiming for at least parity when it releases.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri May 05 2023 15:29:36 GMT-0700 (Pacific Daylight Time)">22:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">The goal of any good benchmark is to capture similar behaviour to real-world websites, so that improving the benchmark score makes performance better for real users. If you have real-world use cases where Firefox is noticeably slower, please open a bug. The more specific you can be, the better.</td></tr>

</tbody></table></div></div></div>
</body></html>