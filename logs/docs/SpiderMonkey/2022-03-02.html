<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-03-02</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-03-02<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-03-01" class="nav-link"><span>prev</span></a>
<a href="2022-03-03" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Mar 02 2022 01:57:46 GMT-0800 (Pacific Standard Time)">09:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">Hi! Does someone know how to programmatically clear WASM sources? I'm trying to write a test around this in devtools, where we can't display the WASM sources once spidermonkey dismiss their sources.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Mar 02 2022 02:00:10 GMT-0800 (Pacific Standard Time)">10:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">It relates to this precise case: <a href="https://searchfox.org/mozilla-central/rev/292d17c13daa61016fd082e2337297091d53a015/js/src/debugger/Source.cpp#267-273">https://searchfox.org/mozilla-central/rev/292d17c13daa61016fd082e2337297091d53a015/js/src/debugger/Source.cpp#267-273</a></td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Mar 02 2022 02:13:49 GMT-0800 (Pacific Standard Time)">10:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">^ Maybe <span class="nick-15">lth</span> would know.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Mar 02 2022 02:14:12 GMT-0800 (Pacific Standard Time)">10:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@lth:mozilla.org">lth</span>&gt;</div></td><td class="msg-cell">looking</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Mar 02 2022 02:16:08 GMT-0800 (Pacific Standard Time)">10:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@lth:mozilla.org">lth</span>&gt;</div></td><td class="msg-cell">wasm "sources", ie bytecode, can't be cleared explicitly in general, the bytecode is gc'd with its Module</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Mar 02 2022 02:16:25 GMT-0800 (Pacific Standard Time)">10:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@lth:mozilla.org">lth</span>&gt;</div></td><td class="msg-cell">generally speaking, <span class="nick-14">yury</span>  probably knows a lot more about this than i do</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Mar 02 2022 02:17:26 GMT-0800 (Pacific Standard Time)">10:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@lth:mozilla.org">lth</span>&gt;</div></td><td class="msg-cell">if by "sources" you mean textual-format assembly then I really don't know how this works</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Mar 02 2022 02:30:16 GMT-0800 (Pacific Standard Time)">10:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">I'm also having very limited knowledge on wasm, so I'm not sure about exactly what is what.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Mar 02 2022 02:30:34 GMT-0800 (Pacific Standard Time)">10:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">But I have a concrete example on <a href="http://chat.mozilla.org">chat.mozilla.org</a>. There is this wasm file: <a href="https://chat.mozilla.org/olm.cccfd1d.wasm">https://chat.mozilla.org/olm.cccfd1d.wasm</a></td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Mar 02 2022 02:31:14 GMT-0800 (Pacific Standard Time)">10:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">in the debugger you can see its sources (i.e. <code>(module (func $import0 (import "a" "a") (param i32 i32 i32) (result i32)) ...</code>) very rarely</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Mar 02 2022 02:31:37 GMT-0800 (Pacific Standard Time)">10:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">mostly only the first time you load the page. if you restart firefox, you won't be able to see its sources anymore.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Mar 02 2022 02:31:54 GMT-0800 (Pacific Standard Time)">10:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">I'm trying to add a test to cover this.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Mar 02 2022 03:00:55 GMT-0800 (Pacific Standard Time)">11:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@lth:mozilla.org">lth</span>&gt;</div></td><td class="msg-cell">ok, so that is a rendered version of the source, the source being binary</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Mar 02 2022 03:02:13 GMT-0800 (Pacific Standard Time)">11:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@lth:mozilla.org">lth</span>&gt;</div></td><td class="msg-cell">uncertain about who does the rendering any more, we removed that code from the engine; the debugger may have its own code for it (likely third-party rust, from wasm-tools)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Mar 02 2022 04:01:03 GMT-0800 (Pacific Standard Time)">12:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@l11d:mozilla.org">l11d</span>&gt;</div></td><td class="msg-cell">if I define a MConstant in the graph.entryBlock() block, can I use this constant in all phis throughout the MIRGraph?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Mar 02 2022 04:06:38 GMT-0800 (Pacific Standard Time)">12:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">l11d</span>: no, because of OSR.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Mar 02 2022 04:07:08 GMT-0800 (Pacific Standard Time)">12:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">l11d</span>: We might have a few exception for constants, where it is known that they are "inlined" by the LIR.</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Mar 02 2022 04:11:51 GMT-0800 (Pacific Standard Time)">12:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@l11d:mozilla.org">l11d</span>&gt;</div></td><td class="msg-cell">this explains the assert I was seeing. I tried adding the constant to the OSR block directly, but this fails with "We are not supposed to add any instruction in OSR blocks". so how does one select a constant via phi (0, if this makes a difference) when entering via an OSR block?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Mar 02 2022 04:38:27 GMT-0800 (Pacific Standard Time)">12:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">I guess only the "inlined" by LIR (generate at uses) is the only remaining option if the value is not represented on the interpreter stack.</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Mar 02 2022 06:47:19 GMT-0800 (Pacific Standard Time)">14:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">ochameau</span>: as it was designed, the wasm module/instance will not keep original source around -- it can be really big</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Mar 02 2022 06:50:02 GMT-0800 (Pacific Standard Time)">14:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell">That is why we need devtools to reload a page to engage the "debug" mode. The JIT also compiles code without any debug info or metadata, so it will be impossible to recompile a function/module to do debugging on the spot</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Mar 02 2022 06:52:54 GMT-0800 (Pacific Standard Time)">14:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell">Keeping wasm bytecode in memory can be a bad idea, especially on low powered devices. That's why devtools (by itself) uses bytecode and generates text format to save space in JS runtime on the device that executes wasm, and let UI handle text representation.</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Mar 02 2022 07:57:39 GMT-0800 (Pacific Standard Time)">15:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">yury</span>: note that I'm not trying to suggest any change. I'm only trying to reproduce a test. Do you know how to reliably flush the original sources (programmatically)? Or are you saying we never keep orginal source when Devtools aren't opened? (Is so I could probably reproduce by loading the page <em>before</em> opening the devtools?)</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Mar 02 2022 07:59:15 GMT-0800 (Pacific Standard Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell">Idea is to never keep wasm binary (sources?) around, unless the runtime is in debug mode</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Mar 02 2022 08:00:10 GMT-0800 (Pacific Standard Time)">16:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell">devtools can tell runtime to switch into debug mode via observeAsmJS attribute</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Mar 02 2022 08:03:41 GMT-0800 (Pacific Standard Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell">is this the test <a href="https://searchfox.org/mozilla-central/source/devtools/server/tests/xpcshell/test_wasm_source-01.js">https://searchfox.org/mozilla-central/source/devtools/server/tests/xpcshell/test_wasm_source-01.js</a> ?</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Mar 02 2022 08:03:51 GMT-0800 (Pacific Standard Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">Speaking about <code>observeAsmJS</code> I put up a patch to toggle this on only when the debugger is opened: <a href="https://phabricator.services.mozilla.com/D140069">https://phabricator.services.mozilla.com/D140069</a> I have no real idea of the consequences of doing this. So I'm eager to get your feedback on it.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Mar 02 2022 08:05:43 GMT-0800 (Pacific Standard Time)">16:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">No that's a brand new test. We are significantly increasing (and improving) the test coverage of the debugger. I'm trying to assert the various times where we see <code>Error loading this URI: Unknown source</code> message when we open a WASM source`.</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Mar 02 2022 08:10:21 GMT-0800 (Pacific Standard Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">ochameau</span>: is this code common to main thread and workers?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Mar 02 2022 08:11:51 GMT-0800 (Pacific Standard Time)">16:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell">e.g. if new worker will be created, will it receive <code>observeAsmJS: true,</code></td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Mar 02 2022 08:12:30 GMT-0800 (Pacific Standard Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">Yes, in theory it should. But do not hesitate to report anything suspicious. Workers are still having a complex codepath in DevTools.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Mar 02 2022 08:14:00 GMT-0800 (Pacific Standard Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">There might (but I hope not) be some race condition. It isn't completely impossible that the flag is set late.</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Mar 02 2022 08:14:41 GMT-0800 (Pacific Standard Time)">16:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">I would be happy to write a devtools test if you see a buggy STR.</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Mar 02 2022 08:17:02 GMT-0800 (Pacific Standard Time)">16:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@yury:mozilla.org">yury</span>&gt;</div></td><td class="msg-cell"><code>observeAsmJS: true</code> will set runtime into "debug" mode, though it will not change state of already loaded wasm modules/instances, so race conditions can introduce some issues</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Mar 02 2022 08:50:02 GMT-0800 (Pacific Standard Time)">16:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">l11d</span>: Is there a reason you can't just emit the constant everywhere and let the optimizer clean it up?</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Mar 02 2022 09:00:18 GMT-0800 (Pacific Standard Time)">17:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@l11d:mozilla.org">l11d</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">iain</span>: I'd like to select (via phi) a different constant depending on the predecessor. if the predecessor happens to be a (the?) osrblock, then adding the value to the osrblock fails because it cannot be modified. alternatively, I thought about adding the constant to the entryblock, however this also failed because the entryblock doesn't dominate the osrblock (unless I got something wrong)</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Mar 02 2022 09:02:48 GMT-0800 (Pacific Standard Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@l11d:mozilla.org">l11d</span>&gt;</div></td><td class="msg-cell">its not terribly important though; I can work-around the problem via a safe fallback strategy</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Mar 02 2022 09:16:22 GMT-0800 (Pacific Standard Time)">17:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Ah, got it</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Mar 02 2022 09:17:03 GMT-0800 (Pacific Standard Time)">17:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">You are correct that there can only be one OSR block, and the entry block doesn't dominate the OSR block</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Mar 02 2022 09:21:51 GMT-0800 (Pacific Standard Time)">17:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Another thing you might run into is that in some cases the OSR and entry blocks are disconnected. For example, in <code>function foo() { bar(); for (...) { /*computation here*/ } }</code>, if we execute <code>bar()</code> in the C++ interpreter before we attach ICs, then OSR into the loop, then the Warp CacheIR transpiler won't have any CacheIR data for the call, so it will generate an MBail. We end up pruning the unreachable path from the entry block to the OSR header, so the CFG contains a vestigial entry block (that will almost immediately bail) and a loop that can only be entered via OSR</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Mar 02 2022 09:22:46 GMT-0800 (Pacific Standard Time)">17:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Not sure if that will affect your plans</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Mar 02 2022 09:31:02 GMT-0800 (Pacific Standard Time)">17:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@l11d:mozilla.org">l11d</span>&gt;</div></td><td class="msg-cell">thanks a lot for the in-depth explanation; I need to think about whether this impacts my scheme</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Mar 02 2022 10:22:45 GMT-0800 (Pacific Standard Time)">18:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">l11d</span>: Take this with a grain of salt, but off the top of my head it also seems fine (especially if you are just doing this in your own local build) to relax the restrictions on inserting nodes into OSR blocks. It was added as part of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1257929">this bug</a>, and AFAICT it was done out of precaution, not necessity. We special-case range analysis to insert nodes in the OSR block (<a href="https://searchfox.org/mozilla-central/source/js/src/jit/RangeAnalysis.cpp#2516-2524">see here</a>), so you could try something similar in your case.</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Mar 02 2022 12:24:14 GMT-0800 (Pacific Standard Time)">20:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">bleh, naming. I'm stuck on naming. Of something that almost nobody will ever see. I'm wasting my life, aren't I?</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Mar 02 2022 12:25:14 GMT-0800 (Pacific Standard Time)">20:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">It's one of the two fundamental hard problems in programming, along with cache invalidation and off-by-one errors</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Mar 02 2022 12:25:38 GMT-0800 (Pacific Standard Time)">20:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">yep</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Mar 02 2022 12:26:51 GMT-0800 (Pacific Standard Time)">20:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I made an attempt to come up with a version of that joke that incorporated cache invalidation (eg by inserting another entry in the middle of the list), but it was too clunky.</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Mar 02 2022 12:27:07 GMT-0800 (Pacific Standard Time)">20:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">Waldo</span> would probably make a valiant attempt of it.</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Mar 02 2022 12:28:38 GMT-0800 (Pacific Standard Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">It's one of the two fundamental hard problems in programming, along with cache invalidation and off-by-one errors</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Mar 02 2022 12:28:44 GMT-0800 (Pacific Standard Time)">20:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Wait, did I already tell that joke?</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Mar 02 2022 13:44:14 GMT-0800 (Pacific Standard Time)">21:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">:-)</td></tr>

</tbody></table></div></div></div>
</body></html>