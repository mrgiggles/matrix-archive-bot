<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-11-27</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-11-27<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-11-24" class="nav-link"><span>prev</span></a>
<a href="2023-11-28" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sun Nov 26 2023 22:23:54 GMT-0800 (Pacific Standard Time)">06:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@mayankleoboy1:mozilla.org">mayankleoboy1</span>&gt;</div></td><td class="msg-cell">There is a JS demo that calculates pi (runs for maybe 10-20 minutes). During its run, each time you take a gecko profile , there are some bailout markers near the beginning of the profile. So if you take 10 profiles each 2 seconds long, each profile has bailout markers. However, if you take a single profile of 20 seconds, that will also show few bailout markers in the beginning (as opposed to bailout markers every 2 seconds).The code does run in ion throughout. Is that expected, or worth filing a bug?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Nov 27 2023 03:48:36 GMT-0800 (Pacific Standard Time)">11:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-3">mayankleoboy1</span>: when the profiler is turned on we discard jit code so I think that behavior makes sense</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Nov 27 2023 04:09:41 GMT-0800 (Pacific Standard Time)">12:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">jandem</span>: hi, now I'm looking into reducing the memory consumption around the atomization.  and the current plan is to use an offset into a large string instead of pointer (bug 1866643), so that it reduces the data size and also allow more data shared across processes.  It has one downside, which is, it prevents the compiler's string deduplication, and each string literal needs to be rewritten to refer the substring of the large string, with function call or macro (the comment 1 there).   it's similar to <code>js_SOMETHING_str</code> in previous code, but affects more cases.  can I have your opinion here?  do you think it's feasible, or it's too much troublesome?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Nov 27 2023 04:09:43 GMT-0800 (Pacific Standard Time)">12:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1866643">https://bugzil.la/1866643</a> — ASSIGNED (arai) — Remove pointer from WellKnownAtomInfo</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Nov 27 2023 04:14:18 GMT-0800 (Pacific Standard Time)">12:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, basically, we'll need to write <code>MACRO(something)</code> instead of <code>"something"</code> for any string literals that's part of well-known atoms</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Nov 27 2023 04:44:17 GMT-0800 (Pacific Standard Time)">12:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">arai</span>: so the issue is when a string is used both as well known atom and also as <code>"string literal"</code> in the C++ code?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Nov 27 2023 04:44:43 GMT-0800 (Pacific Standard Time)">12:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yes</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Nov 27 2023 04:45:10 GMT-0800 (Pacific Standard Time)">12:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">such as, the method name is used in profiler label or error message</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Nov 27 2023 04:47:15 GMT-0800 (Pacific Standard Time)">12:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">will the strings have null terminators or is the length stored separately?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Nov 27 2023 04:48:29 GMT-0800 (Pacific Standard Time)">12:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I'm thinking about putting null terminators in the large string. that's the same way as <a href="https://searchfox.org/mozilla-central/rev/f030995a79461379153293c0e07f4982afe9ac28/xpcom/reflect/xptinfo/xptcodegen.py#561">xptcodegen.py</a></td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Nov 27 2023 04:49:15 GMT-0800 (Pacific Standard Time)">12:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">the length is stored into <a href="https://searchfox.org/mozilla-central/rev/f030995a79461379153293c0e07f4982afe9ac28/js/src/vm/WellKnownAtom.h#41">js::WellKnownAtomInfo</a> array, separately than the large string itself.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Mon Nov 27 2023 04:49:52 GMT-0800 (Pacific Standard Time)">12:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">putting null terminators allows the above <code>MACRO(something)</code>, to get the substring of the large string and use it in place of string literal</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Mon Nov 27 2023 04:52:05 GMT-0800 (Pacific Standard Time)">12:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">the macro is probably okay if it lets us save memory for the well known atoms, but it would be good to have some numbers for that</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Mon Nov 27 2023 04:55:10 GMT-0800 (Pacific Standard Time)">12:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is it the number of affected cases, or how much it affects in the memory consumption?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Mon Nov 27 2023 04:56:22 GMT-0800 (Pacific Standard Time)">12:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">for affected cases, there are ~1100 string literals with the same content as well-known atoms</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Mon Nov 27 2023 04:57:04 GMT-0800 (Pacific Standard Time)">12:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">it will increase with bug 1847677 (given we'll add most of built-in properties)</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Mon Nov 27 2023 04:57:05 GMT-0800 (Pacific Standard Time)">12:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1847677">https://bugzil.la/1847677</a> — ASSIGNED (arai) — Add well-known-ids variant to JSPropertySpec</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Mon Nov 27 2023 04:59:17 GMT-0800 (Pacific Standard Time)">12:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I'll check the actual number for the memory consumption.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Mon Nov 27 2023 05:00:54 GMT-0800 (Pacific Standard Time)">13:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">is the goal to improve performance too? it would be good to have some numbers for that too because it does make it a little more work to add a new property name</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Mon Nov 27 2023 05:03:15 GMT-0800 (Pacific Standard Time)">13:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yes, the final goal is the performance improvement around the atomization, both in SpiderMonkey and Gecko (including CreateInterfaceObjects (bug 1850344, bug 1846110))</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Mon Nov 27 2023 05:03:42 GMT-0800 (Pacific Standard Time)">13:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I'll test again with the patch stack with the above macro way</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Mon Nov 27 2023 05:04:25 GMT-0800 (Pacific Standard Time)">13:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1850344">https://bugzil.la/1850344</a> — ASSIGNED (arai) — Use permanent atom for startup-related or frequently-used atoms, or all atoms used by bindings</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Mon Nov 27 2023 05:04:26 GMT-0800 (Pacific Standard Time)">13:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1846110">https://bugzil.la/1846110</a> — NEW (nobody) — Too much time spent in CreateInterfaceObjects during sp3</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Mon Nov 27 2023 05:06:03 GMT-0800 (Pacific Standard Time)">13:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I hope bug 1866644 patch (<a href="https://treeherder.mozilla.org/jobs?repo=try&amp;revision=b740130edd638336291ceb004b541a4cae1bb68c">prototype</a>) makes the new property work less troublesome</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Mon Nov 27 2023 05:06:05 GMT-0800 (Pacific Standard Time)">13:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1866644">https://bugzil.la/1866644</a> — ASSIGNED (arai) — Generate CommonPropertyNames.h from more structured data source</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Mon Nov 27 2023 05:07:59 GMT-0800 (Pacific Standard Time)">13:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(possible more ambitious plan would be to auto-generate all boilerplate things around built-ins, such as the JSClass definitions, property definitions, etc)</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Mon Nov 27 2023 05:08:59 GMT-0800 (Pacific Standard Time)">13:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> (if you go with building 91, you won't need the 78 package tho)</blockquote></mx-reply>Hello again, I'm now trying to build 91, but I get an error that a directory _build/_virtualenvs/common/local/lib/python3.11/dist-packages' is not found. When  I look I see a directory site-packages. Can you tell me how i fix that please?</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Mon Nov 27 2023 05:09:09 GMT-0800 (Pacific Standard Time)">13:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(the patch will add static data for the built-in properties. <a href="https://hg.mozilla.org/try/rev/6565059a4a8bcb009e0740fc9d7e15ed3fb37464#l4.1168">example</a>)</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Mon Nov 27 2023 05:09:54 GMT-0800 (Pacific Standard Time)">13:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">owl91</span>: when do you hit the error?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Mon Nov 27 2023 05:10:29 GMT-0800 (Pacific Standard Time)">13:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">when i run the ../configure command</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Mon Nov 27 2023 05:12:43 GMT-0800 (Pacific Standard Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">arai</span>: regarding auto-generating boilerplate for builtins, that's also related to the ideas to have WebIDL code generation in SM</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Mon Nov 27 2023 05:12:52 GMT-0800 (Pacific Standard Time)">13:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">owl91</span>: can you post the entire output of the configure command <a href="https://paste.mozilla.org/">https://paste.mozilla.org/</a> ?  it may contain some more hint how that happened</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Mon Nov 27 2023 05:15:21 GMT-0800 (Pacific Standard Time)">13:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">i've pasted it, do you see it?</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Mon Nov 27 2023 05:16:07 GMT-0800 (Pacific Standard Time)">13:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">jandem</span>: yeah, if we can reuse the WebIDL code generation, this will also simplify the well-known atom code, given WebIDL bindings will also need to generate the similar atom data</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Mon Nov 27 2023 05:16:51 GMT-0800 (Pacific Standard Time)">13:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">owl91</span>: once you posted, you'll get the URL for your paste.  please post the URL here, so that others can see it</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Mon Nov 27 2023 05:19:34 GMT-0800 (Pacific Standard Time)">13:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell"><a href="https://paste.mozilla.org/cjiQWBn6">https://paste.mozilla.org/cjiQWBn6</a></td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Mon Nov 27 2023 05:21:55 GMT-0800 (Pacific Standard Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">owl91</span>: just to make sure, you're trying to build spidermonkey, right?  in that case, you need to run <code>js/src/configure</code> instead of <code>configure</code> at the top-level</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Mon Nov 27 2023 05:22:25 GMT-0800 (Pacific Standard Time)">13:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">not sure it solves the issue tho</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Mon Nov 27 2023 05:27:33 GMT-0800 (Pacific Standard Time)">13:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I'll look into the WebIDL plan.  Using WebIDL as data source sounds more easy to maintain than the above prototype's python data</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Mon Nov 27 2023 05:27:57 GMT-0800 (Pacific Standard Time)">13:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">i was using the wrong one, but i used the right one and got exactly the same output and error</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Mon Nov 27 2023 05:29:39 GMT-0800 (Pacific Standard Time)">13:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">maybe python3 support wasn't a thing at the point of 91? I guess the build system migration from python2 to python3 was a recent thing</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Mon Nov 27 2023 05:31:51 GMT-0800 (Pacific Standard Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(I don't remember correctly...)</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Mon Nov 27 2023 05:32:48 GMT-0800 (Pacific Standard Time)">13:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">or maybe, downgrading the python 3 version might solve</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Mon Nov 27 2023 05:33:10 GMT-0800 (Pacific Standard Time)">13:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">i got this dist-packages is the debian-specific directory where apt and friends install their stuff, and site-packages is the standard pip directory.</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Mon Nov 27 2023 05:33:47 GMT-0800 (Pacific Standard Time)">13:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">and someone solved it by creating a symlink between dist-packages and site-packages</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Mon Nov 27 2023 05:33:56 GMT-0800 (Pacific Standard Time)">13:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">you could look into the <code>libmozjs91-dev</code> package's script (from older ubuntu) and dependencies to see how it builds</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Mon Nov 27 2023 05:35:15 GMT-0800 (Pacific Standard Time)">13:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">does that contain all the dependencies for spidermonkey</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Mon Nov 27 2023 05:35:17 GMT-0800 (Pacific Standard Time)">13:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">?</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Mon Nov 27 2023 05:36:45 GMT-0800 (Pacific Standard Time)">13:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">or is the spidermonkey 91 command available somewhere that i can just install on Ubuntu 23.04?</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Mon Nov 27 2023 05:36:53 GMT-0800 (Pacific Standard Time)">13:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">oh, I mean, the script to build the <code>libmozjs91-dev</code> package</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Mon Nov 27 2023 05:37:27 GMT-0800 (Pacific Standard Time)">13:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">where can i get a built version of 91</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Mon Nov 27 2023 05:37:43 GMT-0800 (Pacific Standard Time)">13:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what I mean is.  there's <code>libmozjs91-dev</code> package on 22.04.  the package's build script should have sufficient information what we'll need</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Mon Nov 27 2023 05:38:47 GMT-0800 (Pacific Standard Time)">13:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">ok, sorry, i only really know the basics, so can you tell me where i would see the build script please?</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Mon Nov 27 2023 05:39:34 GMT-0800 (Pacific Standard Time)">13:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">somewhere in <a href="https://packages.ubuntu.com/jammy/libmozjs-91-dev">https://packages.ubuntu.com/jammy/libmozjs-91-dev</a></td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Mon Nov 27 2023 05:40:06 GMT-0800 (Pacific Standard Time)">13:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I don't know much about deb package internals</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Mon Nov 27 2023 05:40:33 GMT-0800 (Pacific Standard Time)">13:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">thanks, i'll dig</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Mon Nov 27 2023 05:47:27 GMT-0800 (Pacific Standard Time)">13:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if it comes from the python version difference, and in case you cannot use older python, you'll need to look into the build script and modify the code to workaround the error.  the file is <code>python/mozbuild/mozbuild/<a href="http://virtualenv.py">virtualenv.py</a></code></td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Mon Nov 27 2023 05:48:32 GMT-0800 (Pacific Standard Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">actually, <a href="https://searchfox.org/mozilla-esr91/source/python/mozbuild/mozbuild/virtualenv.py#569">the function itself</a> is to workaround the distro python's special behavior.   so, you'll need to add yet another fix</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Mon Nov 27 2023 05:48:33 GMT-0800 (Pacific Standard Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">ok, i'll follow that up, thanks a lot for your help</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Mon Nov 27 2023 05:49:01 GMT-0800 (Pacific Standard Time)">13:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">or simply use older python, with pyenv or something</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Mon Nov 27 2023 05:51:40 GMT-0800 (Pacific Standard Time)">13:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@owl91:mozilla.org">owl91</span>&gt;</div></td><td class="msg-cell">another option, thanks</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Mon Nov 27 2023 10:17:00 GMT-0800 (Pacific Standard Time)">18:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">And... I've been bitted in the ass by LIFO constraints on <code>Rooted&lt;T&gt;</code> again.<br>Time to switch to <code>Vec&lt;Box&lt;Heap&lt;T&gt;&gt;&gt;</code> ig</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Mon Nov 27 2023 13:11:05 GMT-0800 (Pacific Standard Time)">21:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/search?q=compile-and-go&amp;path=">non-compile-and-go scripts</a> are no longer a thing right? (as in, I have no idea what it would be)</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Mon Nov 27 2023 13:23:20 GMT-0800 (Pacific Standard Time)">21:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">it's removed in bug 679939</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Mon Nov 27 2023 13:23:22 GMT-0800 (Pacific Standard Time)">21:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/679939">https://bugzil.la/679939</a> — RESOLVED (bzbarsky) — remove COMPILE_N_GO</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Mon Nov 27 2023 13:25:09 GMT-0800 (Pacific Standard Time)">21:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Ah, nice. Ok. I'll open a bug to update the comment -- thanks for the quick archaeology! </td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Mon Nov 27 2023 13:50:10 GMT-0800 (Pacific Standard Time)">21:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@bthrall:mozilla.org">Bryan Thrall [:bthrall]</span>&gt;</div></td><td class="msg-cell">Do we have a meta bug for updating <a href="https://firefox-source-docs.mozilla.org/js">the SpiderMonkey source docs</a>?</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Mon Nov 27 2023 14:08:54 GMT-0800 (Pacific Standard Time)">22:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">I don't believe so... </td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Mon Nov 27 2023 14:18:39 GMT-0800 (Pacific Standard Time)">22:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@bthrall:mozilla.org">Bryan Thrall [:bthrall]</span>&gt;</div></td><td class="msg-cell">Ok, I'll just use the internal documentation one, then</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Mon Nov 27 2023 14:41:08 GMT-0800 (Pacific Standard Time)">22:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">prototype with WebIDL <a href="https://hg.mozilla.org/try/rev/35c19dae1286d54ea3d884833efa487a8a55243b">https://hg.mozilla.org/try/rev/35c19dae1286d54ea3d884833efa487a8a55243b</a>  it uses the dom/bindings' WebIDL parser. so we could later extend it to also utilize the binding codegen as well</td></tr>

</tbody></table></div></div></div>
</body></html>