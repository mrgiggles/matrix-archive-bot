<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-02-21</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-02-21<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-02-20" class="nav-link"><span>prev</span></a>
<a href="2023-02-22" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Feb 21 2023 01:19:36 GMT-0800 (Pacific Standard Time)">09:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell"><p>I want to add a <code>Debugger.Source.column</code> property (the same way we have a <code>Debugger.Source.startLine</code> one).<br><code>options.column</code> seems to exist around here <a href="https://searchfox.org/mozilla-central/rev/d85572c1963f72e8bef2787d900e0a8ffd8e6728/js/src/vm/JSScript.cpp#1871">https://searchfox.org/mozilla-central/rev/d85572c1963f72e8bef2787d900e0a8ffd8e6728/js/src/vm/JSScript.cpp#1871</a> , and I can see that my patch works in a test when I set the column to <code>evaluate</code></p>
<pre><code>var g = newGlobal({ newCompartment: true });
var dbg = new Debugger();
var gw = dbg.addDebuggee(g);
g.evaluate("function g(x) {}", { lineNumber: 10, columnNumber: 5 });
assertEq(gw.script.source.column, 5);
</code></pre>
<p>but with real scenario, this column information seems to be missing in the case I'm interested in (inline source in html document).<br>I'm a bit lost in the code base, I was looking at <code>bool frontend::InstantiateStencils</code> calls ( <a href="https://searchfox.org/mozilla-central/search?q=symbol:_ZN2js8frontend19InstantiateStencilsEP9JSContextRNS0_16CompilationInputERKNS0_18CompilationStencilERNS0_19CompilationGCOutputE&amp;redirect=false">https://searchfox.org/mozilla-central/search?q=symbol:_ZN2js8frontend19InstantiateStencilsEP9JSContextRNS0_16CompilationInputERKNS0_18CompilationStencilERNS0_19CompilationGCOutputE&amp;redirect=false</a>), but I'm not sure which one is the one I'm interested in.<br>Any pointers on this?</p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Feb 21 2023 01:24:53 GMT-0800 (Pacific Standard Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">ah, maybe <a href="https://searchfox.org/mozilla-central/source/dom/script/ScriptLoader.cpp#1996">https://searchfox.org/mozilla-central/source/dom/script/ScriptLoader.cpp#1996</a> ?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Feb 21 2023 01:31:50 GMT-0800 (Pacific Standard Time)">09:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">Note that this is very close to the topic of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1815937">https://bugzilla.mozilla.org/show_bug.cgi?id=1815937</a>
I imagine that fixing that bug will make your API unecessary. 
I suggested such API as a temporary workaround until we completely acknowledge the shift of columns for inline scripts in SM.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue Feb 21 2023 01:32:55 GMT-0800 (Pacific Standard Time)">09:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">nchevobbe</span>: that looks like the right place to tell the JS engine about column numbers</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue Feb 21 2023 01:42:14 GMT-0800 (Pacific Standard Time)">09:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">It would be interesting to know what it would take to shift all columns reported by SM with this initial column. As doing this would also fix exception, console log,... columns and help us remove even more hacks from devtools. Any idea <span class="nick-4">jonco</span>? Or suggestion of someone to ping about this?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue Feb 21 2023 01:51:45 GMT-0800 (Pacific Standard Time)">09:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">ochameau</span>: it's not really my area so I don't know for sure</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue Feb 21 2023 01:52:05 GMT-0800 (Pacific Standard Time)">09:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">is it all columns that are wrong or just the first line?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue Feb 21 2023 01:53:54 GMT-0800 (Pacific Standard Time)">09:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">for that bug it sounds like we just need to set the column field in the compile options</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue Feb 21 2023 01:54:48 GMT-0800 (Pacific Standard Time)">09:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell">This is specific to the first line only</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue Feb 21 2023 01:59:40 GMT-0800 (Pacific Standard Time)">09:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">the line is set from <a href="https://searchfox.org/mozilla-central/source/parser/html/nsHtml5TreeOperation.cpp#1030">https://searchfox.org/mozilla-central/source/parser/html/nsHtml5TreeOperation.cpp#1030</a> , we don't set the column. 
for the line, the operation is called from a few callsites (e.g. <a href="https://searchfox.org/mozilla-central/rev/d85572c1963f72e8bef2787d900e0a8ffd8e6728/parser/html/nsHtml5TreeBuilderCppSupplement.h#222-223">https://searchfox.org/mozilla-central/rev/d85572c1963f72e8bef2787d900e0a8ffd8e6728/parser/html/nsHtml5TreeBuilderCppSupplement.h#222-223</a>), where we get the line number from the tokenizer (<a href="https://searchfox.org/mozilla-central/source/parser/html/nsHtml5Tokenizer.h#336">https://searchfox.org/mozilla-central/source/parser/html/nsHtml5Tokenizer.h#336</a>). Unfortunately, it doesn't look like the tokenizer holds any column number</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Tue Feb 21 2023 02:00:20 GMT-0800 (Pacific Standard Time)">10:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">(this might be more something DOM folks could help us with I guess)</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Feb 21 2023 02:23:21 GMT-0800 (Pacific Standard Time)">10:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ochameau:mozilla.org">ochameau</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">nchevobbe</span>: it sounds like significant part of the quest here would be to retrieve that column already! I thought this would have been easier to retrieve and that the main work would have been in SM...</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Feb 21 2023 02:25:20 GMT-0800 (Pacific Standard Time)">10:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@nchevobbe:mozilla.org">nchevobbe</span>&gt;</div></td><td class="msg-cell">yeah :/ Let's see if folks in #DOM can help us in this adventure :)</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Feb 21 2023 10:25:13 GMT-0800 (Pacific Standard Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">when do we decide to gc in the js shell?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Feb 21 2023 10:25:22 GMT-0800 (Pacific Standard Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">is it different than in Firefox?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Feb 21 2023 10:25:38 GMT-0800 (Pacific Standard Time)">18:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">Anybody know off the top of their head what 0x0000530700005217 would be as a JS value...</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Feb 21 2023 10:26:20 GMT-0800 (Pacific Standard Time)">18:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> is it different than in Firefox?</blockquote></mx-reply>Yes, it is very different. In the shell IIRC it is driven entirely by allocation, while in the browser we have this whole nightmare time based scheduling of GCs (triggered by page closing and the like).</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Feb 21 2023 10:27:10 GMT-0800 (Pacific Standard Time)">18:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">the shell and the browser share a core of trigger reasons, and then each has another pile of reasons in addition</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Feb 21 2023 10:27:42 GMT-0800 (Pacific Standard Time)">18:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">the shared core is allocation, when you've grown the heap up to some threshold (generally a factor above the previous GC's ending size)</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Feb 21 2023 10:27:53 GMT-0800 (Pacific Standard Time)">18:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">it seems like the v8 shell is more aggressive in cleaning things up</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Feb 21 2023 10:28:10 GMT-0800 (Pacific Standard Time)">18:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">in the shell, then there are eager GCs that try to collect at more convenient times</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Feb 21 2023 10:28:18 GMT-0800 (Pacific Standard Time)">18:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">in the browser, it's like mccr8 said</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Feb 21 2023 10:28:47 GMT-0800 (Pacific Standard Time)">18:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><a href="https://matrix.to/#/!mspeivUwnlfvuzhofB:mozilla.org/$28n5jocbKtSSFDBFMoprzrwr9DOxUBTGt67DfJWXP48?via=mozilla.org">https://matrix.to/#/!mspeivUwnlfvuzhofB:mozilla.org/$28n5jocbKtSSFDBFMoprzrwr9DOxUBTGt67DfJWXP48?via=mozilla.org</a></td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Feb 21 2023 10:29:45 GMT-0800 (Pacific Standard Time)">18:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">?</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Feb 21 2023 10:30:04 GMT-0800 (Pacific Standard Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">not sure what that link is. It takes me a page to join a conversation, then tells me I wasn't invited.</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Feb 21 2023 10:30:08 GMT-0800 (Pacific Standard Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">oh</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Feb 21 2023 10:30:18 GMT-0800 (Pacific Standard Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">feels like some parties I tried to go to ;-)</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Feb 21 2023 10:30:43 GMT-0800 (Pacific Standard Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">It was a link to a message that contained that picture</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Feb 21 2023 10:31:28 GMT-0800 (Pacific Standard Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">that's the result of running react-todomvc in SM and V8 shells</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Feb 21 2023 10:31:40 GMT-0800 (Pacific Standard Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">for different amounts of numberOfItemsToAdd</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Feb 21 2023 10:32:13 GMT-0800 (Pacific Standard Time)">18:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">I'd like to better understand why there's such a divergence</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Feb 21 2023 10:32:14 GMT-0800 (Pacific Standard Time)">18:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">I don't think we've spent any time optimizing memory in the shell. But yeah that looks like we're missing a GC trigger.</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Feb 21 2023 10:33:09 GMT-0800 (Pacific Standard Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">the discontinuity is pretty weird too</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Feb 21 2023 10:33:30 GMT-0800 (Pacific Standard Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell">jemalloc stuff hanging off of JS objects has to be explicitly accounted for or the GC won't know a bunch of stuff is getting allocated. I don't know what the state of it is right now, but historically that's been an issue.</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Feb 21 2023 10:34:00 GMT-0800 (Pacific Standard Time)">18:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">it should track that pretty well these days</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Feb 21 2023 10:34:12 GMT-0800 (Pacific Standard Time)">18:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">this is the system-reported RSS?</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Feb 21 2023 10:35:25 GMT-0800 (Pacific Standard Time)">18:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">yeah</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Feb 21 2023 10:35:34 GMT-0800 (Pacific Standard Time)">18:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">from <code>time -v</code></td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Feb 21 2023 10:35:52 GMT-0800 (Pacific Standard Time)">18:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">the <code>performance.mozMemory</code> object theoretically has the trigger information that explains when and why a GC will happen, though when I've looked at it from the browser it doesn't match reality all that well</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Feb 21 2023 10:36:08 GMT-0800 (Pacific Standard Time)">18:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">or it didn't a few years ago when I was looking at it</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Feb 21 2023 10:37:31 GMT-0800 (Pacific Standard Time)">18:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I should really check in the fix to <code>js/src/devtools/gc-ubench</code> to fix the heap size graph. It displays the thresholds and GCs.</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Feb 21 2023 10:38:11 GMT-0800 (Pacific Standard Time)">18:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I really can't explain the discontinuity in that graph, if it's not what the benchmark is doing</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Feb 21 2023 10:40:04 GMT-0800 (Pacific Standard Time)">18:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-14">jrmuizel</span>: it probably doesn't matter for the things you're looking at, but when you run these benchmarks in the JS shell, do you call <code>clearKeptObjects()</code> and <code>drainJobQueue()</code>? They make the shell more browser-like for WeakRefs and Promises, respectively. (Well, the division isn't quite that clean.)</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Feb 21 2023 10:41:28 GMT-0800 (Pacific Standard Time)">18:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: I'll try that later today</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Feb 21 2023 10:43:04 GMT-0800 (Pacific Standard Time)">18:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I also <a href="https://searchfox.org/mozilla-central/rev/234ae43d3793289167926ef91bfb5145da91d4aa/js/src/devtools/gc-ubench/spidermonkey.js#14-18">call <code>maybegc()</code></a>, but I'm not sure if that makes the shell more or less browser-like. At the time I wrote that, I assumed that's what the browser was doing, but it really isn't.</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Feb 21 2023 10:46:04 GMT-0800 (Pacific Standard Time)">18:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-14" title="@jrmuizel:mozilla.org">jrmuizel</span>&gt;</div></td><td class="msg-cell">I'll do some experiments</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Feb 21 2023 10:58:07 GMT-0800 (Pacific Standard Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Anybody know off the top of their head what 0x0000530700005217 would be as a JS value...</blockquote></mx-reply>Anything smaller than <code>0xfff80000ffffffff</code> is interpreted as a double</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Feb 21 2023 10:58:54 GMT-0800 (Pacific Standard Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Anything smaller than <code>0xfff80000ffffffff</code> is interpreted as a double</blockquote></mx-reply>Thanks!</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Feb 21 2023 13:45:50 GMT-0800 (Pacific Standard Time)">21:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">for string literals like <code>R"js(my code;)js"</code>, how does the <code>js</code> part work? I assume it's from SM and it's not internal to C++ as is</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Feb 21 2023 13:47:21 GMT-0800 (Pacific Standard Time)">21:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@davidj361:matrix.org">davidj361</span>&gt;</div></td><td class="msg-cell">hard to search this up </td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Feb 21 2023 13:52:15 GMT-0800 (Pacific Standard Time)">21:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell"><code>js</code> can be any identifier, as long as the identifier used in the start and end matches with each other</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Feb 21 2023 13:53:18 GMT-0800 (Pacific Standard Time)">21:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">I think the idea was to give the reader of the code a hint that the raw string contains JS code, and syntax highlighters could pick up on that hint as well (although none currently do that I know of)</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Feb 21 2023 13:54:10 GMT-0800 (Pacific Standard Time)">21:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">for more info search for "C++ raw strings" I guess</td></tr>

</tbody></table></div></div></div>
</body></html>