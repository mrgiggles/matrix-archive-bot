<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2024-09-06</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2024-09-06<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-09-05" class="nav-link"><span>prev</span></a>
<a href="2024-09-09" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Thu Sep 05 2024 17:46:07 GMT-0700 (Pacific Daylight Time)">00:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I don't have the extreme hatred of Element's thread UX, but I've been thinking that the way I'd kind of like them to work is that messages in threads are by default shown to the entire room, but with a marker indicating that they are part of a thread (and you can view only that thread if you wish). But all thread messages would have a "collapse thread" control that would remove all but the first message from the main room display.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Thu Sep 05 2024 17:47:14 GMT-0700 (Pacific Daylight Time)">00:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">so, if you hate it when people use threads, you can just never collapse any. And if you're worried about spamming the channel, use a thread and readers can decide for themselves whether it's spam. And if you really really care about staying up to date with everything in a channel, don't collapse any threads.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Thu Sep 05 2024 17:48:21 GMT-0700 (Pacific Daylight Time)">00:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I guess there's still the in-between state, where you collapse threads but when coming back after an absence, you want to see everything. In which case, you'd still be stuck listing out all collapsed threads and looking at all the ones with new changes. (In my hypothetical happy world, the new changes indicators WOULD ACTUALLY F'ING WORK!)</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Thu Sep 05 2024 17:48:47 GMT-0700 (Pacific Daylight Time)">00:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">come to think of that, is that fixed? I haven't run into the problem for a while.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Thu Sep 05 2024 20:28:27 GMT-0700 (Pacific Daylight Time)">03:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(<a href="https://github.com/element-hq/element-web/issues/24392">https://github.com/element-hq/element-web/issues/24392</a> says it is not fixed)</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Thu Sep 05 2024 20:30:43 GMT-0700 (Pacific Daylight Time)">03:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I probably haven't seen it because people are avoiding using threads or something, at least in the small handful of rooms I pay attention to</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Thu Sep 05 2024 21:07:01 GMT-0700 (Pacific Daylight Time)">04:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">Is a link to the <a href="https://spidermonkey.dev/tech_tree/">tech tree</a> ever going to be added to the main page? It looks pretty interesting but I didn't even know it existed until I went to make a PR.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Sep 06 2024 04:04:26 GMT-0700 (Pacific Daylight Time)">11:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@wes:mozilla.org">wes</span>&gt;</div></td><td class="msg-cell">Hey, folks!  We are reading memory allocated by the JS engine for strings with cached pointers.  Properly going through the jsval before every access is not practical, but invalidating the cache is no problem.

Is there a way to have a callback invoked reliably for 100% JS GCs where the the string's memory being moved? JS_SetGCCallback() seems to only get called on major GCs.  We are on m-c tip.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Sep 06 2024 04:32:43 GMT-0700 (Pacific Daylight Time)">11:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is it performance critical?  the only option I can think of is to abuse the profiler and look for <a href="https://searchfox.org/mozilla-central/source/js/src/gc/Compacting.cpp#67,73">the compact phase's label</a>, but it can affect the performance too much</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Sep 06 2024 05:11:22 GMT-0700 (Pacific Daylight Time)">12:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Hey, folks!  We are reading memory allocated by the JS engine for strings with cached pointers.  Properly going through the jsval before every access is not practical, but invalidating the cache is no problem.<br><br>Is there a way to have a callback invoked reliably for 100% JS GCs where the the string's memory being moved? JS_SetGCCallback() seems to only get called on major GCs.  We are on m-c tip.</blockquote></mx-reply>There is JS::AddGCNurseryCollectionCallback for nursery collections if that helps</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Sep 06 2024 05:52:46 GMT-0700 (Pacific Daylight Time)">12:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@wesgarland:matrix.org">wesgarland</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-15">arai</span>: definitely performance critical, but even more correctness critical. :)<br><span class="nick-4">jonco</span> Thanks - that API had escaped my notice. I'm not sure it covers all the remaining cases, though?  I don't know enough about spidermonkey's current GC I guess, it's changed a lot since I was doing this stuff every day.</p>
<p>I wonder if there's a way we can just mark specific strings with a "do not move" attribute. Does that happen when they are interned?  If we can't figure this out, we're going wind up strduping everything (often &gt; 1GB) just keep the GC from moving them, which seems nuts. And I'm convinced we can find a solution. ðŸ¤”</p>
</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Sep 06 2024 05:54:38 GMT-0700 (Pacific Daylight Time)">12:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">where does the string content come from?  I wonder external string or something helps</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Sep 06 2024 06:02:51 GMT-0700 (Pacific Daylight Time)">13:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@wesgarland:matrix.org">wesgarland</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">arai</span>: this particular situation - strings can theoretically come from anywhere, most frequently generated in JS code. This is why have to play super-nice with Spidermonkey. :)  We do use external strings for other strings that we hand to the JS engine and manage the memory for ourselves. (Does something like the old JS_InternString even still exist? jsapi docs are hard to find these days)</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Sep 06 2024 06:22:21 GMT-0700 (Pacific Daylight Time)">13:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what characteristics of "intern" are you looking for?  is it something that the current atom doesn't have?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Sep 06 2024 06:22:49 GMT-0700 (Pacific Daylight Time)">13:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(I mean <a href="https://searchfox.org/mozilla-central/rev/cc01f11adfacca9cd44a75fd140d2fdd8f9a48d4/js/public/String.h#74-88">JS_AtomizeString</a> and variants)</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Sep 06 2024 06:23:16 GMT-0700 (Pacific Daylight Time)">13:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">wesgarland</span>: those two callbacks cover all cases where the GC will move a string</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Sep 06 2024 06:24:11 GMT-0700 (Pacific Daylight Time)">13:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">there's no way of marking a string as do not move</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Sep 06 2024 06:24:27 GMT-0700 (Pacific Daylight Time)">13:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">interned strings (atoms) will never be moved however</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Sep 06 2024 06:26:45 GMT-0700 (Pacific Daylight Time)">13:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@wesgarland:matrix.org">wesgarland</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: it used to be possible to mark a string as intern, but I just realized - that will make it uncollectable.  (atoms are interned strings? that makes sense!)</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Sep 06 2024 06:27:27 GMT-0700 (Pacific Daylight Time)">13:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@wesgarland:matrix.org">wesgarland</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: but if those two call backs will cover all cases where the GC will move a string - I think this enough to get us to a stable product... thank you!</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Sep 06 2024 06:28:25 GMT-0700 (Pacific Daylight Time)">13:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">atoms do get collected eventually, but it may take longer for that to happen</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Sep 06 2024 06:28:32 GMT-0700 (Pacific Daylight Time)">13:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">if that works then great!</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Sep 06 2024 06:32:05 GMT-0700 (Pacific Daylight Time)">13:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@wesgarland:matrix.org">wesgarland</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: I'm going to run this up the flag pole today and see this closes the last bug blocking our 1.0 release (pythonmonkey).  Some test runs with zealous GC will hopefully let me give the nod. :)     I guess we can also try atomizing strings.  We were expecting GC challenges but never figured out until a couple of days ago that it was possible for spidermonkey to move strings without calling the GC callback.</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Sep 06 2024 08:02:25 GMT-0700 (Pacific Daylight Time)">15:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">wesgarland</span>: there's another way to go about this, though it's sketchy and I'm not sure whether it'll be doable. Although the GC moves strings quite a bit, that's mostly the JSString structs themselves. The <code>char*</code> (or <code>char16_t*</code>) pointing to the string data is mostly not moved unless it points within the JSString struct, which it will do for short strings. Or if a string is deduplicated during a minor GC.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Sep 06 2024 08:03:26 GMT-0700 (Pacific Daylight Time)">15:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">The semi-principled way to deal with this is to have a <code>JS::AutoStableStringChars</code> for every string whose chars you need to access, and only access those chars through that struct. If you're compiling with our checks, it is labeled as <code>MOZ_STACK_CLASS</code> and will error if you heap-allocate it. But it'll probably work with your own build system. ;-)</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Sep 06 2024 08:04:20 GMT-0700 (Pacific Daylight Time)">15:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">The unprincipled approach would be to mimic what that class is doing: detect whether a string is inline, and strdup if so. And then globally disable nursery string deduplication. And hope we don't break it in the future.</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Sep 06 2024 08:08:31 GMT-0700 (Pacific Daylight Time)">15:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Given that you'd probably have to make a <code>JS::AutoStableStringChars</code> early for lots and lots of strings, whether you eventually access them or not, you'd be defeating optimizations like ropes (it'll force all strings to be linear).</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Sep 06 2024 08:29:07 GMT-0700 (Pacific Daylight Time)">15:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@wesgarland:matrix.org">wesgarland</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-12">sfink</span>: Thanks. That's a pretty excellent tip, and your observation about the underlying memory not moving is really helpful ... and explains why we're only having trouble this late in the game. We implemented XHR for our stack, and then wired <a href="http://socket.io">socket.io</a> up to it, and then started seeing weird little string corruptions issues.  We were worried about BIG strings in unit testing, but I bet HTTP headers fall into short string threshold.</p>
<p>Adding an AutoStableStringChars for JS string that escapes is actually not bad. We already have to flatten ropes.</p>
</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Sep 06 2024 09:12:06 GMT-0700 (Pacific Daylight Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh, and for completeness: fairly large strings (up to 1KB, I think?) can now be allocated in the nursery, so they will also be moved during a minor GC even though they aren't inline. <code>AutoStableStringChars</code> will handle everything, if you can live with its restrictions.</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Sep 06 2024 09:57:52 GMT-0700 (Pacific Daylight Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> come to think of that, is that fixed? I haven't run into the problem for a while.</blockquote></mx-reply>It's been a lot better for me last little bit too</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Sep 06 2024 09:59:05 GMT-0700 (Pacific Daylight Time)">16:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Is a link to the <a href="https://spidermonkey.dev/tech_tree/">tech tree</a> ever going to be added to the main page? It looks pretty interesting but I didn't even know it existed until I went to make a PR.</blockquote></mx-reply>Unsure. My feeling is no -- it's a tool for thought and team planning more than anything else. I worry that making it too official would confuse people despite the big "<strong>These are not plans</strong>" at the top.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Sep 06 2024 10:16:42 GMT-0700 (Pacific Daylight Time)">17:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: Do you know if we have an existing bug for trying to store allocation site info in an in-memory cache ala-JIT-hints (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1917031#c1">context</a>)</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Sep 06 2024 10:36:57 GMT-0700 (Pacific Daylight Time)">17:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@denispal:mozilla.org">denispal</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">mgaudet</span>: I wrote a <a href="https://hg.mozilla.org/try/rev/bb34bc3a124236eb3a6d1a1de0f6587db74aa23d">patch</a> to prototype something like this a while ago, but didn't see any impact on sp3.  It might be worth to revisit though.</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Sep 06 2024 10:40:35 GMT-0700 (Pacific Daylight Time)">17:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">I do not know if there is a bug open - please feel free to file one. This is probably a worthwhile improvement even if it doesn't help sp3</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Sep 06 2024 12:05:36 GMT-0700 (Pacific Daylight Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I do not know if there is a bug open - please feel free to file one. This is probably a worthwhile improvement even if it doesn't help sp3</blockquote></mx-reply>OK, Will do :)</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Sep 06 2024 12:05:59 GMT-0700 (Pacific Daylight Time)">19:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-2">mgaudet</span>: I wrote a <a href="https://hg.mozilla.org/try/rev/bb34bc3a124236eb3a6d1a1de0f6587db74aa23d">patch</a> to prototype something like this a while ago, but didn't see any impact on sp3.  It might be worth to revisit though.</blockquote></mx-reply>Yeah -- I'll read the patch in more detail but I suspect we potentially want this sort of thing even beyond SP3</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Sep 06 2024 14:03:21 GMT-0700 (Pacific Daylight Time)">21:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@nordzilla:mozilla.org">nordzilla</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-12">sfink</span>: Thanks for your help yesterday! The changes to the MDN <code>dotAll</code> page have been merged.</p>
<p><strong>Before</strong></p>
<blockquote>
<p>This effectively means the dot will match any character on the Unicode Basic Multilingual Plane (BMP). To allow it to match astral characters, the u (unicode) flag should be used. Using both flags in conjunction allows the dot to match any Unicode character, without exceptions.</p>
</blockquote>
<p><strong>After</strong></p>
</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Sep 06 2024 14:06:56 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">confession: Boy this code is finicky. I have managed to refactor my performance win away... again </td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Sep 06 2024 14:11:01 GMT-0700 (Pacific Daylight Time)">21:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Hmf. botzilla should have caught that, but it looks like it crashed a while back because it wasn't allowed to post to a room. Oh, so <em>now</em> it's going to detect errors and throw an exception? My biggest beef with it is how it drops errors on the floor most of the time...</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Fri Sep 06 2024 14:12:14 GMT-0700 (Pacific Daylight Time)">21:12</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span></div></td><td class="msg-cell">is human fuzzer today </td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Fri Sep 06 2024 15:39:41 GMT-0700 (Pacific Daylight Time)">22:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@bvisness:mozilla.org">bvisness</span>&gt;</div></td><td class="msg-cell">what is this doing and how could it possibly work <a href="https://searchfox.org/mozilla-central/source/js/src/tests/lib/tasks_unix.py#263">https://searchfox.org/mozilla-central/source/js/src/tests/lib/tasks_unix.py#263</a></td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Fri Sep 06 2024 15:39:52 GMT-0700 (Pacific Daylight Time)">22:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@bvisness:mozilla.org">bvisness</span>&gt;</div></td><td class="msg-cell">given that <code>test</code> is just some random test popped from the list in the loop above</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Fri Sep 06 2024 15:53:42 GMT-0700 (Pacific Daylight Time)">22:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">it's not a random test, though. It's the first test, because when wait_for_encoding is True only a single test is allowed to run. Once that one test makes it through (and produces an XDR encoding), then the floodgates are opened.</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Fri Sep 06 2024 15:54:07 GMT-0700 (Pacific Daylight Time)">22:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">yes, I had to stare at that for a long time to figure it out</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Fri Sep 06 2024 15:55:04 GMT-0700 (Pacific Daylight Time)">22:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">or rather, it's the first test that isn't skipped</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Fri Sep 06 2024 15:55:16 GMT-0700 (Pacific Daylight Time)">22:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">which I guess is why this isn't done in a simpler way</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Fri Sep 06 2024 15:55:26 GMT-0700 (Pacific Daylight Time)">22:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@bvisness:mozilla.org">bvisness</span>&gt;</div></td><td class="msg-cell">ah</td></tr>

</tbody></table></div></div></div>
</body></html>