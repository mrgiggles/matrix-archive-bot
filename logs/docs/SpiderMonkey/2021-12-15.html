<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2021-12-15</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2021-12-15<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-12-14" class="nav-link"><span>prev</span></a>
<a href="2021-12-16" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue Dec 14 2021 18:26:42 GMT-0800 (Pacific Standard Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Hey, <span class="nick-12">sfink</span>, did you ever manage to file a clang issue for bug 1739321?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue Dec 14 2021 18:26:43 GMT-0800 (Pacific Standard Time)">02:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1739321">https://bugzil.la/1739321</a> ‚Äî NEW (nobody) ‚Äî [gdb pretty printers] gdb.error No type named jsstring</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue Dec 14 2021 18:31:37 GMT-0800 (Pacific Standard Time)">02:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">no, but I just checked, and the issue tracker appears to be open now</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Dec 15 2021 00:57:40 GMT-0800 (Pacific Standard Time)">08:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@zjiaz:mozilla.org">zjiaz</span>&gt;</div></td><td class="msg-cell">Hi, may I ask how could I skip a jit-test without run the js file at all? It seems that <a href="https://searchfox.org/mozilla-central/source/js/src/jit-test/tests/ion/bug1433496.js">ion/bug1433496.js</a> will crash on mips platform, although the test does try to skip mips platform by <code>getBuildConfiguration()</code>. I think maybe it's because the crash happens before or during the <code>getBuildConfiguration()</code> function? Thanks!</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Dec 15 2021 01:02:54 GMT-0800 (Pacific Standard Time)">09:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">zjiaz</span>: is it for local run?  if so, you can pass <code>--exclude</code> option <a href="https://searchfox.org/mozilla-central/rev/dc323d0d9a3b722ca8ff0d1b2b752e5bd00dab9b/js/src/jit-test/jit_test.py#117-124">https://searchfox.org/mozilla-central/rev/dc323d0d9a3b722ca8ff0d1b2b752e5bd00dab9b/js/src/jit-test/jit_test.py#117-124</a></td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Dec 15 2021 01:04:00 GMT-0800 (Pacific Standard Time)">09:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I'm curious how it crashes tho.  maybe <code>--spectre-mitigations=on</code> there affects?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Dec 15 2021 01:05:33 GMT-0800 (Pacific Standard Time)">09:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@zjiaz:mozilla.org">zjiaz</span>&gt;</div></td><td class="msg-cell">Both local and simulator will crash.<br>Yes, it's because <code>--spectre-mitigations=on</code>, some related function is not implemented on mips platform.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Dec 15 2021 01:10:54 GMT-0800 (Pacific Standard Time)">09:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@zjiaz:mozilla.org">zjiaz</span>&gt;</div></td><td class="msg-cell"><code>--exclude</code> could skip the test, but where should I add the rule? I want <code>./mach jit-test</code> could skip it automatically.</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Dec 15 2021 01:12:43 GMT-0800 (Pacific Standard Time)">09:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if you're fine modifying the mach command, here  <a href="https://searchfox.org/mozilla-central/rev/dc323d0d9a3b722ca8ff0d1b2b752e5bd00dab9b/testing/mach_commands.py#615-650">https://searchfox.org/mozilla-central/rev/dc323d0d9a3b722ca8ff0d1b2b752e5bd00dab9b/testing/mach_commands.py#615-650</a></td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Dec 15 2021 01:15:41 GMT-0800 (Pacific Standard Time)">09:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">btw, what is the purpose here?  is it for temporary workaround until the crash gets fixed?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Dec 15 2021 01:16:01 GMT-0800 (Pacific Standard Time)">09:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">are you going to submit the patch for m-c ?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Dec 15 2021 01:17:30 GMT-0800 (Pacific Standard Time)">09:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@zjiaz:mozilla.org">zjiaz</span>&gt;</div></td><td class="msg-cell">Yes, I want to. I wish the test could pass without any local change.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Dec 15 2021 01:18:25 GMT-0800 (Pacific Standard Time)">09:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is there any ETA for the actual fix?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Dec 15 2021 01:19:21 GMT-0800 (Pacific Standard Time)">09:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">err, maybe my question isn't appropriate. how is <code>--spectre-mitigations=on</code> supposed to work on mips ?</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Dec 15 2021 01:22:44 GMT-0800 (Pacific Standard Time)">09:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@zjiaz:mozilla.org">zjiaz</span>&gt;</div></td><td class="msg-cell">I'm not sure if I will enable it, maybe just don't support it. This option is not compulsory, right?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Dec 15 2021 01:24:58 GMT-0800 (Pacific Standard Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yeah, I think the option could be no-op for the platform where it's not supported</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Dec 15 2021 01:25:08 GMT-0800 (Pacific Standard Time)">09:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">now I wonder how it crashes, and whether the crash itself is appropriate</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Dec 15 2021 01:25:44 GMT-0800 (Pacific Standard Time)">09:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if the crash itself is inappropriate/unexpected, just making the option no-op might be simpler</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Dec 15 2021 01:26:10 GMT-0800 (Pacific Standard Time)">09:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so that the <code>skip-if</code> works</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Dec 15 2021 01:26:44 GMT-0800 (Pacific Standard Time)">09:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">do you have backtrace for the crash?</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Dec 15 2021 01:28:51 GMT-0800 (Pacific Standard Time)">09:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@zjiaz:mozilla.org">zjiaz</span>&gt;</div></td><td class="msg-cell">Okay, it's crashed in <a href="https://searchfox.org/mozilla-central/source/js/src/jit/mips-shared/MacroAssembler-mips-shared-inl.h#1220">spectreZeroRegister</a> function, mips just crash in the function. May be I could just make the function a no-op?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed Dec 15 2021 01:31:41 GMT-0800 (Pacific Standard Time)">09:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@zjiaz:mozilla.org">zjiaz</span>&gt;</div></td><td class="msg-cell"><p>The full backtrace:</p>
<pre><code>#0  0x0000555557fa376a in js::jit::MacroAssembler::spectreZeroRegister (this=0x7fffffffcd48, cond=js::jit::AssemblerMIPSShared::Equal, scratch=..., dest=...)
    at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/jit/mips-shared/MacroAssembler-mips-shared-inl.h:1222
#1  0x0000555558019833 in js::jit::MacroAssembler::branchTestObjClass (this=0x7fffffffcd48, cond=js::jit::AssemblerMIPSShared::Equal, obj=..., 
    clasp=0x555558d31b00 &lt;js::PropertyIteratorObject::class_&gt;, scratch=..., spectreRegToZero=..., label=0x7fffffffc62c)
    at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/jit/MacroAssembler-inl.h:525
#2  0x000055555844d553 in LoadNativeIterator (masm=..., obj=..., dest=...) at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/jit/MacroAssembler.cpp:4605
#3  0x000055555844d63a in js::jit::MacroAssembler::iteratorMore (this=0x7fffffffcd48, obj=..., output=..., temp=...)
    at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/jit/MacroAssembler.cpp:4620
#4  0x0000555557fb6057 in js::jit::BaselineCodeGen&lt;js::jit::BaselineInterpreterHandler&gt;::emit_MoreIter (this=0x7fffffffcca0)
    at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/jit/BaselineCodeGen.cpp:5344
#5  0x0000555557f7ca1c in js::jit::BaselineInterpreterGenerator::emitInterpreterLoop (this=0x7fffffffcca0) at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/jit/BaselineCodeGen.cpp:6716
#6  0x0000555557f853c1 in js::jit::BaselineInterpreterGenerator::generate (this=0x7fffffffcca0, interpreter=...)
    at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/jit/BaselineCodeGen.cpp:6821
#7  0x0000555557f97341 in js::jit::GenerateBaselineInterpreter (cx=0x7ffff634b200, interpreter=...) at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/jit/BaselineJIT.cpp:1076
#8  0x0000555558324e9f in js::jit::JitRuntime::initialize (this=0x7ffff6309000, cx=0x7ffff634b200) at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/jit/Ion.cpp:125
#9  0x0000555557805ffe in JSRuntime::createJitRuntime (this=0x7ffff633f000, cx=0x7ffff634b200) at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/vm/Realm.cpp:137
#10 0x00005555576943d5 in JS::InitSelfHostedCode (cx=0x7ffff634b200, cache=..., writer=0x0) at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/vm/Initialization.cpp:239
#11 0x00005555572a7452 in main (argc=16, argv=0x7fffffffdc98) at /mnt/zjz/workspace/mozilla/mozilla-central/js/src/shell/js.cpp:12622
</code></pre>
</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed Dec 15 2021 01:32:09 GMT-0800 (Pacific Standard Time)">09:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">that fix sounds incorrect. making the function no-op will result in broken code</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed Dec 15 2021 01:32:34 GMT-0800 (Pacific Standard Time)">09:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what I meant was to make the command-line option no-op for mips (not sure if that's the right way to go tho)</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed Dec 15 2021 01:32:45 GMT-0800 (Pacific Standard Time)">09:32</a></td><td class="nick-cell"><div class="m-ov"><span class="nick nick-15" title="@arai:mozilla.org">arai</span></div></td><td class="msg-cell">looks the backtrace</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed Dec 15 2021 01:35:56 GMT-0800 (Pacific Standard Time)">09:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@zjiaz:mozilla.org">zjiaz</span>&gt;</div></td><td class="msg-cell">Thanks. I will see if I could just add <code>spectre-mitigations</code> support on mips platform.</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed Dec 15 2021 01:38:32 GMT-0800 (Pacific Standard Time)">09:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yeah, looks like there are 2 functions related to spectre, and both are very small in other arch.  so, fixing them might be simpler than modifying the test harness or shell option handling</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed Dec 15 2021 01:39:47 GMT-0800 (Pacific Standard Time)">09:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if implementing them is difficult for mips, the next option would be making the command-line option and browser preference no-op, maybe with emitting warning message</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed Dec 15 2021 01:44:09 GMT-0800 (Pacific Standard Time)">09:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@zjiaz:mozilla.org">zjiaz</span>&gt;</div></td><td class="msg-cell">I did't implement it mainly because the performance issue, and our CPU products are not affected by the Spectre. I think it won't be very difficult.</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed Dec 15 2021 01:50:23 GMT-0800 (Pacific Standard Time)">09:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if there's strong reason not to support the option, then making the option no-op would be fine</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed Dec 15 2021 01:53:36 GMT-0800 (Pacific Standard Time)">09:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@zjiaz:mozilla.org">zjiaz</span>&gt;</div></td><td class="msg-cell">Okay, thanks.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed Dec 15 2021 02:18:10 GMT-0800 (Pacific Standard Time)">10:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is <code>javascript.options.gczeal</code>/<code> javascript.options.gczeal.frequency</code> preferences used somewhere?  I don't see any code that sets the value. and also, the case is different between <code>javascript.options.gczeal</code> and <code>dom.workers.options.gcZeal</code> (<code>z</code>  vs <code>Z</code>) in the code that gets the value</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed Dec 15 2021 02:18:52 GMT-0800 (Pacific Standard Time)">10:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I wonder if they're no longer used artifact</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed Dec 15 2021 05:34:06 GMT-0800 (Pacific Standard Time)">13:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@cmeister2:mozilla.org">cmeister2</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-12">sfink</span>: I've been looking into the MaybeGC code this morning. Think I've got something, though I'm unsure what it means. I've added debug logs to the checkEagerAllocTrigger function, which generates me output like:</p>
<pre><code>EVENT 0 Creating context 
checkEagerAllocTrigger: usedBytes(245760) thresholdBytes(1336934) schedulingState.inHighFrequencyGCMode(1) threshold.startBytes(1572864): usedBytes &lt; 1024 * 1024 is (1), usedBytes &lt; thresholdBytes is (1), returning (0)
checkEagerAllocTrigger: usedBytes(35829) thresholdBytes(50803507) schedulingState.inHighFrequencyGCMode(1) threshold.startBytes(59768832): usedBytes &lt; 1024 * 1024 is (1), usedBytes &lt; thresholdBytes is (1), returning (0)
checkEagerAllocTrigger: usedBytes(192512) thresholdBytes(1336934) schedulingState.inHighFrequencyGCMode(1) threshold.startBytes(1572864): usedBytes &lt; 1024 * 1024 is (1), usedBytes &lt; thresholdBytes is (1), returning (0)
checkEagerAllocTrigger: usedBytes(95992) thresholdBytes(50803507) schedulingState.inHighFrequencyGCMode(1) threshold.startBytes(59768832): usedBytes &lt; 1024 * 1024 is (1), usedBytes &lt; thresholdBytes is (1), returning (0)
checkEagerAllocTrigger: usedBytes(69632) thresholdBytes(12964211) schedulingState.inHighFrequencyGCMode(1) threshold.startBytes(15252014): usedBytes &lt; 1024 * 1024 is (1), usedBytes &lt; thresholdBytes is (1), returning (0)
checkEagerAllocTrigger: usedBytes(9441856) thresholdBytes(50803507) schedulingState.inHighFrequencyGCMode(1) threshold.startBytes(59768832): usedBytes &lt; 1024 * 1024 is (0), usedBytes &lt; thresholdBytes is (1), returning (0)
</code></pre>
<p>However, for every new "context" I'm creating, the number of checkEagerAllocTrigger calls goes up by 2. Which seems to indicate a new Zone is being created every time I'm doing something. When we get to EVENT 234 which is where it was failing before I'm getting 472 calls to checkEagerAllocTrigger, none of which are returning True.</p>
<p>The interesting thing comes when garbage collection happens:</p>
<pre><code>...
checkEagerAllocTrigger: usedBytes(10490432) thresholdBytes(50803507) schedulingState.inHighFrequencyGCMode(1) threshold.startBytes(59768832): usedBytes &lt; 1024 * 1024 is (0), usedBytes &lt; thresholdBytes is (1), returning (0)
EVENT 234 Creating context 
ERROR swi:SBjsi 404 ***** GC IS BEING CALLED *****
ERROR swi:SBjsi 404 ***** GC IS BEING CALLED *****
checkEagerAllocTrigger: usedBytes(245760) thresholdBytes(1415577) schedulingState.inHighFrequencyGCMode(0) threshold.startBytes(1572864): usedBytes &lt; 1024 * 1024 is (1), usedBytes &lt; thresholdBytes is (1), returning (0)
...
</code></pre>
<p>The inHighFrequencyGCMode gets set to 0 rather than 1. Don't know why at all. Anyway, so now I need to work out what causes this to increase the number of Zones and reduce / reuse something so that garbage collection actually happens properly</p>
</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed Dec 15 2021 05:52:23 GMT-0800 (Pacific Standard Time)">13:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@cmeister2:mozilla.org">cmeister2</span>&gt;</div></td><td class="msg-cell">the garbage collection appears to be being done as <code>js::gc::GCRuntime::attemptLastDitchGC / reason=JS::GCReason::LAST_DITCH</code>. Gives me a little more to look into - that seems like a fairly bad reason from some comments</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed Dec 15 2021 06:10:23 GMT-0800 (Pacific Standard Time)">14:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">cmeister2</span>: ah, you are probably creating a new zone every time, and none of them are getting large enough to trigger a GC individually but taken together they fill up the heap</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed Dec 15 2021 06:12:42 GMT-0800 (Pacific Standard Time)">14:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">do you need to create a new zone every time?</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed Dec 15 2021 06:13:48 GMT-0800 (Pacific Standard Time)">14:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">hmmm, looks like this is the default in RealmCreationOptions: <a href="https://searchfox.org/mozilla-central/source/js/public/RealmOptions.h#261">https://searchfox.org/mozilla-central/source/js/public/RealmOptions.h#261</a></td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed Dec 15 2021 06:15:12 GMT-0800 (Pacific Standard Time)">14:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@cmeister2:mozilla.org">cmeister2</span>&gt;</div></td><td class="msg-cell">I'm not intentionally creating new zones every time. Nothing in the code even calls anything with Zone in the name üòÖ I'm trying to isolate which API call is actually creating said zone at the moment.</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed Dec 15 2021 06:17:30 GMT-0800 (Pacific Standard Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">sure</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed Dec 15 2021 06:17:47 GMT-0800 (Pacific Standard Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">JS_NewGlobalObject takes JS::RealmOptions</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed Dec 15 2021 06:20:44 GMT-0800 (Pacific Standard Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">RealmOptions contains a RealmCreationOptions</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed Dec 15 2021 06:20:54 GMT-0800 (Pacific Standard Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">you probably need to set which zone to use in that</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed Dec 15 2021 06:20:59 GMT-0800 (Pacific Standard Time)">14:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><em>looks for an example</em></td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed Dec 15 2021 06:21:00 GMT-0800 (Pacific Standard Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@cmeister2:mozilla.org">cmeister2</span>&gt;</div></td><td class="msg-cell">ah, awesome</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed Dec 15 2021 06:22:14 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">cmeister2</span>: this may not be the clearest, but something like this: <a href="https://searchfox.org/mozilla-central/source/dom/bindings/SimpleGlobalObject.cpp#110-128">https://searchfox.org/mozilla-central/source/dom/bindings/SimpleGlobalObject.cpp#110-128</a></td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed Dec 15 2021 06:22:52 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">note the helpful comment about avoiding GC!</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed Dec 15 2021 06:22:58 GMT-0800 (Pacific Standard Time)">14:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">we should probably revisit this default</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed Dec 15 2021 06:24:54 GMT-0800 (Pacific Standard Time)">14:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@cmeister2:mozilla.org">cmeister2</span>&gt;</div></td><td class="msg-cell">and with that I believe you have solved the problem</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed Dec 15 2021 06:25:01 GMT-0800 (Pacific Standard Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@cmeister2:mozilla.org">cmeister2</span>&gt;</div></td><td class="msg-cell">thanks so much <span class="nick-4">jonco</span> !</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed Dec 15 2021 06:26:46 GMT-0800 (Pacific Standard Time)">14:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">no problem!</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed Dec 15 2021 06:38:11 GMT-0800 (Pacific Standard Time)">14:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> zones became extinct at some point, no?</blockquote></mx-reply><blockquote>
<p>A Zone is an execution context that persists across async tasks, and allows the creator of the zone to observe and control execution of the code within the zone.<br>-- <a href="https://docs.google.com/document/d/1F5Ug0jcrm031vhSMJEOgp1l-Is-Vf0UCNDY-LsQtAIY/edit#heading=h.gxa0n06xcq6f">https://docs.google.com/document/d/1F5Ug0jcrm031vhSMJEOgp1l-Is-Vf0UCNDY-LsQtAIY/edit#heading=h.gxa0n06xcq6f</a></p>
</blockquote>
<p>These so-called "zones" were never standardized to my knowledge. So <em>my</em> confusion probably stemmed from not fully understanding what was meant by the term / unsure of whether or not they would behave equivalently as "realms"</p>
</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed Dec 15 2021 06:47:10 GMT-0800 (Pacific Standard Time)">14:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">DerekNonGeneric</span>: zones are a spidermonkey concept and they are still present</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed Dec 15 2021 06:48:28 GMT-0800 (Pacific Standard Time)">14:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">zones are like separate heaps that can be garbage collected independetly (although per-runtime heap limits still apply)</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed Dec 15 2021 06:49:30 GMT-0800 (Pacific Standard Time)">14:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</div></td><td class="msg-cell">thank you for the clarification; that should help me while reading this codebase</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed Dec 15 2021 06:49:48 GMT-0800 (Pacific Standard Time)">14:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/source/js/public/Zone.h#15-35">https://searchfox.org/mozilla-central/source/js/public/Zone.h#15-35</a></td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed Dec 15 2021 06:50:26 GMT-0800 (Pacific Standard Time)">14:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">I didn't realize there used to be a separate use of zone</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed Dec 15 2021 06:59:17 GMT-0800 (Pacific Standard Time)">14:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@dereknongeneric:mozilla.org">DerekNonGeneric</span>&gt;</div></td><td class="msg-cell">Dart got rid of them by the looks of it (the article is archived and no trace of such a thing in current documentation) <a href="https://dart.dev/articles/archive/zones">https://dart.dev/articles/archive/zones</a></td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed Dec 15 2021 07:36:38 GMT-0800 (Pacific Standard Time)">15:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@asingh:igalia.com">Aditi</span>&gt;</div></td><td class="msg-cell">Hey! Is anyone working on implementing: <a href="https://github.com/tc39/proposal-array-grouping">https://github.com/tc39/proposal-array-grouping</a> proposal ? ( I was hoping to work on it)</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed Dec 15 2021 07:41:18 GMT-0800 (Pacific Standard Time)">15:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Hey! Is anyone working on implementing: <a href="https://github.com/tc39/proposal-array-grouping">https://github.com/tc39/proposal-array-grouping</a> proposal ? ( I was hoping to work on it)</blockquote></mx-reply>Looks like someone is already actively working on an implementation: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1739648">https://bugzilla.mozilla.org/show_bug.cgi?id=1739648</a></td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed Dec 15 2021 07:42:49 GMT-0800 (Pacific Standard Time)">15:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@asingh:igalia.com">Aditi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Looks like someone is already actively working on an implementation: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1739648">https://bugzilla.mozilla.org/show_bug.cgi?id=1739648</a></blockquote></mx-reply>Oh okay!</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed Dec 15 2021 07:43:09 GMT-0800 (Pacific Standard Time)">15:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">Are you interested in working on something else?</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed Dec 15 2021 07:46:32 GMT-0800 (Pacific Standard Time)">15:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@asingh:igalia.com">Aditi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Are you interested in working on something else?</blockquote></mx-reply>Sure! Do you have any suggestions? I've mostly worked on implementing proposals in webkit and spidermonkey!</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed Dec 15 2021 07:49:32 GMT-0800 (Pacific Standard Time)">15:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">I am not really sure which proposals to recommend, I am sure <span class="nick-10">yulia</span> would know.</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed Dec 15 2021 07:49:54 GMT-0800 (Pacific Standard Time)">15:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">Naively I would suggest looking at <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1741640">https://bugzilla.mozilla.org/show_bug.cgi?id=1741640</a>, which is also related to arrays</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed Dec 15 2021 07:54:24 GMT-0800 (Pacific Standard Time)">15:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">is bugzilla down rn?</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed Dec 15 2021 07:55:19 GMT-0800 (Pacific Standard Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">it works here</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Wed Dec 15 2021 07:55:31 GMT-0800 (Pacific Standard Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@asingh:igalia.com">Aditi</span>&gt;</div></td><td class="msg-cell">I cannot open it either!ü§∑‚Äç‚ôÄÔ∏è</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Wed Dec 15 2021 07:56:10 GMT-0800 (Pacific Standard Time)">15:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@padenot:mozilla.org">padenot</span>&gt;</div></td><td class="msg-cell">aws is somewhat down, no seachfox, no phab, no bugzilla, etc</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Wed Dec 15 2021 07:56:32 GMT-0800 (Pacific Standard Time)">15:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ms2ger:igalia.com">Ms2ger üíâüíâ</span>&gt;</div></td><td class="msg-cell">Does aws use log4j?</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Wed Dec 15 2021 08:04:18 GMT-0800 (Pacific Standard Time)">16:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@asingh:igalia.com">Aditi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Naively I would suggest looking at <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1741640">https://bugzilla.mozilla.org/show_bug.cgi?id=1741640</a>, which is also related to arrays</blockquote></mx-reply>I think we have a duplicate bug here! ü§î It's already implemented: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1729563">https://bugzilla.mozilla.org/show_bug.cgi?id=1729563</a></td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Wed Dec 15 2021 08:09:32 GMT-0800 (Pacific Standard Time)">16:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">Aditi</span>: you might look at this one: <a href="https://github.com/tc39/proposal-array-from-async">https://github.com/tc39/proposal-array-from-async</a></td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Wed Dec 15 2021 08:10:05 GMT-0800 (Pacific Standard Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">it is stage 2, but similar in terms of complexity to groupBy</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Wed Dec 15 2021 08:11:15 GMT-0800 (Pacific Standard Time)">16:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">it just advanced this meeting -- there may be some naming changes but I don't see any obvious other changes to the basic functionality</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Wed Dec 15 2021 08:12:09 GMT-0800 (Pacific Standard Time)">16:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">here is a bug for it, you can cc me if you need any help: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1746209">https://bugzilla.mozilla.org/show_bug.cgi?id=1746209</a></td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Wed Dec 15 2021 08:16:03 GMT-0800 (Pacific Standard Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@asingh:igalia.com">Aditi</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> here is a bug for it, you can cc me if you need any help: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1746209">https://bugzilla.mozilla.org/show_bug.cgi?id=1746209</a></blockquote></mx-reply>Sure! Looks good to me! Thank you! :)</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Wed Dec 15 2021 08:25:13 GMT-0800 (Pacific Standard Time)">16:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think we have a duplicate bug here! ü§î It's already implemented: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1729563">https://bugzilla.mozilla.org/show_bug.cgi?id=1729563</a></blockquote></mx-reply>Ups</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Wed Dec 15 2021 13:12:01 GMT-0800 (Pacific Standard Time)">21:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@mstange:mozilla.org">mstange</span>&gt;</div></td><td class="msg-cell">I have a question for people who work on the GC. The profiler now supports showing inlined calls for profiles recorded from local Firefox builds. Here are two profiles, or actually the same profile twice, once without inline calls and once with inline calls: <a href="https://share.firefox.dev/3GMdY19">https://share.firefox.dev/3GMdY19</a> (without), <a href="https://share.firefox.dev/3yyiqho">https://share.firefox.dev/3yyiqho</a> (with). How much more useful is the latter? Is it actionable?</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Wed Dec 15 2021 13:52:15 GMT-0800 (Pacific Standard Time)">21:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">mstange</span>: at first glance, it looks <em>much</em> more useful. We were just looking into that exact function, since it was showing up in profiles. We knew that tenuring seems kinda slow, but didn't really know why.</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Wed Dec 15 2021 13:53:50 GMT-0800 (Pacific Standard Time)">21:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">as for actionable... maybe? It's showing a lot of time in malloc. We might want to special-case the allocations here somehow, if we can get some speed at the cost of fragmentation.</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Wed Dec 15 2021 13:56:07 GMT-0800 (Pacific Standard Time)">21:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">anyway, my initial impression is that it's feeling like a pretty major improvement. Is it expensive or something? Or do you need testimonials? I'm wondering why you're asking and what you'd like to get from us.</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Wed Dec 15 2021 14:01:42 GMT-0800 (Pacific Standard Time)">22:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Hm, I'm not sure how much to believe the per-instruction counts. It seems odd for <code>Cell::isForwarded</code> to have almost as many hits as all of <code>moveSlotsToTenured</code>. The latter has a lot more memory accesses than the former.</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Wed Dec 15 2021 14:03:03 GMT-0800 (Pacific Standard Time)">22:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">ah! It gets called more.</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Wed Dec 15 2021 14:46:01 GMT-0800 (Pacific Standard Time)">22:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">confession: Continuing the review ride :) Making good progress though. (Almost certainly won't be done before friday though) </td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Wed Dec 15 2021 14:46:02 GMT-0800 (Pacific Standard Time)">22:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell">Seen! Your update will eventually appear on <a href="https://robotzilla.github.io/histoire">https://robotzilla.github.io/histoire</a></td></tr>

</tbody></table></div></div></div>
</body></html>