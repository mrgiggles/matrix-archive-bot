<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-05-24</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-05-24<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-05-23" class="nav-link"><span>prev</span></a>
<a href="2023-05-25" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Tue May 23 2023 19:06:26 GMT-0700 (Pacific Daylight Time)">02:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@jlink:mozilla.org">jlink</span>&gt;</div></td><td class="msg-cell">What are some of the reasons why a script would re-compile other than due to bailouts? The only other reason that I am aware of is a compacting GC. Are there more?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Tue May 23 2023 19:09:03 GMT-0700 (Pacific Daylight Time)">02:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@jlink:mozilla.org">jlink</span>&gt;</div></td><td class="msg-cell">(For those who might want more context: I'm looking into why some scripts in a particular Speedometer3 benchmark seem to be getting compiled many times. For the first script that I'm looking at - it gets compiled, bails out 10 times due to TranspiledCacheIR, gets re-compiled and has a shape guard + fixed slot load changed to a megamorphic cache look-up, and then gets compiled a third time and produces the exact same thing that it produced the second time.)</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Tue May 23 2023 19:10:56 GMT-0700 (Pacific Daylight Time)">02:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@jlink:mozilla.org">jlink</span>&gt;</div></td><td class="msg-cell">The first bailout seems a little fishy to me (did we really encounter a new shape after it having run consistently with only a single previous shape before?) but the third re-compile just seems unnecessary.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Tue May 23 2023 19:24:51 GMT-0700 (Pacific Daylight Time)">02:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">non-compacting GCs can also discard jit code</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Tue May 23 2023 19:25:48 GMT-0700 (Pacific Daylight Time)">02:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">see <a href="https://searchfox.org/mozilla-central/rev/8e1b221afcdae76284b1439c547b032d1f84d236/js/src/gc/GC.cpp#2247-2277">GCRuntime::shouldPreserveJITCode</a> for example.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Tue May 23 2023 19:38:46 GMT-0700 (Pacific Daylight Time)">02:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@jlink:mozilla.org">jlink</span>&gt;</div></td><td class="msg-cell">Thanks Steve, I'll take a look.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Tue May 23 2023 20:29:41 GMT-0700 (Pacific Daylight Time)">03:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@jlink:mozilla.org">jlink</span>&gt;</div></td><td class="msg-cell"><p>Is that function (GCRuntime::shouldPreserveJITCode()) only called when we're doing a GC? If so, we're doing GC <em>a lot</em>.<br>Here is (the last bit of) the call stack where I'm seeing it being called:</p>
<blockquote>
<p>xul.dll!js::gc::GCRuntime::shouldPreserveJITCode(JS::Realm * realm, const mozilla::TimeStamp &amp; currentTime, JS::GCReason reason, bool canAllocateMoreCode, bool isActiveCompartment) Line 2308	C++<br>xul.dll!js::gc::GCRuntime::endPreparePhase(JS::GCReason reason) Line 2781	C++<br>xul.dll!js::gc::GCRuntime::incrementalSlice(js::SliceBudget &amp; budget, JS::GCReason reason, bool budgetWasIncreased) Line 3645	C++<br>xul.dll!js::gc::GCRuntime::gcCycle(bool nonincrementalByAPI, const js::SliceBudget &amp; budgetArg, JS::GCReason reason) Line 4236	C++<br>xul.dll!js::gc::GCRuntime::collect(bool nonincrementalByAPI, const js::SliceBudget &amp; budget, JS::GCReason reason) Line 4420	C++</p>
</blockquote>
</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Tue May 23 2023 20:36:26 GMT-0700 (Pacific Daylight Time)">03:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@jlink:mozilla.org">jlink</span>&gt;</div></td><td class="msg-cell">Is there any <em>easy</em> way to tell if given script is having its compiled Ion code tossed out (whether due to GC or something else)? Is there a function on the JSScript that gets called when that happens?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Tue May 23 2023 20:57:07 GMT-0700 (Pacific Daylight Time)">03:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@mstange:mozilla.org">mstange</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">jlink</span>: Do you have a Linux machine so that you can use rr for debugging? It makes it easier to answer these kinds of questions because you can set a watchpoint on a variable and reverse-continue, and you’ll see who last modified that variable</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Tue May 23 2023 21:59:13 GMT-0700 (Pacific Daylight Time)">04:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@cpeterson:mozilla.org">Chris Peterson (:cpeterson)</span>&gt;</div></td><td class="msg-cell">Were there any GC changes in 114 that might have caused an increase in crashes when RefPtr and RefCounted atomically decrement ref counts? <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1834685">https://bugzilla.mozilla.org/show_bug.cgi?id=1834685</a></td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed May 24 2023 01:23:05 GMT-0700 (Pacific Daylight Time)">08:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">Chris Peterson (:cpeterson)</span>: RefPtr isn't usuallly GC related, but those crashes do seem to be JS related, mostly wasm.  I've commented in the bug.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed May 24 2023 02:42:52 GMT-0700 (Pacific Daylight Time)">09:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">Is there any reason your callback would get called multiple times?
I'm creating a promise executor from a callback and then adding reactions (fulfilled + rejected) with two more callbacks. Somewhere along the line, the callback is getting called multiple times and I'm confused.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed May 24 2023 02:45:23 GMT-0700 (Pacific Daylight Time)">09:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">libffi-rs is complaining with <code>FnOnce closure already used</code></td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed May 24 2023 06:48:55 GMT-0700 (Pacific Daylight Time)">13:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@jlink:mozilla.org">jlink</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-13">jlink</span>: Do you have a Linux machine so that you can use rr for debugging? It makes it easier to answer these kinds of questions because you can set a watchpoint on a variable and reverse-continue, and you’ll see who last modified that variable</blockquote></mx-reply>Hi Markus, I don't have access to a Linux machine. Visual Studio does have data breakpoints to find out who modifies a location in memory <em>in the future</em>. The problem is that I'm not sure what data to be looking at yet. (That is, I don't know what exactly happens when the GC runs and throws away Ion code. From what I understand the JSScripts are persistent but I think that something accessible from the script will get null'd back out when the GC throws the Ion-compiled code away.) I probably just need to track the data that BaseScript ultimately uses to answer to hasIonScript() - that will tell me when/why the Ion script is going away.</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed May 24 2023 06:53:44 GMT-0700 (Pacific Daylight Time)">13:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Is there any reason your callback would get called multiple times?<br>I'm creating a promise executor from a callback and then adding reactions (fulfilled + rejected) with two more callbacks. Somewhere along the line, the callback is getting called multiple times and I'm confused.</blockquote></mx-reply>Ok that was entirely my mistake. The function ptr became invalid when the function returned which is why only adding reactions failed. They were done after the function returned while creating a new promise with an executor is done while that's still on the stack.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed May 24 2023 06:55:48 GMT-0700 (Pacific Daylight Time)">13:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@mstange:mozilla.org">mstange</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">jlink</span>: Yeah I suppose you’ll need to find the right place to set the watchpoint on either way. But believe me, once you’ve experienced time travel debugging it’s hard to go back. You can also try WinDebug’s Time Travel Debugging</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed May 24 2023 07:04:01 GMT-0700 (Pacific Daylight Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@denispal:mozilla.org">denispal</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">jlink</span>: I think this is where we throw away the Ion code <a href="https://searchfox.org/mozilla-central/rev/a4fd6daad3a4123d995478467c1274653b283801/js/src/jit/Ion.cpp#2585">https://searchfox.org/mozilla-central/rev/a4fd6daad3a4123d995478467c1274653b283801/js/src/jit/Ion.cpp#2585</a></td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed May 24 2023 07:12:50 GMT-0700 (Pacific Daylight Time)">14:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><pre><code class="language-cpp">Assertion failure: !IsInsideNursery(thing), at C:/Users/Redfire/.cargo/git/checkouts/mozjs-0f28a5f34a8f25e0/bb4942c/mozjs/mozjs/js/src/gc/GC.cpp:4746

#01: js::gc::ClearEdgesTracer::onEdge&lt;JSObject&gt; (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\GC.cpp:4746)
#02: js::GenericTracerImpl&lt;js::gc::ClearEdgesTracer&gt;::onObjectEdge (C:\Users\Redfire\spiderfire\target\debug\build\mozjs_sys-277341a3d9bd2227\out\build\dist\include\js\TracingAPI.h:219)
#03: js::gc::TraceEdgeInternal (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\Tracer.h:106)
#04: TraceExternalEdgeHelper&lt;JSObject *&gt; (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\Marking.cpp:380)
#05: js::gc::TraceExternalEdge (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\Marking.cpp:406)
#06: JS::TraceEdge&lt;JSObject *&gt; (C:\Users\Redfire\spiderfire\target\debug\build\mozjs_sys-277341a3d9bd2227\out\build\dist\include\js\TracingAPI.h:350)
#07: CallObjectTracer (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\jsglue.cpp:886)
#08: mozjs::gc::trace::impl$1::trace (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\gc\trace.rs:48)
#09: mozjs::gc::trace::RootedTraceableSet::trace (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\gc\trace.rs:363)
#10: mozjs::gc::trace::trace_traceables::closure$0 (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\gc\trace.rs:370)
#11: std::thread::local::LocalKey&lt;core::cell::RefCell&lt;mozjs::gc::trace::RootedTraceableSet&gt; &gt;::try_with&lt;core::cell::RefCell&lt;mozjs::gc::trace::RootedTraceableSet&gt;,mozjs::gc::trace::trace_traceables::closure_env$0,tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\std\src\thread\local.rs:446)
#12: std::thread::local::LocalKey&lt;core::cell::RefCell&lt;mozjs::gc::trace::RootedTraceableSet&gt; &gt;::with&lt;core::cell::RefCell&lt;mozjs::gc::trace::RootedTraceableSet&gt;,mozjs::gc::trace::trace_traceables::closure_env$0,tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\std\src\thread\local.rs:422)
#13: mozjs::gc::trace::trace_traceables (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\gc\trace.rs:372)
#14: js::gc::GCRuntime::traceEmbeddingBlackRoots (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\RootMarking.cpp:377)
#15: js::gc::GCRuntime::finishRoots (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\RootMarking.cpp:439)
#16: JSRuntime::destroyRuntime (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\vm\Runtime.cpp:257)
#17: js::DestroyContext (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\vm\JSContext.cpp:226)
#18: JS_DestroyContext (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\jsapi.cpp:400)
#19: mozjs::rust::impl$11::drop (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\rust.rs:419)
#20: core::ptr::drop_in_place&lt;mozjs::rust::Runtime&gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\core\src\ptr\mod.rs:490)
#21: cli::evaluate::eval_module::async_fn$0 (C:\Users\Redfire\spiderfire\cli\src\evaluate.rs:100)
#22: cli::commands::run::run::async_fn$0 (C:\Users\Redfire\spiderfire\cli\src\commands\run.rs:17)
#23: cli::commands::handle_command::async_fn$0 (C:\Users\Redfire\spiderfire\cli\src\commands\mod.rs:49)
#24: cli::main::async_block$0 (C:\Users\Redfire\spiderfire\cli\src\main.rs:64)
#25: core::future::future::impl$1::poll&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\core\src\future\future.rs:126)
#26: tokio::runtime::scheduler::current_thread::impl$8::block_on::closure$0::closure$0::closure$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:541)
#27: tokio::runtime::scheduler::current_thread::impl$8::block_on::closure$0::closure$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:541)
#28: tokio::runtime::scheduler::current_thread::Context::enter&lt;enum2$&lt;core::task::poll::Poll&lt;tuple$&lt;&gt; &gt; &gt;,tokio::runtime::scheduler::current_thread::impl$8::block_on::closure$0::closure_env$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:350)
#29: tokio::runtime::scheduler::current_thread::impl$8::block_on::closure$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:540)
#30: tokio::runtime::scheduler::current_thread::impl$8::enter::closure$0&lt;tokio::runtime::scheduler::current_thread::impl$8::block_on::closure_env$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt;,enum2$&lt;core::option::Option&lt;tuple$&lt;&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:615)
#31: tokio::macros::scoped_tls::ScopedKey&lt;tokio::runtime::scheduler::current_thread::Context&gt;::set&lt;tokio::runtime::scheduler::current_thread::Context,tokio::runtime::scheduler::current_thread::impl$8::enter::closure_env$0&lt;tokio::runtime::scheduler::current_thr (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\macros\scoped_tls.rs:61)
#32: tokio::runtime::scheduler::current_thread::CoreGuard::enter&lt;tokio::runtime::scheduler::current_thread::impl$8::block_on::closure_env$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt;,enum2$&lt;core::option::Option&lt;tuple$&lt;&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:615)
#33: tokio::runtime::scheduler::current_thread::CoreGuard::block_on&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:530)
#34: tokio::runtime::scheduler::current_thread::CurrentThread::block_on&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:154)
#35: tokio::runtime::runtime::Runtime::block_on&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\runtime.rs:302)
#36: cli::main (C:\Users\Redfire\spiderfire\cli\src\main.rs:64)
#37: core::ops::function::FnOnce::call_once&lt;void (*)(),tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\core\src\ops\function.rs:250)
#38: std::sys_common::backtrace::__rust_begin_short_backtrace&lt;void (*)(),tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\std\src\sys_common\backtrace.rs:137)
#39: std::rt::lang_start::closure$0&lt;tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\std\src\rt.rs:166)
#40: std::rt::lang_start_internal (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library\std\src\rt.rs:148)
#41: std::rt::lang_start&lt;tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\std\src\rt.rs:165)
#42: main[C:\Users\Redfire\spiderfire\target\debug\cli.exe +0x33d79]
#43: __scrt_common_main_seh (D:\a\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl:288)
#44: BaseThreadInitThunk[C:\WINDOWS\System32\KERNEL32.DLL +0x17614]
#45: RtlUserThreadStart[C:\WINDOWS\SYSTEM32\ntdll.dll +0x526a1]
</code></pre>
<p>I'm trying to figure out why destroying the runtime is failing, and I'm really not sure</p>
</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed May 24 2023 07:16:14 GMT-0700 (Pacific Daylight Time)">14:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <pre><code class="language-cpp">Assertion failure: !IsInsideNursery(thing), at C:/Users/Redfire/.cargo/git/checkouts/mozjs-0f28a5f34a8f25e0/bb4942c/mozjs/mozjs/js/src/gc/GC.cpp:4746

#01: js::gc::ClearEdgesTracer::onEdge&lt;JSObject&gt; (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\GC.cpp:4746)
#02: js::GenericTracerImpl&lt;js::gc::ClearEdgesTracer&gt;::onObjectEdge (C:\Users\Redfire\spiderfire\target\debug\build\mozjs_sys-277341a3d9bd2227\out\build\dist\include\js\TracingAPI.h:219)
#03: js::gc::TraceEdgeInternal (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\Tracer.h:106)
#04: TraceExternalEdgeHelper&lt;JSObject *&gt; (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\Marking.cpp:380)
#05: js::gc::TraceExternalEdge (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\Marking.cpp:406)
#06: JS::TraceEdge&lt;JSObject *&gt; (C:\Users\Redfire\spiderfire\target\debug\build\mozjs_sys-277341a3d9bd2227\out\build\dist\include\js\TracingAPI.h:350)
#07: CallObjectTracer (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\jsglue.cpp:886)
#08: mozjs::gc::trace::impl$1::trace (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\gc\trace.rs:48)
#09: mozjs::gc::trace::RootedTraceableSet::trace (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\gc\trace.rs:363)
#10: mozjs::gc::trace::trace_traceables::closure$0 (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\gc\trace.rs:370)
#11: std::thread::local::LocalKey&lt;core::cell::RefCell&lt;mozjs::gc::trace::RootedTraceableSet&gt; &gt;::try_with&lt;core::cell::RefCell&lt;mozjs::gc::trace::RootedTraceableSet&gt;,mozjs::gc::trace::trace_traceables::closure_env$0,tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\std\src\thread\local.rs:446)
#12: std::thread::local::LocalKey&lt;core::cell::RefCell&lt;mozjs::gc::trace::RootedTraceableSet&gt; &gt;::with&lt;core::cell::RefCell&lt;mozjs::gc::trace::RootedTraceableSet&gt;,mozjs::gc::trace::trace_traceables::closure_env$0,tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\std\src\thread\local.rs:422)
#13: mozjs::gc::trace::trace_traceables (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\gc\trace.rs:372)
#14: js::gc::GCRuntime::traceEmbeddingBlackRoots (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\RootMarking.cpp:377)
#15: js::gc::GCRuntime::finishRoots (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\gc\RootMarking.cpp:439)
#16: JSRuntime::destroyRuntime (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\vm\Runtime.cpp:257)
#17: js::DestroyContext (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\vm\JSContext.cpp:226)
#18: JS_DestroyContext (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\mozjs\mozjs\js\src\jsapi.cpp:400)
#19: mozjs::rust::impl$11::drop (C:\Users\Redfire\.cargo\git\checkouts\mozjs-0f28a5f34a8f25e0\bb4942c\rust-mozjs\src\rust.rs:419)
#20: core::ptr::drop_in_place&lt;mozjs::rust::Runtime&gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\core\src\ptr\mod.rs:490)
#21: cli::evaluate::eval_module::async_fn$0 (C:\Users\Redfire\spiderfire\cli\src\evaluate.rs:100)
#22: cli::commands::run::run::async_fn$0 (C:\Users\Redfire\spiderfire\cli\src\commands\run.rs:17)
#23: cli::commands::handle_command::async_fn$0 (C:\Users\Redfire\spiderfire\cli\src\commands\mod.rs:49)
#24: cli::main::async_block$0 (C:\Users\Redfire\spiderfire\cli\src\main.rs:64)
#25: core::future::future::impl$1::poll&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\core\src\future\future.rs:126)
#26: tokio::runtime::scheduler::current_thread::impl$8::block_on::closure$0::closure$0::closure$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:541)
#27: tokio::runtime::scheduler::current_thread::impl$8::block_on::closure$0::closure$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:541)
#28: tokio::runtime::scheduler::current_thread::Context::enter&lt;enum2$&lt;core::task::poll::Poll&lt;tuple$&lt;&gt; &gt; &gt;,tokio::runtime::scheduler::current_thread::impl$8::block_on::closure$0::closure_env$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:350)
#29: tokio::runtime::scheduler::current_thread::impl$8::block_on::closure$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:540)
#30: tokio::runtime::scheduler::current_thread::impl$8::enter::closure$0&lt;tokio::runtime::scheduler::current_thread::impl$8::block_on::closure_env$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt;,enum2$&lt;core::option::Option&lt;tuple$&lt;&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:615)
#31: tokio::macros::scoped_tls::ScopedKey&lt;tokio::runtime::scheduler::current_thread::Context&gt;::set&lt;tokio::runtime::scheduler::current_thread::Context,tokio::runtime::scheduler::current_thread::impl$8::enter::closure_env$0&lt;tokio::runtime::scheduler::current_thr (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\macros\scoped_tls.rs:61)
#32: tokio::runtime::scheduler::current_thread::CoreGuard::enter&lt;tokio::runtime::scheduler::current_thread::impl$8::block_on::closure_env$0&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt;,enum2$&lt;core::option::Option&lt;tuple$&lt;&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:615)
#33: tokio::runtime::scheduler::current_thread::CoreGuard::block_on&lt;core::pin::Pin&lt;ref_mut$&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; &gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:530)
#34: tokio::runtime::scheduler::current_thread::CurrentThread::block_on&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\scheduler\current_thread.rs:154)
#35: tokio::runtime::runtime::Runtime::block_on&lt;enum2$&lt;cli::main::async_block_env$0&gt; &gt; (C:\Users\Redfire\.cargo\registry\src\index.crates.io-6f17d22bba15001f\tokio-1.27.0\src\runtime\runtime.rs:302)
#36: cli::main (C:\Users\Redfire\spiderfire\cli\src\main.rs:64)
#37: core::ops::function::FnOnce::call_once&lt;void (*)(),tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\core\src\ops\function.rs:250)
#38: std::sys_common::backtrace::__rust_begin_short_backtrace&lt;void (*)(),tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\std\src\sys_common\backtrace.rs:137)
#39: std::rt::lang_start::closure$0&lt;tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\std\src\rt.rs:166)
#40: std::rt::lang_start_internal (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc/library\std\src\rt.rs:148)
#41: std::rt::lang_start&lt;tuple$&lt;&gt; &gt; (/rustc/84c898d65adf2f39a5a98507f1fe0ce10a2b8dbc\library\std\src\rt.rs:165)
#42: main[C:\Users\Redfire\spiderfire\target\debug\cli.exe +0x33d79]
#43: __scrt_common_main_seh (D:\a\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl:288)
#44: BaseThreadInitThunk[C:\WINDOWS\System32\KERNEL32.DLL +0x17614]
#45: RtlUserThreadStart[C:\WINDOWS\SYSTEM32\ntdll.dll +0x526a1]
</code></pre>
<p>I'm trying to figure out why destroying the runtime is failing, and I'm really not sure</p>
</blockquote></mx-reply>Maybe you need a minor GC before that?</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed May 24 2023 07:17:10 GMT-0700 (Pacific Daylight Time)">14:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">No idea what that means.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed May 24 2023 07:18:56 GMT-0700 (Pacific Daylight Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@jlink:mozilla.org">jlink</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">mstange</span>: Time travel debugging? What is this world that we live in? :)<br><span class="nick-12">denispal</span> : Thanks! That looks perfect.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed May 24 2023 07:25:43 GMT-0700 (Pacific Daylight Time)">14:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><p>Actually, there's a variety of different errors I'm getting<br>stuff like</p>
<pre><code>Assertion failure: kind == JS::TracerKind::Tenuring || kind == JS::TracerKind::MinorSweeping || kind == JS::TracerKind::Moving, at C:/Users/Redfire/.cargo/git/checkouts/mozjs-0f28a5f34a8f25e0/bb4942c/mozjs/mozjs/js/src/gc/Marking.cpp:158
</code></pre>
<p>and</p>
<pre><code>Assertion failure: this-&gt;flags() == 0, at C:/Users/Redfire/.cargo/git/checkouts/mozjs-0f28a5f34a8f25e0/bb4942c/mozjs/mozjs/js/src/gc/Cell.h:790
</code></pre>
</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed May 24 2023 07:28:04 GMT-0700 (Pacific Daylight Time)">14:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">Are there supposed to be no objects traced in the heap by a extra gc roots tracer before the runtime is destroyed?</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed May 24 2023 07:32:33 GMT-0700 (Pacific Daylight Time)">14:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Redfire</span>: if you remove your extra roots tracer before destroying the runtime it should work</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed May 24 2023 07:40:46 GMT-0700 (Pacific Daylight Time)">14:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@mstange:mozilla.org">mstange</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">jlink</span>: <a href="https://devblogs.microsoft.com/visualstudio/introducing-time-travel-debugging-for-visual-studio-enterprise-2019/">https://devblogs.microsoft.com/visualstudio/introducing-time-travel-debugging-for-visual-studio-enterprise-2019/</a></td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed May 24 2023 07:48:53 GMT-0700 (Pacific Daylight Time)">14:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@jlink:mozilla.org">jlink</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-13">jlink</span>: <a href="https://devblogs.microsoft.com/visualstudio/introducing-time-travel-debugging-for-visual-studio-enterprise-2019/">https://devblogs.microsoft.com/visualstudio/introducing-time-travel-debugging-for-visual-studio-enterprise-2019/</a></blockquote></mx-reply>Exciting. It looks like that might be specific to code running on an Azure virtual machine. That article does mention that <a href="https://blogs.windows.com/windowsdeveloper/2017/09/27/time-travel-debugging-now-available-windbg-preview/">something similar was introduced in WinDbg for native code</a> although I've never used WinDbg.</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Wed May 24 2023 08:02:11 GMT-0700 (Pacific Daylight Time)">15:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@mstange:mozilla.org">mstange</span>&gt;</div></td><td class="msg-cell">oh I see</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Wed May 24 2023 08:46:58 GMT-0700 (Pacific Daylight Time)">15:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: ping</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Wed May 24 2023 08:56:30 GMT-0700 (Pacific Daylight Time)">15:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Profiling question - I've seen <a href="https://github.com/mstange/samply">https://github.com/mstange/samply</a> get mentioned as potentially being supported as an external profiler in future versions of Spidermonkey, is there a way to use it already with ESR 102 ? I don't have an easy access to <code>perf</code> on mac OS and so as far as I know I'm stuck for better JIT profiling</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Wed May 24 2023 08:57:32 GMT-0700 (Pacific Daylight Time)">15:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@mstange:mozilla.org">mstange</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">wraitii</span>: Not with ESR 102, but you can do it with 114 (the patch you need is <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1827214">https://bugzilla.mozilla.org/show_bug.cgi?id=1827214</a> )</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Wed May 24 2023 09:03:25 GMT-0700 (Pacific Daylight Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">I see, so the ESR after 102 should support it natively. I'll try to compile trunk in the meantime, but I need to update my mac OS, don't have the 13.0 SDK '^_^</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Wed May 24 2023 09:03:54 GMT-0700 (Pacific Daylight Time)">16:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@mstange:mozilla.org">mstange</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">wraitii</span>: If you use ./mach bootstrap it should download the right SDK automatically</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Wed May 24 2023 09:04:28 GMT-0700 (Pacific Daylight Time)">16:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">ah, that would be convenient. I'm building it as part of 0 A.D.'s pipeline so I'm not sure I have the bootstrap files, might need to do something in gecko-dev</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Wed May 24 2023 09:04:42 GMT-0700 (Pacific Daylight Time)">16:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@mstange:mozilla.org">mstange</span>&gt;</div></td><td class="msg-cell">oh, fun!</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Wed May 24 2023 09:05:26 GMT-0700 (Pacific Daylight Time)">16:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Hello everyone, I'm looking into Upgrading 0 A.D. from 91 to SM 102. I'm running into an odd issue. We are JS::Execute-ing some code, and I get an assertion error in <code>NearestEnclosingExtensibleLexicalEnvironment</code> that there is no env (inside a <code>GlobalOrEvalDeclInstantiation</code>). The cause, as far as I can tell, is that we <code>JS_DeepFreeze</code> a global variable. There doesn't seem to be anything else wrong or special. Any clue what might have caused this to break now?</blockquote></mx-reply>(Self-bump on this in case someone has an idea, otherwise I think I'll end up manually deep-freezing by recursing in JS)</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Wed May 24 2023 09:07:09 GMT-0700 (Pacific Daylight Time)">16:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-12">wraitii</span>: Not with ESR 102, but you can do it with 114 (the patch you need is <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1827214">https://bugzilla.mozilla.org/show_bug.cgi?id=1827214</a> )</blockquote></mx-reply>Awesome news by the way, getting the ability to profile JIT code without the full gecko-profiler is something we've been terribly missing</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Wed May 24 2023 09:07:20 GMT-0700 (Pacific Daylight Time)">16:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@mstange:mozilla.org">mstange</span>&gt;</div></td><td class="msg-cell">:)</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Wed May 24 2023 09:10:20 GMT-0700 (Pacific Daylight Time)">16:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><a href="https://paste.gg/p/redfire/8e37d68d383f429f8d393371b8a74060">https://paste.gg/p/redfire/8e37d68d383f429f8d393371b8a74060</a>
Yeah this is just weird, I don't know why runtime destruction is being such a pain.</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Wed May 24 2023 09:40:57 GMT-0700 (Pacific Daylight Time)">16:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">I'm also getting compile-errors that the build scripts can't find png-config (though I have it installed via home-brew) since ESR102 on macOS, had to hardcode the path</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Wed May 24 2023 10:10:54 GMT-0700 (Pacific Daylight Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Got things to compile against master -&gt; the JIT traces are properly reported as part of their flame graphs, but I'm not seeing any actual names, do I need specific flags/env settings for that ? </td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Wed May 24 2023 10:18:15 GMT-0700 (Pacific Daylight Time)">17:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Nevermind, that's just because the latest samply release is from January <span class="nick-1">mstange</span>  ;)</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Wed May 24 2023 10:20:22 GMT-0700 (Pacific Daylight Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">oh my god this is awesome</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Wed May 24 2023 10:56:44 GMT-0700 (Pacific Daylight Time)">17:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Hello everyone, I'm looking into Upgrading 0 A.D. from 91 to SM 102. I'm running into an odd issue. We are JS::Execute-ing some code, and I get an assertion error in <code>NearestEnclosingExtensibleLexicalEnvironment</code> that there is no env (inside a <code>GlobalOrEvalDeclInstantiation</code>). The cause, as far as I can tell, is that we <code>JS_DeepFreeze</code> a global variable. There doesn't seem to be anything else wrong or special. Any clue what might have caused this to break now?</blockquote></mx-reply>Sorry you've run into this. Nothing stands out, but if you have a backtrace (or a tiny example) it likely would be a bug worth opening.</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Wed May 24 2023 10:59:18 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Mh, I can try to get a tiny example. I doubt the stack trace would help you much tbh since the crash is in code that's after the deepfreeze call</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Wed May 24 2023 11:02:01 GMT-0700 (Pacific Daylight Time)">18:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Are there particular settings for how GCs dump jitted code in modern SM ? First thing I can tell from samply is that most of our big GCs dump all our jitted code</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Wed May 24 2023 11:02:08 GMT-0700 (Pacific Daylight Time)">18:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">(though most of it is theoretically still valid)</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Wed May 24 2023 11:04:25 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">that's the second time this has come up in as many days :-)</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Wed May 24 2023 11:04:36 GMT-0700 (Pacific Daylight Time)">18:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">we probably are overly eager to jettison jitcode</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Wed May 24 2023 11:05:32 GMT-0700 (Pacific Daylight Time)">18:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">one reason is to treat jit code as roughly LRU cached. As in, the easiest way to expire old unused jit code is to expire it all and let the stuff still in use get recompiled.</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Wed May 24 2023 11:06:09 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">at other times, it's for conservative correctness. The jit code doesn't want to have to adapt to potential or actual changes, so we just throw it all out.</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Wed May 24 2023 11:06:32 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">there are some <a href="https://searchfox.org/mozilla-central/rev/8e1b221afcdae76284b1439c547b032d1f84d236/js/src/gc/GC.cpp#2247-2277">heuristics</a> like preserving the jit code if we're animating</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Wed May 24 2023 11:06:46 GMT-0700 (Pacific Daylight Time)">18:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">that's probably the closest to what you're asking for</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Wed May 24 2023 11:07:12 GMT-0700 (Pacific Daylight Time)">18:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(or rather, if we're animating then we'll still throw it out, but not as quickly)</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Wed May 24 2023 11:08:13 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Think we already enable the 'setPreserveJitCode' thing. TBH the profiling suggests we're still spending most of our time in Ion, so the heuristic isn't too bad</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Wed May 24 2023 11:08:50 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">but we are definitely dumping code just to recompile it later in our case, and I think it might adversely affect some of the less-often-called functions (since presumably the warmup is reset every time? )</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Wed May 24 2023 11:09:45 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">the usual feeling I've gotten when I've looked into it is that conceptually what we're doing is kind of awful, but it's hard to find cases where it is significantly hurting things</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Wed May 24 2023 11:10:18 GMT-0700 (Pacific Daylight Time)">18:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I wouldn't expect the warmup to get reset when discarding jit code during GC, but I'm not sure. <span class="nick-10">jandem</span> / <span class="nick-10">iain|pto</span> ?</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Wed May 24 2023 11:10:50 GMT-0700 (Pacific Daylight Time)">18:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">but even if it isn't, the code won't get recompiled until it's actually called, so it amounts to the same thing</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Wed May 24 2023 11:12:24 GMT-0700 (Pacific Daylight Time)">18:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">hard to say from the profiling I get, could be, could be not.</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Wed May 24 2023 11:13:14 GMT-0700 (Pacific Daylight Time)">18:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">As sort of a 'hard baseline', on a main-function that we call every 'frame', we get about 10% of the time in Baseline and 90% in Ion, when it ought to be more like 98/2 since it's always the same function called always in the same way</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Wed May 24 2023 11:13:50 GMT-0700 (Pacific Daylight Time)">18:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I would expect the non-ion version to run a few times even if it starts recompiling immediately, since it won't get switched to until the compilation is complete so it'll run in the old mode (baseline, I guess?)</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Wed May 24 2023 11:14:05 GMT-0700 (Pacific Daylight Time)">18:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Yup, that's what I'm seeing in general</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Wed May 24 2023 11:15:37 GMT-0700 (Pacific Daylight Time)">18:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">But it seems to me like the warmup counters might get reset to some extent, because some sub-functions take much longer to 'go back' to running mostly on Ion</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Wed May 24 2023 11:16:36 GMT-0700 (Pacific Daylight Time)">18:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">To be a bit more clear perhaps we have a 'Timer' function that calls a 'Resource.PerformGather' function (essentially), after each GC the 'Timer' function goes back to Ion almost instantly, but the 'Resource.PerformGather' only goes back to Ion about 50% of the way to the next GC</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Wed May 24 2023 11:16:53 GMT-0700 (Pacific Daylight Time)">18:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">so we're wasting 50% of the time in baseline for no seeming reason, since it's the same function with basically the same parameters</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Wed May 24 2023 11:17:23 GMT-0700 (Pacific Daylight Time)">18:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">given that you're already using the <code>setPreserveJitCode</code> thing, I think you'll need to consult an actual jit person</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Wed May 24 2023 11:17:56 GMT-0700 (Pacific Daylight Time)">18:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I don't know when such a person will be online</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Wed May 24 2023 11:18:23 GMT-0700 (Pacific Daylight Time)">18:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">no worries, and I can upload some profile runs if there's interest. It's just my first time finally looking at this kind of data and there's some fairly obvious patterns :D</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Wed May 24 2023 11:19:12 GMT-0700 (Pacific Daylight Time)">18:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I'm curious, and I'd also like to know how similar what you're seeing is to what we typically see with Firefox</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Wed May 24 2023 11:20:49 GMT-0700 (Pacific Daylight Time)">18:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Should I open a bug ?</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Wed May 24 2023 11:22:13 GMT-0700 (Pacific Daylight Time)">18:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">sure, it seems like it would be a good place to collect information</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Wed May 24 2023 11:58:39 GMT-0700 (Pacific Daylight Time)">18:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Opened <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1834848">https://bugzilla.mozilla.org/show_bug.cgi?id=1834848</a> and attached a small profiling replay which showcases the above behaviour</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Wed May 24 2023 12:27:52 GMT-0700 (Pacific Daylight Time)">19:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">Is it correct that we don't need to AutoRealm in C++ if we know that we are being called from a JS function ? </td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Wed May 24 2023 12:34:54 GMT-0700 (Pacific Daylight Time)">19:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">yes, you only need to use it if you're going to be working with an object that may be from another Realm, and the work you're doing could have actions or side effects that need to happen within that Realm (eg JS function calls). Ordinarily you can just unwrap any cross-realm data and work with it.</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Wed May 24 2023 12:36:47 GMT-0700 (Pacific Daylight Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">or you can use <code>CallNonGenericMethod</code> which will do 90% of the right thing, and 10% the guaranteed-to-be-wrong thing (which mainly just shows up as thrown Errors being in the wrong Realm.) But anyway, that's still only relevant if your function needs to call something else.</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Wed May 24 2023 12:37:37 GMT-0700 (Pacific Daylight Time)">19:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">the above is my understanding, at least</td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Wed May 24 2023 12:37:53 GMT-0700 (Pacific Daylight Time)">19:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">I think in general we're not doing any cross-realm calls in our general code</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Wed May 24 2023 12:38:01 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">but we do have AutoRealm wrappers everywhere</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Wed May 24 2023 12:38:08 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">and they end up showing in the profiling in some places</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Wed May 24 2023 12:38:29 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">I think I might get on a mission to purge some of the un-necessary ones, which are probably 'most'</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Wed May 24 2023 12:38:49 GMT-0700 (Pacific Daylight Time)">19:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">you need to get into your global's Realm somewhere, but that can probably be very early on</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Wed May 24 2023 12:39:06 GMT-0700 (Pacific Daylight Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">But if the stack is C++ -&gt; JS -&gt; C++</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Wed May 24 2023 12:39:14 GMT-0700 (Pacific Daylight Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">does the latter C++ code need to "re-realm"</td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Wed May 24 2023 12:39:19 GMT-0700 (Pacific Daylight Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">no</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Wed May 24 2023 12:39:28 GMT-0700 (Pacific Daylight Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">'cause I think that's most of the calls we do</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Wed May 24 2023 12:39:36 GMT-0700 (Pacific Daylight Time)">19:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">seems likely</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Wed May 24 2023 12:40:18 GMT-0700 (Pacific Daylight Time)">19:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">good to know, thanks</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Wed May 24 2023 12:40:37 GMT-0700 (Pacific Daylight Time)">19:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">I'll be around in the coming days if the GC-people want some more details on the profiling / have questions / anything</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Wed May 24 2023 12:40:49 GMT-0700 (Pacific Daylight Time)">19:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@wraitii:mozilla.org">wraitii</span>&gt;</div></td><td class="msg-cell">thanks again for enabling JIT-profiling without gecko :) </td></tr>

</tbody></table></div></div></div>
</body></html>