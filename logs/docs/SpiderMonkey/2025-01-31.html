<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2025-01-31</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2025-01-31<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2025-01-30" class="nav-link"><span>prev</span></a>
<a href="2025-02-01" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Jan 31 2025 08:48:46 GMT-0800 (Pacific Standard Time)">16:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@netskink:matrix.org">netskink</span>&gt;</div></td><td class="msg-cell">Hello, I opened a thread on mozilla developers and was told this was a better place to discuss.  Should I post this link here or repost the question?  Here is the link to the other thread <a href="https://matrix.to/#/!lrZtdjyLpBmoKbMdyx:mozilla.org/$jfeBKjaO8_Cl6uU9j0C3MJBE0M3CWEtE46sBYZ8kXBQ?via=mozilla.org&amp;via=matrix.org&amp;via=igalia.com">https://matrix.to/#/!lrZtdjyLpBmoKbMdyx:mozilla.org/$jfeBKjaO8_Cl6uU9j0C3MJBE0M3CWEtE46sBYZ8kXBQ?via=mozilla.org&amp;via=matrix.org&amp;via=igalia.com</a></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Jan 31 2025 09:00:00 GMT-0800 (Pacific Standard Time)">17:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">you don't have to repost the question.  try reproducing the toolchain environment at the point of version 52 (that is, 2017 or so I guess) and see if the issue goes away</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Jan 31 2025 09:08:22 GMT-0800 (Pacific Standard Time)">17:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@netskink:matrix.org">netskink</span>&gt;</div></td><td class="msg-cell">Yes, that is the plan.  I can't do that at the moment though.  I need to use a laptop from home, a network from home, etc.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Jan 31 2025 09:10:27 GMT-0800 (Pacific Standard Time)">17:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@netskink:matrix.org">netskink</span>&gt;</div></td><td class="msg-cell">in regards to gcc vs clang. I found in the source, perhaps a moz.config some if defined options.  ONe was HAVE_DTRACE.  I could do ./mach configure --disable-trace and the config option worked.  However, I didn't find the tie in to be exact.  HAVE_DTRACE vs --disable-dtrace.  I also found CLANG_CXX.  Any idea to find how to map these or a short cut to just --enable-clang?</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Jan 31 2025 09:17:58 GMT-0800 (Pacific Standard Time)">17:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@netskink:matrix.org">netskink</span>&gt;</div></td><td class="msg-cell"><p>FWIW, I addeed to moz.config:</p>
<pre><code>export CC=clang
export CXX=clang++
export LD=lld"
</code></pre>
<p>And that is currently building and appears to be using clang.</p>
<p>An option to do:</p>
<pre><code>ac_add_options --enable-linker=lld
</code></pre>
<p>Did not work.  It said it was an invalid option.</p>
</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Jan 31 2025 09:20:08 GMT-0800 (Pacific Standard Time)">17:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@netskink:matrix.org">netskink</span>&gt;</div></td><td class="msg-cell">Any idea how to disable jit?  --disable-jit does not work on 52, but does work on 130</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Jan 31 2025 09:33:52 GMT-0800 (Pacific Standard Time)">17:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@netskink:matrix.org">netskink</span>&gt;</div></td><td class="msg-cell"><p>This is odd. Using clang, this is an error:</p>
<pre><code>0:00.17 /usr/bin/gmake -f client.mk -s
 0:00.81 Adding client.mk options from /home/davis/sm/norust2/mozilla-unified/mozconfig:
 0:00.81     MOZ_OBJDIR=/home/davis/sm/norust2/mozilla-unified/obj-x86_64-pc-linux-gnu
 0:00.81     OBJDIR=/home/davis/sm/norust2/mozilla-unified/obj-x86_64-pc-linux-gnu
 0:00.81     FOUND_MOZCONFIG=/home/davis/sm/norust2/mozilla-unified/mozconfig
 0:00.93 Elapsed: 0.00s; From dist/public: Kept 0 existing; Added/updated 0; Removed 0 files and 0 directories.
 0:00.93 Elapsed: 0.00s; From dist/sdk: Kept 0 existing; Added/updated 0; Removed 0 files and 0 directories.
 0:00.93 Elapsed: 0.00s; From dist/private: Kept 0 existing; Added/updated 0; Removed 0 files and 0 directories.
 0:00.95 Elapsed: 0.01s; From dist/include: Kept 326 existing; Added/updated 0; Removed 0 files and 0 directories.
 0:00.99 Elapsed: 0.00s; From _tests: Kept 1 existing; Added/updated 0; Removed 0 files and 0 directories.
 0:01.49 0 compiler warnings present.
Error running mach:

    ['build']

The error occurred in code that was called by the mach command. This is either
a bug in the called code itself or in the way that mach is calling it.

You should consider filing a bug for this issue.

If filing a bug, please include the full output of mach, including this error
message.

The details of the failure are as follows:

AssertionError

  File "/home/davis/sm/norust2/mozilla-unified/python/mozbuild/mozbuild/mach_commands.py", line 459, in build
    monitor.finish(record_usage=status==0)
  File "/home/davis/sm/norust2/mozilla-unified/python/mozbuild/mozbuild/mach_commands.py", line 236, in __exit__
    self.monitor.stop_resource_recording()
  File "/home/davis/sm/norust2/mozilla-unified/python/mozbuild/mozbuild/controller/building.py", line 243, in stop_resource_recording
    self.resources.stop()
  File "/home/davis/sm/norust2/mozilla-unified/testing/mozbase/mozsystemmonitor/mozsystemmonitor/resourcemonitor.py", line 289, in stop
    assert self._running
</code></pre>
<p>I'm not certian where the code is relative to the code</p>
</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Jan 31 2025 09:34:07 GMT-0800 (Pacific Standard Time)">17:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@netskink:matrix.org">netskink</span>&gt;</div></td><td class="msg-cell">is this a js compiler test failure?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Jan 31 2025 09:48:05 GMT-0800 (Pacific Standard Time)">17:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@fkilic:mozilla.org">fkilic</span>&gt;</div></td><td class="msg-cell">Is Number.MAX_SAFE_INTEGER same on 32 bits systems? AFAICT from MDN it sounds like it is, but just want to make sure</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Jan 31 2025 09:49:08 GMT-0800 (Pacific Standard Time)">17:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><a href="https://262.ecma-international.org/#sec-number.max_safe_integer">yes</a> (it's in the spec)</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Jan 31 2025 09:49:24 GMT-0800 (Pacific Standard Time)">17:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@fkilic:mozilla.org">fkilic</span>&gt;</div></td><td class="msg-cell">awesome, thank you!</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Jan 31 2025 10:03:56 GMT-0800 (Pacific Standard Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">(Honestly, in the 52 era you might be best served by using the old <code>./configure &amp;&amp; make</code> story if you can get a package somwhere</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Jan 31 2025 10:31:42 GMT-0800 (Pacific Standard Time)">18:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@netskink:matrix.org">netskink</span>&gt;</div></td><td class="msg-cell">to be honest, i am hoping after I get a working build, to use those generated makefiles as my starting point on zos. I like this mach tool, but I dont have pyton27 on zos.  I do have 3.11.9 and 3.12.1</td></tr>

</tbody></table></div></div></div>
</body></html>