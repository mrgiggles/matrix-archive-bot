<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2024-11-19</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2024-11-19<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-11-18" class="nav-link"><span>prev</span></a>
<a href="2024-11-20" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Nov 18 2024 19:01:58 GMT-0800 (Pacific Standard Time)">03:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">thanks! extension code often interacts with ccw and xray, and also the "popup" may suggest multiple globals. we'll need to look into those handlings</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Nov 18 2024 19:25:16 GMT-0800 (Pacific Standard Time)">03:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">perhaps some "access denied" scenario can hit it?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Nov 18 2024 19:26:45 GMT-0800 (Pacific Standard Time)">03:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">ah... DeadWrapper maybe?</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Nov 18 2024 19:53:50 GMT-0800 (Pacific Standard Time)">03:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@gaporf:mozilla.org">gaporf</span>&gt;</div></td><td class="msg-cell">Hello, if I have an accepted patch (<a href="https://phabricator.services.mozilla.com/D228292">https://phabricator.services.mozilla.com/D228292</a>) and in the next revision I want to add tests, do I need to do anything besides just creating a new revision? Should I add links or tags to the old and/or new revisions?</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Nov 18 2024 19:58:12 GMT-0800 (Pacific Standard Time)">03:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">please commit part 2 onto the current part 1, and then perform <code>moz-phab submit</code>.  the command will mention both part 1 and part 2, where the part 1 points the existing revision's number D228292, which part 2 being "NEW".  then it will make the part 2 depends on part 1 automatically.  if it doesn't work well, you can manually link them from "Edit Related Revisions..." menu in the phabricator revision page</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Nov 18 2024 19:59:30 GMT-0800 (Pacific Standard Time)">03:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@gaporf:mozilla.org">gaporf</span>&gt;</div></td><td class="msg-cell">I'll try to do it, thank you for the answer</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Nov 18 2024 20:04:26 GMT-0800 (Pacific Standard Time)">04:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">posted comment to <a href="https://phabricator.services.mozilla.com/D224959">https://phabricator.services.mozilla.com/D224959</a></td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Nov 18 2024 20:06:06 GMT-0800 (Pacific Standard Time)">04:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@gaporf:mozilla.org">gaporf</span>&gt;</div></td><td class="msg-cell">Did I do anything right?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Nov 18 2024 20:09:43 GMT-0800 (Pacific Standard Time)">04:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yes!</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Nov 18 2024 22:37:05 GMT-0800 (Pacific Standard Time)">06:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@tarek:mozilla.org">Tarek</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">nika</span>: Ryan has updated <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1930844">https://bugzilla.mozilla.org/show_bug.cgi?id=1930844</a> with his findings on the pernosco dump. Do you mind you checking it out ?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Nov 18 2024 23:09:40 GMT-0800 (Pacific Standard Time)">07:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nika:mozilla.org">nika</span>&gt;</div></td><td class="msg-cell">can you leave a ni? for me so I get to it tomorrow?</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Nov 19 2024 07:59:41 GMT-0800 (Pacific Standard Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@ms2ger:igalia.com">Ms2ger</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">anba</span>: so should I read <a href="https://github.com/tc39/test262/pull/4329">https://github.com/tc39/test262/pull/4329</a> as saying that you've got <em>nearly</em> complete coverage?</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Nov 19 2024 10:21:21 GMT-0800 (Pacific Standard Time)">18:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@debadree25:mozilla.org">debadree25</span>&gt;</div></td><td class="msg-cell">how does one work to identify what one can do to identify a AWSY regression in base content js the link in bug report points to <a href="https://firefox-source-docs.mozilla.org/testing/perfdocs/awsy.html#base-content-js">here</a> which says " can indicate leaks in the JS engine, optimizations that take performance into consideration at the expense of more memory, or problems with the garbage collector" which is quite a lot of possibilities ðŸ˜…ðŸ˜…ðŸ˜…ðŸ˜… any tips on how can one start debugging this locally?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Nov 19 2024 10:26:47 GMT-0800 (Pacific Standard Time)">18:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><code>about:memory</code> can be a first start, which is where AWSY gets its metric from. (IIRC)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Nov 19 2024 10:30:12 GMT-0800 (Pacific Standard Time)">18:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> how does one work to identify what one can do to identify a AWSY regression in base content js the link in bug report points to <a href="https://firefox-source-docs.mozilla.org/testing/perfdocs/awsy.html#base-content-js">here</a> which says " can indicate leaks in the JS engine, optimizations that take performance into consideration at the expense of more memory, or problems with the garbage collector" which is quite a lot of possibilities ðŸ˜…ðŸ˜…ðŸ˜…ðŸ˜… any tips on how can one start debugging this locally?</blockquote></mx-reply>I think the first step is to download the memory report before and after from perfherder and then use the diff feature in about:memory to see what changed. Sometimes you'll have to look at the before and after reports separately to make sense of it.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Nov 19 2024 10:48:49 GMT-0800 (Pacific Standard Time)">18:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@debadree25:mozilla.org">debadree25</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think the first step is to download the memory report before and after from perfherder and then use the diff feature in about:memory to see what changed. Sometimes you'll have to look at the before and after reports separately to make sense of it.</blockquote></mx-reply>hmm how does one download this? i find the alert summary <a href="https://treeherder.mozilla.org/perfherder/alerts?id=42719">here</a> no link to any ðŸ˜…ðŸ˜…ðŸ˜…ðŸ˜…</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Nov 19 2024 10:52:11 GMT-0800 (Pacific Standard Time)">18:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@mccr8:mozilla.org">mccr8</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> hmm how does one download this? i find the alert summary <a href="https://treeherder.mozilla.org/perfherder/alerts?id=42719">here</a> no link to any ðŸ˜…ðŸ˜…ðŸ˜…ðŸ˜…</blockquote></mx-reply>Click on the "open graph" button (a little graph icon) which gets you here: <a href="https://treeherder.mozilla.org/perfherder/graphs?timerange=1209600&amp;series=autoland,3806445,1,4">https://treeherder.mozilla.org/perfherder/graphs?timerange=1209600&amp;series=autoland,3806445,1,4</a><br>Then click on the measurement point you want, and select "job" on the little pop up window.<br>Then click on the "Artifacts and Debugging Tools" on the Treeherder window, on the job that was selected.<br>Download the file memory-report-TabsOpenForceGC-0.json.gz<br>I recommend that you call one something like memory-report-before.json.gz and memory-report-after.json.gz or whatever.<br>Lot of steps!</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Nov 19 2024 11:06:12 GMT-0800 (Pacific Standard Time)">19:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@debadree25:mozilla.org">debadree25</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Click on the "open graph" button (a little graph icon) which gets you here: <a href="https://treeherder.mozilla.org/perfherder/graphs?timerange=1209600&amp;series=autoland,3806445,1,4">https://treeherder.mozilla.org/perfherder/graphs?timerange=1209600&amp;series=autoland,3806445,1,4</a><br>Then click on the measurement point you want, and select "job" on the little pop up window.<br>Then click on the "Artifacts and Debugging Tools" on the Treeherder window, on the job that was selected.<br>Download the file memory-report-TabsOpenForceGC-0.json.gz<br>I recommend that you call one something like memory-report-before.json.gz and memory-report-after.json.gz or whatever.<br>Lot of steps!</blockquote></mx-reply>thank you so much!</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Nov 19 2024 11:14:49 GMT-0800 (Pacific Standard Time)">19:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@anba:mozilla.org">anba</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">Ms2ger</span>: line coverage for the code in <a href="https://searchfox.org/mozilla-central/source/js/src/builtin/temporal">https://searchfox.org/mozilla-central/source/js/src/builtin/temporal</a> is already at 81.56% when running the tests from built-ins/Temporal. The PR just improves the coverage to 82.72%</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Nov 19 2024 11:19:08 GMT-0800 (Pacific Standard Time)">19:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@anba:mozilla.org">anba</span>&gt;</div></td><td class="msg-cell">And line coverage is at 91.01% when additionally running the tests from intl402/Temporal.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Nov 19 2024 11:36:03 GMT-0800 (Pacific Standard Time)">19:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">anba</span>: are you running staging/Temporal as well?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Nov 19 2024 11:40:45 GMT-0800 (Pacific Standard Time)">19:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@anba:mozilla.org">anba</span>&gt;</div></td><td class="msg-cell">staging/Temporal only improves the line coverage to 91.02%</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Nov 19 2024 12:37:44 GMT-0800 (Pacific Standard Time)">20:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nika:mozilla.org">nika</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-2">nika</span>: Ryan has updated <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1930844">https://bugzilla.mozilla.org/show_bug.cgi?id=1930844</a> with his findings on the pernosco dump. Do you mind you checking it out ?</blockquote></mx-reply>Can you try out <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1932221">https://bugzilla.mozilla.org/show_bug.cgi?id=1932221</a> and see if it helps?</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Nov 19 2024 13:00:10 GMT-0800 (Pacific Standard Time)">21:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@sefeng:mozilla.org">sefeng</span>&gt;</div></td><td class="msg-cell">thanks for help, iain, arai </td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Nov 19 2024 14:05:54 GMT-0800 (Pacific Standard Time)">22:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bethr:mozilla.org">beth</span>&gt;</div></td><td class="msg-cell">out of curiousity, how far along is the explicit resource management proposal implementation? I am really excited to use it to rewrite a bunch of awful tests at some point</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Nov 19 2024 14:07:41 GMT-0800 (Pacific Standard Time)">22:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">beth</span>: The metabug is <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1569081">here</a>.</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Nov 19 2024 14:08:07 GMT-0800 (Pacific Standard Time)">22:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">I'm pretty sure we have a fully functional implementation, although IIUC we haven't done a lot of performance work on it.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Nov 19 2024 14:08:21 GMT-0800 (Pacific Standard Time)">22:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bethr:mozilla.org">beth</span>&gt;</div></td><td class="msg-cell">yeah that metabug doesnt have open deps</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Nov 19 2024 14:08:39 GMT-0800 (Pacific Standard Time)">22:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bethr:mozilla.org">beth</span>&gt;</div></td><td class="msg-cell">Is it behind a pref or a build flag or?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Nov 19 2024 14:09:26 GMT-0800 (Pacific Standard Time)">22:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Well it may blow up devtools -- so that's one thing :P <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1902966">https://bugzilla.mozilla.org/show_bug.cgi?id=1902966</a> </td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Nov 19 2024 14:09:38 GMT-0800 (Pacific Standard Time)">22:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Looks like a <a href="https://searchfox.org/mozilla-central/source/js/moz.configure#176-192">build flag</a></td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Nov 19 2024 14:10:14 GMT-0800 (Pacific Standard Time)">22:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Yeah, I don't think it's built in by default yet </td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Nov 19 2024 14:10:52 GMT-0800 (Pacific Standard Time)">22:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">debadree25</span> is the contributor extraordinaire who has implemented it all, and can probably weigh in on shipping plans</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Nov 19 2024 14:10:58 GMT-0800 (Pacific Standard Time)">22:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">It looks like it should be available in Nightly, actually</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Nov 19 2024 14:11:09 GMT-0800 (Pacific Standard Time)">22:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">But it doesn't work in the console</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Nov 19 2024 14:11:14 GMT-0800 (Pacific Standard Time)">22:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Maybe there's an additional pref</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Nov 19 2024 14:11:15 GMT-0800 (Pacific Standard Time)">22:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bethr:mozilla.org">beth</span>&gt;</div></td><td class="msg-cell">yeah there doesnt seem to be anything in tree with it outside <code>js/</code></td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Nov 19 2024 14:11:35 GMT-0800 (Pacific Standard Time)">22:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><code>javascript.options.experimental.explicit_resource_management</code></td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Nov 19 2024 14:12:28 GMT-0800 (Pacific Standard Time)">22:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Probably can't use it outside of JS (even through explicit preffing on in tests) until -building- it rides the trains</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Nov 19 2024 14:13:08 GMT-0800 (Pacific Standard Time)">22:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">It's tested <a href="https://searchfox.org/mozilla-central/source/js/xpconnect/tests/chrome/test_xrayToExplicitResourceManagement.html#17">here</a></td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Nov 19 2024 14:17:49 GMT-0800 (Pacific Standard Time)">22:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@bethr:mozilla.org">beth</span>&gt;</div></td><td class="msg-cell">cheers thanks</td></tr>

</tbody></table></div></div></div>
</body></html>