<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-11-17</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-11-17<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-11-16" class="nav-link"><span>prev</span></a>
<a href="2022-11-18" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Nov 16 2022 23:07:09 GMT-0800 (Pacific Standard Time)">07:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-5" title="@luyahan:mozilla.org">luyahan</span>&gt;</div></td><td class="msg-cell"><pre><code>  // Zeroes dest if the condition is true.
  inline void spectreZeroRegister(Condition cond, Register scratch,
                                  Register dest)
</code></pre>
<p>About this macroassembler func, I don't know where are operands to compare? Does the func need to been used with other func?</p>
</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Nov 16 2022 23:16:51 GMT-0800 (Pacific Standard Time)">07:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-5">luyahan</span>: it uses the flag register.  so, the comparison should be done immediately before it</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Nov 16 2022 23:18:30 GMT-0800 (Pacific Standard Time)">07:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">comparison instruction sets flag register based on the result, and the instruction generated by <code>spectreZeroRegister</code> (e.g. cmov) uses the flag as condition</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Nov 16 2022 23:55:16 GMT-0800 (Pacific Standard Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"> * <p>has anyone experienced <code>JSRuntime</code> leak in reftest?  I'm looking into the failure that:</p>
<ul>
<li><a href="https://treeherder.mozilla.org/jobs?repo=try&amp;revision=4396f720d77a91bf170905221be6aa15f33feb13">happens with my patch, on automation</a></li>
<li><del><a href="https://treeherder.mozilla.org/jobs?repo=try&amp;revision=53b8da707b04409db923897c51aa273beb3c215c">doesn't happen without my patch on automation</a></del> (actually, happens, but it doesn't result in failure)</li>
<li>happens without my patch locally</li>
</ul>
<p>and wondering if it's pre-existing issue or not</p>
</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Nov 16 2022 23:55:39 GMT-0800 (Pacific Standard Time)">07:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>has anyone experienced <code>JSRuntime</code> leak in reftest?  I'm looking into the failure that:</p>
<ul>
<li><a href="https://treeherder.mozilla.org/jobs?repo=try&amp;revision=4396f720d77a91bf170905221be6aa15f33feb13">happens with my patch, on automation</a></li>
<li><del><a href="https://treeherder.mozilla.org/jobs?repo=try&amp;revision=53b8da707b04409db923897c51aa273beb3c215c">doesn't happen without my patch on automation</a></del> (actually, happens, but it doesn't result in failure)</li>
<li>happens without my patch locally</li>
</ul>
<p>and wondering if it's pre-existing issue or not</p>
</blockquote></mx-reply>related question.   anyone know why we're leaking JS runtime (and some more things) in reftest?  is it something we should support, or something we should fix?</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Nov 16 2022 23:57:49 GMT-0800 (Pacific Standard Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">if we should support the "leak", possible fix for my <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1786834">bug 1786834</a> patch is to support JSRuntime being alive even after <code>JS_Shutdown</code>, by adding refcount to the string cache, and destruct the cache <em>after</em> <code>JS_Shutdown</code>. but I feel that's going to wrong direction</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Nov 16 2022 23:57:51 GMT-0800 (Pacific Standard Time)">07:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1786834">https://bugzil.la/1786834</a> — ASSIGNED (arai) — Make SharedImmutableStringsCache globally accessible singleton</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Nov 16 2022 23:58:54 GMT-0800 (Pacific Standard Time)">07:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is there already some workaround to other structure that's freed in <code>JS_Shutdown</code> ?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Nov 17 2022 05:14:21 GMT-0800 (Pacific Standard Time)">13:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chococandy:mozilla.org">chococandy</span>&gt;</div></td><td class="msg-cell">Hello,
I am new here and thinking to contribute to SpiderMonkey.</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Nov 17 2022 06:14:54 GMT-0800 (Pacific Standard Time)">14:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">chococandy</span>: Welcome, is there any particular topic you might have a preference for?</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Nov 17 2022 06:29:51 GMT-0800 (Pacific Standard Time)">14:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chococandy:mozilla.org">chococandy</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-4">chococandy</span>: Welcome, is there any particular topic you might have a preference for?</blockquote></mx-reply>I want to learn and this will be my first contribution. I want to start off with fixing easy bugs.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Nov 17 2022 06:36:02 GMT-0800 (Pacific Standard Time)">14:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">We have a few good-first-bugs: <a href="https://codetribute.mozilla.org/projects/jseng">https://codetribute.mozilla.org/projects/jseng</a></td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Nov 17 2022 06:36:35 GMT-0800 (Pacific Standard Time)">14:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">some old one might not be as good as initially thought :/</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Nov 17 2022 06:40:58 GMT-0800 (Pacific Standard Time)">14:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chococandy:mozilla.org">chococandy</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> We have a few good-first-bugs: <a href="https://codetribute.mozilla.org/projects/jseng">https://codetribute.mozilla.org/projects/jseng</a></blockquote></mx-reply>Thank you. I'll go through the list :)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Nov 17 2022 09:33:56 GMT-0800 (Pacific Standard Time)">17:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">yulia</span>: Any reasons why ScriptKind::eImport yield a ClassicScript load request? Isn't that supposed to be a module?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Nov 17 2022 09:34:34 GMT-0800 (Pacific Standard Time)">17:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">eImport? got a link?</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Nov 17 2022 09:34:38 GMT-0800 (Pacific Standard Time)">17:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">i think it should be eModule?</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Nov 17 2022 09:35:01 GMT-0800 (Pacific Standard Time)">17:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/source/dom/script/ScriptLoader.cpp#822">https://searchfox.org/mozilla-central/source/dom/script/ScriptLoader.cpp#822</a></td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Nov 17 2022 09:35:12 GMT-0800 (Pacific Standard Time)">17:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">ah, that is for import map -- its separate from modules</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Nov 17 2022 09:35:29 GMT-0800 (Pacific Standard Time)">17:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">it is for these things: <a href="https://github.com/WICG/import-maps">https://github.com/WICG/import-maps</a></td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Nov 17 2022 09:36:09 GMT-0800 (Pacific Standard Time)">17:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">these are effectively JSON files -- i think <span class="nick-13">@allstarschh</span> would have more detail but they are efficiently represented by a ScriptLoadRequest, as they are quite basic</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Nov 17 2022 09:37:15 GMT-0800 (Pacific Standard Time)">17:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">Ok :)</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Nov 17 2022 12:32:58 GMT-0800 (Pacific Standard Time)">20:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@allstarschh:mozilla.org">@allstarschh</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> these are effectively JSON files -- i think <span class="nick-13">@allstarschh</span> would have more detail but they are efficiently represented by a ScriptLoadRequest, as they are quite basic</blockquote></mx-reply>Right now import maps can be only inline script tags, they can't be external scripts, for simplicity import map scripts are treated as classic inline scripts for now. But that might change in the future, for example we might have another class called "ImportMapLoadRequest", which extends ScriptLoadRequest.</td></tr>

</tbody></table></div></div></div>
</body></html>