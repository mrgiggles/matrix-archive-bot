<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2024-07-31</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2024-07-31<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2024-07-30" class="nav-link"><span>prev</span></a>
<a href="2024-08-01" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Jul 31 2024 05:11:35 GMT-0700 (Pacific Daylight Time)">12:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">Bryan Thrall [:bthrall]</span>: review ping for <a href="https://phabricator.services.mozilla.com/D217199">https://phabricator.services.mozilla.com/D217199</a></td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Jul 31 2024 06:58:00 GMT-0700 (Pacific Daylight Time)">13:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jschwender:mozilla.org">jschwender</span>&gt;</div></td><td class="msg-cell">Hi, I've recently been working on porting servo to OpenHarmony devices. I have a small patch for spidermonkey, which basically redirects parts of the output to OpenHarmonys logging service (similar to what SM already does on android, redirecting to logcat). This is needed primarily to ensure that assertion failures and the like are visible in the log, and don't disappear in the nirvana of <code>stderr</code>. I'm wondering if upstream SM would accept a patch like that, or if you don't want to carry code for Operating systems that Firefox doesn't support. For reference, I opened <a href="https://github.com/servo/mozjs/pull/488/files">a draft PR</a> on <code>servo</code>s SM mirror, so you could preview the changes.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Jul 31 2024 07:10:09 GMT-0700 (Pacific Daylight Time)">14:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">jschwender</span>: I'm not sure if "OS" fits the case tho, we have a document for custom architecture <a href="https://spidermonkey.dev/custom-architectures">https://spidermonkey.dev/custom-architectures</a></td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Jul 31 2024 07:15:08 GMT-0700 (Pacific Daylight Time)">14:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">Also, many files touched in the PR is not under SpiderMonkey component,  so you'll need to talk to the group for each (MFBT, NSPR, build, etc)</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Jul 31 2024 07:18:35 GMT-0700 (Pacific Daylight Time)">14:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">actually, all files are not directly under SpiderMonkey component</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Jul 31 2024 07:21:49 GMT-0700 (Pacific Daylight Time)">14:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">You can find the component for each file by opening the file in searchfox (example: <a href="https://searchfox.org/mozilla-central/source/nsprpub/pr/src/io/prlog.c">https://searchfox.org/mozilla-central/source/nsprpub/pr/src/io/prlog.c</a> ) and look into the "Source code" section of the navigation panel.  that shows the corresponding component (NSPR in that case)</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Jul 31 2024 07:23:45 GMT-0700 (Pacific Daylight Time)">14:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jschwender:mozilla.org">jschwender</span>&gt;</div></td><td class="msg-cell">Ahh, I just assumed that mozjs == upstream spidermonkey. I guess I can still fill out the relevant questions of the "custom architectures" form, and post that on discourse. Would it be better to ask in the "Firefox development" discourse thread, or is that also not fitting? </td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Jul 31 2024 07:29:55 GMT-0700 (Pacific Daylight Time)">14:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">I'm not sure if Firefox development discourse is the right place for this kind of topic</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Jul 31 2024 07:30:12 GMT-0700 (Pacific Daylight Time)">14:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">let's wait for other people</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Jul 31 2024 08:10:12 GMT-0700 (Pacific Daylight Time)">15:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jschwender:mozilla.org">jschwender</span>&gt;</div></td><td class="msg-cell">I filled out the form adding some more context and uploaded it as a gist on github, since it's not quite clear yet, where the best place to ask this question would be: <a href="https://gist.github.com/jschwe/d838fa20894b5b097852815eb4219d20">https://gist.github.com/jschwe/d838fa20894b5b097852815eb4219d20</a></td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Jul 31 2024 10:06:14 GMT-0700 (Pacific Daylight Time)">17:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell"><p>When using a RootedString, can you change the underlying string using assignment operator or do you have to use the <code>set</code> method?</p>
<p>E.G. Can I do <code>my_rooted_string = JS_NewStringCopyN(cx, ...)</code></p>
</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Jul 31 2024 10:28:20 GMT-0700 (Pacific Daylight Time)">17:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">it's like a pointer, and yes, you can store different string with assignment</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Jul 31 2024 11:23:14 GMT-0700 (Pacific Daylight Time)">18:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">and the assignment (<code>operator=</code>) is equivalent to <code>set</code>.  it's defined by <code>DECLARE_POINTER_ASSIGN_OPS</code> in <a href="https://searchfox.org/mozilla-central/source/js/public/RootingAPI.h#1231">https://searchfox.org/mozilla-central/source/js/public/RootingAPI.h#1231</a> , and you can see the expansion there, which calls <code>set</code></td></tr>

</tbody></table></div></div></div>
</body></html>