<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-05-10</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-05-10<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-05-09" class="nav-link"><span>prev</span></a>
<a href="2023-05-11" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed May 10 2023 04:48:50 GMT-0700 (Pacific Daylight Time)">11:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: warning - from the looks of bug 1832284, it appears I broke the check for detecting whether any hazards were reported. I should probably be basing it off of the json now, but at the moment it looks like it's attempting to figure it out from a nonexistent file.</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed May 10 2023 04:48:52 GMT-0700 (Pacific Daylight Time)">11:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1832284">https://bugzil.la/1832284</a> — NEW (jonco) — Permanent failure line for successful hazard tasks: hazards | unrooted 'na' of type 'js::NativeObject*' live across GC call at js/src/vm/JSObject.cpp:1380 - DO NUT USE FOR CLASSIFICATION</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed May 10 2023 04:49:57 GMT-0700 (Pacific Daylight Time)">11:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">ah, I renamed rootingHazards.txt → hazards.txt. Oopsie.</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed May 10 2023 04:50:36 GMT-0700 (Pacific Daylight Time)">11:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">hah, I was wondering how I managed to sneak a hazard past CI</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed May 10 2023 04:51:33 GMT-0700 (Pacific Daylight Time)">11:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">ugh, in the JSON it would require finding two lines, so it's not just a simple grep. I'll just switch over to the new name for now.</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed May 10 2023 04:53:50 GMT-0700 (Pacific Daylight Time)">11:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">heh, and I <em>did</em> change the name for the part that produces the TinderboxPrint: message, which at one point was enough to make the job fail.</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed May 10 2023 04:56:18 GMT-0700 (Pacific Daylight Time)">11:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I uploaded my fix to the bug, but I'm headed out for lunch now. I guess it'll have to land together with your fix, so feel free to push it whenever convenient.</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed May 10 2023 04:57:11 GMT-0700 (Pacific Daylight Time)">11:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">it's kinda nice being in almost the same time zone</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed May 10 2023 06:59:56 GMT-0700 (Pacific Daylight Time)">13:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: I guess I should have held off landing your patch</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed May 10 2023 07:00:18 GMT-0700 (Pacific Daylight Time)">14:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh, whoops. I'll make a followup patch instead.</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed May 10 2023 07:04:01 GMT-0700 (Pacific Daylight Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">(the remaining references are harmless, though I have a try push going to make sure)</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed May 10 2023 08:51:22 GMT-0700 (Pacific Daylight Time)">15:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">sfink: ping</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed May 10 2023 08:54:50 GMT-0700 (Pacific Daylight Time)">15:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">Back in 20min</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed May 10 2023 08:55:56 GMT-0700 (Pacific Daylight Time)">15:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: it's meeting time now, but maybe we can skip this week (or do it daytime tomorrow)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed May 10 2023 09:17:14 GMT-0700 (Pacific Daylight Time)">16:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">oh! Shoot, I keep missing things because I forget they're going to be at a totally different time of day.</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed May 10 2023 09:19:46 GMT-0700 (Pacific Daylight Time)">16:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I guess I don't have a lot to talk about. I've mostly just been working on a small change to structured clone, and a resulting larger piece of testing infrastructure, and a fuzzy set of followup fixes now that I'm reading the latest spec and looking at the state of the code.</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed May 10 2023 09:23:31 GMT-0700 (Pacific Daylight Time)">16:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">great</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed May 10 2023 09:23:44 GMT-0700 (Pacific Daylight Time)">16:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">I'm still working on WeakMap.get optimisations and have landed most of the patches I talked about last week.
I'm planning on continuing with that and then looking at nursery allocation optimisation in the interpreter.</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed May 10 2023 09:31:17 GMT-0700 (Pacific Daylight Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@barret:mozilla.org">barret</span>&gt;</div></td><td class="msg-cell"><p>Hi y'all. I've got a stack that doesnt make any sense:</p>
<pre><code>[task 2023-05-09T16:01:17.057Z] 16:01:17     INFO - PID 8712 | WARNING: Error: Phase "profile-before-change" is finished, it is too late to register completion condition "OS.File: flush I/O queued before profileBeforeChange"
[task 2023-05-09T16:01:17.057Z] 16:01:17     INFO - PID 8712 | WARNING: addBlocker@resource://gre/modules/AsyncShutdown.sys.mjs:727:15
[task 2023-05-09T16:01:17.058Z] 16:01:17     INFO - PID 8712 | addBlocker@resource://gre/modules/AsyncShutdown.sys.mjs:523:26
[task 2023-05-09T16:01:17.058Z] 16:01:17     INFO - PID 8712 | addBlocker@resource://gre/modules/AsyncShutdown.sys.mjs:458:15
[task 2023-05-09T16:01:17.059Z] 16:01:17     INFO - PID 8712 | setupShutdown@resource://gre/modules/osfile/osfile_async_front.jsm:1548:28
[task 2023-05-09T16:01:17.059Z] 16:01:17     INFO - PID 8712 | @resource://gre/modules/osfile/osfile_async_front.jsm:1568:16
[task 2023-05-09T16:01:17.060Z] 16:01:17     INFO - PID 8712 | @resource://gre/modules/osfile.jsm:12:30
[task 2023-05-09T16:01:17.062Z] 16:01:17     INFO - PID 8712 | @resource://gre/modules/TelemetryStorage.sys.mjs:10:28
[task 2023-05-09T16:01:17.062Z] 16:01:17     INFO - PID 8712 | _checkPendingPings@resource://gre/modules/TelemetrySend.sys.mjs:863:17
</code></pre>
<p>TelemetrySend.sys.mjs:863 is <code>return</code><br>TelemetryStorage.sys.mjs:10 is imports <code>Preferences.sys.mjs</code><br>There should be no outstanding imports of osfile.jsm anywhere in non-test files at this point</p>
</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed May 10 2023 09:31:41 GMT-0700 (Pacific Daylight Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@barret:mozilla.org">barret</span>&gt;</div></td><td class="msg-cell">From this log <a href="https://treeherder.mozilla.org/logviewer?job_id=415084712&amp;repo=mozilla-central&amp;lineNumber=26025">https://treeherder.mozilla.org/logviewer?job_id=415084712&amp;repo=mozilla-central&amp;lineNumber=26025</a></td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed May 10 2023 09:53:27 GMT-0700 (Pacific Daylight Time)">16:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@barret:mozilla.org">barret</span>&gt;</div></td><td class="msg-cell">TelemetryStorage.sys.mjs:10 <em>used</em> to import osfile.jsm <a href="https://hg.mozilla.org/mozilla-central/file/e221ddc823c0e35cf78f0a15f9ecec8bae088da2/toolkit/components/telemetry/app/TelemetryStorage.sys.mjs#l10">https://hg.mozilla.org/mozilla-central/file/e221ddc823c0e35cf78f0a15f9ecec8bae088da2/toolkit/components/telemetry/app/TelemetryStorage.sys.mjs#l10</a></td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Wed May 10 2023 10:54:12 GMT-0700 (Pacific Daylight Time)">17:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nika:mozilla.org">nika</span>&gt;</div></td><td class="msg-cell">cc <span class="nick-4">jonco</span> - as this might be related to module loader stuff in some way?</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Wed May 10 2023 10:54:37 GMT-0700 (Pacific Daylight Time)">17:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nika:mozilla.org">nika</span>&gt;</div></td><td class="msg-cell">Also <span class="nick-1">kmag</span> in case this is related to startup cache somehow (though how would the worker have a busted startup cache?)</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Wed May 10 2023 10:58:24 GMT-0700 (Pacific Daylight Time)">17:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@kmag:mozilla.org">kmag</span>&gt;</div></td><td class="msg-cell">Yeah, I don't think WPT should ever use a profile from previous pushes...</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Wed May 10 2023 10:59:36 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@kmag:mozilla.org">kmag</span>&gt;</div></td><td class="msg-cell">Could always try a push where you force disable the startup cache and script preloader, or purge them at startup and see if it goes away</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Wed May 10 2023 14:07:46 GMT-0700 (Pacific Daylight Time)">21:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><code>TelemetrySend.sys.mjs:863:17</code> matches to <code>await lazy.TelemetryStorage</code> in <a href="https://hg.mozilla.org/mozilla-central/annotate/30ed0e6529a5d4d49f0b63014947f655e257135f/toolkit/components/telemetry/app/TelemetrySend.sys.mjs#l863">https://hg.mozilla.org/mozilla-central/annotate/30ed0e6529a5d4d49f0b63014947f655e257135f/toolkit/components/telemetry/app/TelemetrySend.sys.mjs#l863</a> (from 30 Mar 2023).  so, it's likely that there's some cache issue</td></tr>

</tbody></table></div></div></div>
</body></html>