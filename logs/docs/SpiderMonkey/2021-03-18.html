<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2021-03-18</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2021-03-18<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-03-17" class="nav-link"><span>prev</span></a>
<a href="2021-03-19" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Mar 17 2021 19:11:43 GMT-0700 (Pacific Daylight Time)">02:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">how would one register a native module?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Mar 17 2021 19:13:24 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">I have a <code>*mut JSObject</code> with all the required methods</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Mar 17 2021 19:13:38 GMT-0700 (Pacific Daylight Time)">02:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">just putting that into the module map doesn't seem to work</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Mar 17 2021 19:34:08 GMT-0700 (Pacific Daylight Time)">02:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Instead of using code coverage information to decide which blocks are unreachable, we are using our inline caches. If an IC has never been reached, then we <a href="https://searchfox.org/mozilla-central/rev/1a47a74bd5ba89f2474aa27c40bd478e853f3276/js/src/jit/WarpBuilder.cpp#3306-3312">generate an unconditional bailout in WarpBuilder</a>, which will resume in the baseline interpreter. Code after an MBail is unreachable by the warp script, so I'm rewriting branch pruning to prune code after bailouts instead of using code coverage.</blockquote></mx-reply>cool I will concern about this, thank u</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Mar 17 2021 19:39:32 GMT-0700 (Pacific Daylight Time)">02:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">18f</span>: By the way, the patches are now up on bug 1697696</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Mar 17 2021 19:39:33 GMT-0700 (Pacific Daylight Time)">02:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1697696">https://bugzil.la/1697696</a> ‚Äî NEW (iain) ‚Äî Warp: Fix branch pruning</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Mar 17 2021 19:41:44 GMT-0700 (Pacific Daylight Time)">02:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-4">18f</span>: By the way, the patches are now up on bug 1697696</blockquote></mx-reply>cool</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Wed Mar 17 2021 19:41:47 GMT-0700 (Pacific Daylight Time)">02:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">I will see this</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Wed Mar 17 2021 19:42:40 GMT-0700 (Pacific Daylight Time)">02:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">sorry for my Enlish, Just can say cool üòé </td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Wed Mar 17 2021 19:42:46 GMT-0700 (Pacific Daylight Time)">02:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">English</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Wed Mar 17 2021 20:46:19 GMT-0700 (Pacific Daylight Time)">03:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-4">18f</span>: By the way, the patches are now up on bug 1697696</blockquote></mx-reply>Hey, would u tell mind tell what rp = rp-&gt;caller means? I read the code.</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Wed Mar 17 2021 20:46:46 GMT-0700 (Pacific Daylight Time)">03:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell"><ol>
<li>first step , we deal with operand and effectful instruction resume point.</li>
</ol>
</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Wed Mar 17 2021 20:47:12 GMT-0700 (Pacific Daylight Time)">03:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell"><ol start="2">
<li>So we need  a loop to deal with entry resume point. I understand this in this why</li>
</ol>
</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Wed Mar 17 2021 20:47:15 GMT-0700 (Pacific Daylight Time)">03:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">way</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Wed Mar 17 2021 20:47:31 GMT-0700 (Pacific Daylight Time)">03:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">why we will need rp-&gt;caller....</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Wed Mar 17 2021 20:47:39 GMT-0700 (Pacific Daylight Time)">03:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">rp = rp-&gt;caller()</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Wed Mar 17 2021 20:59:35 GMT-0700 (Pacific Daylight Time)">03:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">18f</span>: When we inline a function, if we bail out, we have to recreate a separate baseline frame for the caller (and for the caller's caller, if we inline two levels deep, and so on)</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Wed Mar 17 2021 21:01:03 GMT-0700 (Pacific Daylight Time)">04:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">If you compile with <code>IONFLAGS=logs</code> and use <a href="https://github.com/sstangl/iongraph">iongraph</a> to visualize the CFG, the caller's resume point is separated from the current one with a <code>|</code></td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Wed Mar 17 2021 21:03:28 GMT-0700 (Pacific Daylight Time)">04:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">ok</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Wed Mar 17 2021 21:03:38 GMT-0700 (Pacific Daylight Time)">04:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">I know what u means, thank u too much.</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Wed Mar 17 2021 23:22:39 GMT-0700 (Pacific Daylight Time)">06:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>just putting that into the module map doesn't seem to work</p>
</blockquote>
<p><code>Uncaught Error at &lt;anonymous&gt;:0:0: Module resolve hook did not return Module object</code></p>
</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Mar 18 2021 00:32:15 GMT-0700 (Pacific Daylight Time)">07:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">it would appear that error comes from <a href="https://searchfox.org/mozilla-central/source/js/src/builtin/ModuleObject.cpp#1968">https://searchfox.org/mozilla-central/source/js/src/builtin/ModuleObject.cpp#1968</a><br>basically, just tells me i have no idea how to make a <code>ModuleObject</code></td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Mar 18 2021 01:22:21 GMT-0700 (Pacific Daylight Time)">08:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell"><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules</a></td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Thu Mar 18 2021 01:24:30 GMT-0700 (Pacific Daylight Time)">08:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it would appear that error comes from <a href="https://searchfox.org/mozilla-central/source/js/src/builtin/ModuleObject.cpp#1968">https://searchfox.org/mozilla-central/source/js/src/builtin/ModuleObject.cpp#1968</a><br>basically, just tells me i have no idea how to make a <code>ModuleObject</code></blockquote></mx-reply>useful? or not? ....</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Thu Mar 18 2021 01:25:11 GMT-0700 (Pacific Daylight Time)">08:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">I don't think it'll be that useful, because I need the native forms, aka the JSAPI Reference</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu Mar 18 2021 01:25:45 GMT-0700 (Pacific Daylight Time)">08:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">ok üëç  good luck to u</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Thu Mar 18 2021 02:00:39 GMT-0700 (Pacific Daylight Time)">09:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">Hey, I am so confused about this part. sometimes we will use |ReversePostorderIterator|, sometimes we will use |PostorderIterator|.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu Mar 18 2021 02:01:24 GMT-0700 (Pacific Daylight Time)">09:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">I know why use |ReversePostorderIterator|, becuase we need use information about |predessor's| information.</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Thu Mar 18 2021 02:01:53 GMT-0700 (Pacific Daylight Time)">09:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">But I don't know why we will use |poset order| at @2?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Thu Mar 18 2021 02:03:48 GMT-0700 (Pacific Daylight Time)">09:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell">sometimes PostOrder vs ReversePostOrder doesn't matter and we just have to pick one. This might be one of those cases</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Thu Mar 18 2021 02:04:44 GMT-0700 (Pacific Daylight Time)">09:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">I guess it is because we need mark it's operand be |useRemoved|, that's means we more propagation information from succ to pred. so use post order will be a good idea.</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Thu Mar 18 2021 02:05:11 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">becuase post order means we first deal with succ, then to pred...</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Thu Mar 18 2021 02:05:17 GMT-0700 (Pacific Daylight Time)">09:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell">ü§î</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Thu Mar 18 2021 02:41:15 GMT-0700 (Pacific Daylight Time)">09:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><code>ReversePostOrder</code> goes forward in the CFG, so when marking predecessors before successors. In this case this is used to compute the cost of blocks and flag them as bailing, and thus successors as unreachable.<br><code>PostOrder</code> goes backward in the CFG, so visiting successors before predecessors. In this case this used to matter when the removal was part of the loop, as we want to mark predecessors before removing the back-edges. This then got split in 2 loops for sanity.</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Thu Mar 18 2021 05:55:12 GMT-0700 (Pacific Daylight Time)">12:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><p>so.. how exactly would I implement native modules given a <code>*mut JSObject</code> which has all the properties required?</p>
<p>eg. <code>import ( readBinary ) from "fs";</code></p>
<p>I need to get a <code>CompileModule</code>-compatible <code>*mut JSObject</code> from the one I already have</p>
</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Thu Mar 18 2021 06:03:21 GMT-0700 (Pacific Daylight Time)">13:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Redfire</span>: I suggest you start by reading <a href="https://searchfox.org/mozilla-central/source/js/src/shell/ModuleLoader.cpp">https://searchfox.org/mozilla-central/source/js/src/shell/ModuleLoader.cpp</a></td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Thu Mar 18 2021 06:04:23 GMT-0700 (Pacific Daylight Time)">13:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">is that a more complex version of <a href="https://github.com/mozilla-spidermonkey/spidermonkey-embedding-examples/blob/esr78/examples/modules.cpp">https://github.com/mozilla-spidermonkey/spidermonkey-embedding-examples/blob/esr78/examples/modules.cpp</a>?</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Thu Mar 18 2021 06:04:58 GMT-0700 (Pacific Daylight Time)">13:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">oh apparently. I didn't know we had this example</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Thu Mar 18 2021 06:05:14 GMT-0700 (Pacific Daylight Time)">13:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">I already have a module loader</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Thu Mar 18 2021 06:05:41 GMT-0700 (Pacific Daylight Time)">13:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">just that <code>CompileModule</code> returns what seems like, a specialised Object in the form of a <code>ModuleObject</code></td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Thu Mar 18 2021 06:06:21 GMT-0700 (Pacific Daylight Time)">13:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">I think you just return that from the ModuleResolveHook</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Thu Mar 18 2021 06:07:29 GMT-0700 (Pacific Daylight Time)">13:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">this is gonna be slightly hacky, but i guess i'll make a native module map along with the regular module map</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Thu Mar 18 2021 06:21:16 GMT-0700 (Pacific Daylight Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">wait, what, no, that wouldn't work</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Thu Mar 18 2021 06:21:33 GMT-0700 (Pacific Daylight Time)">13:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">the output of the <code>ModuleResolveHook</code> is itself the <code>ModuleObject</code></td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Thu Mar 18 2021 06:28:32 GMT-0700 (Pacific Daylight Time)">13:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">We don't have generic support for non-scripted modules right now (as far as I know..). The <code>ModuleObject</code> is always associated with a JSScript/BaseScript and different asserts trip. I think people have tried hacks by having a wrapper .mjs file that has the export list and in the body calls some helper method that populates those bindings. I don't recall if that plan worked though..</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Thu Mar 18 2021 06:29:12 GMT-0700 (Pacific Daylight Time)">13:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell">Does anyone know if we fix that for JSON modules? or do they also have a JSScript?</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Thu Mar 18 2021 06:31:37 GMT-0700 (Pacific Daylight Time)">13:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@18f:mozilla.org">18f</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>ReversePostOrder</code> goes forward in the CFG, so when marking predecessors before successors. In this case this is used to compute the cost of blocks and flag them as bailing, and thus successors as unreachable.<br><code>PostOrder</code> goes backward in the CFG, so visiting successors before predecessors. In this case this used to matter when the removal was part of the loop, as we want to mark predecessors before removing the back-edges. This then got split in 2 loops for sanity.</blockquote></mx-reply>cool I fully understant this. Appreciate it!</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Thu Mar 18 2021 06:45:33 GMT-0700 (Pacific Daylight Time)">13:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><blockquote>
<p>We don't have generic support for non-scripted modules right now (as far as I know..). The <code>ModuleObject</code> is always associated with a JSScript/BaseScript and different asserts trip. I think people have tried hacks by having a wrapper .mjs file that has the export list and in the body calls some helper method that populates those bindings. I don't recall if that plan worked though..</p>
</blockquote>
<p>‚òπÔ∏è rip my native module plans</p>
</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Thu Mar 18 2021 06:56:37 GMT-0700 (Pacific Daylight Time)">13:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@denispal:mozilla.org">denispal</span>&gt;</div></td><td class="msg-cell">Can I distinguish a frame from baseline JIT and baseline interpreter?  <a href="https://searchfox.org/mozilla-central/source/js/src/jit/JSJitFrameIter.h#161">https://searchfox.org/mozilla-central/source/js/src/jit/JSJitFrameIter.h#161</a> seems to return true for both cases</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Thu Mar 18 2021 07:04:29 GMT-0700 (Pacific Daylight Time)">14:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">denispal</span>: <a href="https://searchfox.org/mozilla-central/source/js/src/jit/BaselineFrame.h#264">https://searchfox.org/mozilla-central/source/js/src/jit/BaselineFrame.h#264</a></td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Thu Mar 18 2021 07:08:36 GMT-0700 (Pacific Daylight Time)">14:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@denispal:mozilla.org">denispal</span>&gt;</div></td><td class="msg-cell"><span class="nick-15">tcampbell</span>: thanks</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Thu Mar 18 2021 08:59:15 GMT-0700 (Pacific Daylight Time)">15:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@denispal:mozilla.org">denispal</span>&gt;</div></td><td class="msg-cell">Does Ion always bailout back to the baseline interpreter? Wondering if I should change <a href="https://searchfox.org/mozilla-central/source/js/src/jit/BaselineBailouts.cpp#1555">https://searchfox.org/mozilla-central/source/js/src/jit/BaselineBailouts.cpp#1555</a> to BaselineInterpreter permanently, or if I need to add a check here?</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Thu Mar 18 2021 09:00:08 GMT-0700 (Pacific Daylight Time)">16:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">denispal</span>: correct, it can only bail out to Baseline Interp</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Thu Mar 18 2021 09:00:31 GMT-0700 (Pacific Daylight Time)">16:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@denispal:mozilla.org">denispal</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">jandem</span>: great, thanks</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Thu Mar 18 2021 11:56:34 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: If you're around could you give bug 1699364 a review?</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Thu Mar 18 2021 11:56:36 GMT-0700 (Pacific Daylight Time)">18:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1699364">https://bugzil.la/1699364</a></td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Thu Mar 18 2021 12:04:21 GMT-0700 (Pacific Daylight Time)">19:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: done. Sorry, I should have caught that one.</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Thu Mar 18 2021 12:29:37 GMT-0700 (Pacific Daylight Time)">19:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-12">sfink</span>: no worries! cheers.</td></tr>

</tbody></table></div></div></div>
</body></html>