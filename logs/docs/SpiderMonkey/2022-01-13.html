<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-01-13</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-01-13<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-01-12" class="nav-link"><span>prev</span></a>
<a href="2022-01-14" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Wed Jan 12 2022 21:33:01 GMT-0800 (Pacific Standard Time)">05:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@calebjasik:boba.best">calebjasik</span>&gt;</div></td><td class="msg-cell">mochitest is a good name :) ðŸ§‹</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Wed Jan 12 2022 21:33:30 GMT-0800 (Pacific Standard Time)">05:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@calebjasik:boba.best">calebjasik</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote>Seen! Your update will eventually appear on <a href="https://robotzilla.github.io/histoire">https://robotzilla.github.io/histoire</a></blockquote></mx-reply>what does this mean?</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Wed Jan 12 2022 21:34:08 GMT-0800 (Pacific Standard Time)">05:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@calebjasik:boba.best">calebjasik</span>&gt;</div></td><td class="msg-cell">I've been lurking in here to pay attention to stuff... but I don't really understand how to track issues in bugzilla ðŸ˜…</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Wed Jan 12 2022 21:54:42 GMT-0800 (Pacific Standard Time)">05:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">calebjasik</span>: It's not a bugzilla thing. The bot is watching for people who start a message with "confession:", and then capturing that message and saving it for posterity.</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Wed Jan 12 2022 22:11:15 GMT-0800 (Pacific Standard Time)">06:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">the usual way of tracking issues in bugzilla is to make yourself an account and CC yourself on bugs you're interested in. (Or subscribe to whole components, but even just the JS engine has a lot of bugs and bug updates.)</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Wed Jan 12 2022 22:14:51 GMT-0800 (Pacific Standard Time)">06:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ptomato:gnome.org">ptomato</span>&gt;</div></td><td class="msg-cell">who'd be interested to review <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1735200">https://bugzilla.mozilla.org/show_bug.cgi?id=1735200</a>?</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Wed Jan 12 2022 23:17:02 GMT-0800 (Pacific Standard Time)">07:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@jandem:mozilla.org">jandem</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">ptomato</span>: happy to take a look</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Thu Jan 13 2022 04:05:09 GMT-0800 (Pacific Standard Time)">12:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">Debugging question: I know I can get the addresses mapped to locations in the source for crash dumps. for example <a href="http://libxul.so">libxul.so</a> + 0x6b4ae5a -&gt; to some address. I could just never figure out how to get it to work and can't find it in the firefox source docs. where should I look for setting this up?</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Thu Jan 13 2022 04:07:46 GMT-0800 (Pacific Standard Time)">12:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-10">yulia</span>: do you want to get a function name from address?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Thu Jan 13 2022 04:07:54 GMT-0800 (Pacific Standard Time)">12:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">yes</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Thu Jan 13 2022 04:08:53 GMT-0800 (Pacific Standard Time)">12:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">maybe not optimal, but what I usually do is to download a debug symbol, and extract the file and find the address there</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Thu Jan 13 2022 04:09:01 GMT-0800 (Pacific Standard Time)">12:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">let me find example</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Thu Jan 13 2022 04:11:34 GMT-0800 (Pacific Standard Time)">12:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><a href="https://treeherder.mozilla.org/jobs?repo=mozilla-central&amp;revision=08d254139525017ceb5f98be59d3a5864adbf331&amp;selectedTaskRun=FxPdaFraRo66IW8q67ef6g.0">https://treeherder.mozilla.org/jobs?repo=mozilla-central&amp;revision=08d254139525017ceb5f98be59d3a5864adbf331&amp;selectedTaskRun=FxPdaFraRo66IW8q67ef6g.0</a></td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Thu Jan 13 2022 04:11:54 GMT-0800 (Pacific Standard Time)">12:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">"Artifacts and Debugging Tools" pane for the build job has <code><a href="http://target.crashreporter-symbols.zip">target.crashreporter-symbols.zip</a></code> file</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Thu Jan 13 2022 04:12:12 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">and the file contains <code><a href="http://libxul.so">libxul.so</a></code> directory</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Thu Jan 13 2022 04:12:36 GMT-0800 (Pacific Standard Time)">12:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">there's <code><a href="http://libxul.so">libxul.so</a>.sym</code> file that contains the map from address to function and line</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Thu Jan 13 2022 04:13:20 GMT-0800 (Pacific Standard Time)">12:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(I guess this can be automated by <a href="https://firefox-source-docs.mozilla.org/toolkit/crashreporter/crashreporter/Using_the_Mozilla_symbol_server.html">some way</a>, but haven't tried on macOS/linux</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Thu Jan 13 2022 04:16:26 GMT-0800 (Pacific Standard Time)">12:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">ok, thanks -- I will try that</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Thu Jan 13 2022 04:16:54 GMT-0800 (Pacific Standard Time)">12:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-10" title="@yulia:mozilla.org">yulia</span>&gt;</div></td><td class="msg-cell">being able to do it manually helps a lot in any case</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Thu Jan 13 2022 07:06:24 GMT-0800 (Pacific Standard Time)">15:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell"><span class="nick-2">nbp</span> <span class="nick-4">iain</span> would either of you be interested in reviewing a wasm MIR building bug? I can provide background and assistance if need be</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Thu Jan 13 2022 07:07:50 GMT-0800 (Pacific Standard Time)">15:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">Ryan Hunt</span>: I can, <span class="nick-4">caroline | sick</span> probably has a more up to date idea of the state of our MIR than I do.</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Thu Jan 13 2022 07:12:07 GMT-0800 (Pacific Standard Time)">15:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@rhunt:mozilla.org">Ryan Hunt</span>&gt;</div></td><td class="msg-cell">Okay, thanks! I will assign the patch to you and write some extra information on it. Feel free to ask questions</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Thu Jan 13 2022 07:45:13 GMT-0800 (Pacific Standard Time)">15:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@chaircrusher:mozilla.org">chaircrusher</span>&gt;</div></td><td class="msg-cell">OK SpiderMonkeys, some of you may recall yesterday I was chasing crashes in ESR78 embedding where JS_DestroyContext was crashing.

It turns out it's a very bad no good idea to try to call JS_DestroyContext after the main program exits.

I have to assume it's because SpiderMonkey has static global data that gets initialized before main executes, and after main returns or exit is called, you can't depend on the order of execution of static global object destructors.

Sound about right?

</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Thu Jan 13 2022 08:38:12 GMT-0800 (Pacific Standard Time)">16:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">chaircrusher</span>: I would very strongly assume the answer is yes</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Thu Jan 13 2022 10:40:26 GMT-0800 (Pacific Standard Time)">18:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell">Every time I read the function named <code>toPhi</code>, this makes me think that this sounds like a good dog name.</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Thu Jan 13 2022 12:07:21 GMT-0800 (Pacific Standard Time)">20:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@evilpie:mozilla.org">evilpie</span>&gt;</div></td><td class="msg-cell">Would it be a lot of work to support <code>JS::Heap&lt;mozilla::Maybe&lt;JS::Value&gt;&gt;&gt;</code> ?</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Thu Jan 13 2022 13:20:56 GMT-0800 (Pacific Standard Time)">21:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell">I <em>think</em> it would be fairly straightforward, but I'm not sure. If you did .reset() on the Maybe, you'd need to fire the write barrier.</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Thu Jan 13 2022 13:57:26 GMT-0800 (Pacific Standard Time)">21:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">(Following up from yesterday... I have no idea what was going on, but maybe my browser build was just broken? A test case that didn't work yesterday works today on functionally the same code, but with a fresh build and I'm super baffled but happy) </td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Thu Jan 13 2022 14:02:15 GMT-0800 (Pacific Standard Time)">22:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">any chance that the helper file wasn't staged?</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Thu Jan 13 2022 14:03:05 GMT-0800 (Pacific Standard Time)">22:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">(I don't remember whether build command or test command stages tho...</td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Thu Jan 13 2022 14:08:09 GMT-0800 (Pacific Standard Time)">22:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Hrm. I thought I rebuilt which would stage it. </td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Thu Jan 13 2022 14:08:20 GMT-0800 (Pacific Standard Time)">22:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">but as I say: deeply baffled. Happy it works now </td></tr>

</tbody></table></div></div></div>
</body></html>