<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2023-06-10</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2023-06-10<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2023-06-09" class="nav-link"><span>prev</span></a>
<a href="2023-06-11" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Sat Jun 10 2023 05:40:36 GMT-0700 (Pacific Daylight Time)">12:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ptomato:gnome.org">ptomato</span>&gt;</div></td><td class="msg-cell">did git-cinnabar break <code>git add -p</code> at some point?</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Sat Jun 10 2023 05:41:32 GMT-0700 (Pacific Daylight Time)">12:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@ptomato:gnome.org">ptomato</span>&gt;</div></td><td class="msg-cell">I've been trying to commit only some of the changes in my tree, I can stage them selectively with <code>git add -p</code>, but <code>git commit</code> commits all of them, even the unstaged ones</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Sat Jun 10 2023 08:06:37 GMT-0700 (Pacific Daylight Time)">15:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>hm... anyone here knowledgeable about Windows build?<br>I'm trying to update SM to 102ESR, but it fails to build =(</p>
<p>Error:</p>
<pre><code>In file included from x:/moz/firefox-102.12.0/nsprpub/lib/ds/plarena.c:13:
In file included from x:/moz/firefox-102.12.0/nsprpub/lib/ds/plarena.h:15:
In file included from x:/moz/firefox-102.12.0/nsprpub/pr/include\prtypes.h:26:
x:/moz/firefox-102.12.0/config/external/nspr\prcpucfg.h(29,4): error: "Unsupported platform!"
#  error "Unsupported platform!"
   ^
</code></pre>
<p>Seems like platform macro definition got broken somewhere</p>
<p>Configure cmd:</p>
<pre><code>    export JS_STANDALONE=1 &amp;&amp; \
    ../configure \
    --enable-nspr-build \
    --disable-jemalloc \
    --disable-js-shell \
    --disable-tests \
    --target=i686-pc-mingw32 \
    --host=i686-pc-mingw32 \
    --enable-debug
</code></pre>
<p>PS: I didn't have a single SM update that would build successfully without additional tinkering... &gt;_&lt;</p>
</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Sat Jun 10 2023 08:18:31 GMT-0700 (Pacific Daylight Time)">15:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>Seems that something broken in <code>configure</code>: despite it finishing successfully, there are what looks like error lines during nspr configuration:</p>
<pre><code>checking host system type... config.sub: missing argument
Try `config.sub --help' for more information.

checking target system type... config.sub: missing argument
Try `config.sub --help' for more information.

checking build system type... config.sub: missing argument
Try `config.sub --help' for more information.

</code></pre>
</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Sat Jun 10 2023 08:21:06 GMT-0700 (Pacific Daylight Time)">15:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@pchimento:igalia.com">ptomato</span>&gt;</div></td><td class="msg-cell">I don't know if <code>--disable-nspr-build</code> works on Windows, but on Linux and Mac you can build without NSPR - looks like your error is inside NSPR, so it could be worth checking out</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Sat Jun 10 2023 08:23:06 GMT-0700 (Pacific Daylight Time)">15:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">well, it did require nspr in ESR91, but I will try nonetheless, thanks</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Sat Jun 10 2023 08:25:10 GMT-0700 (Pacific Daylight Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">btw, is there a way to make <code>configure</code> output more verbose?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Sat Jun 10 2023 08:26:16 GMT-0700 (Pacific Daylight Time)">15:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>Seems that something broken in <code>configure</code>: despite it finishing successfully, there are what looks like error lines during nspr configuration:</p>
<pre><code>checking host system type... config.sub: missing argument
Try `config.sub --help' for more information.

checking target system type... config.sub: missing argument
Try `config.sub --help' for more information.

checking build system type... config.sub: missing argument
Try `config.sub --help' for more information.

</code></pre>
</blockquote></mx-reply>interesting, but these line remain even with nspr disabled</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Sat Jun 10 2023 08:29:23 GMT-0700 (Pacific Daylight Time)">15:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>nope, doesn't work. Looks like the same problem with missing platform macro:</p>
<pre><code>x:/moz/firefox-102.12.0/js/src/_DEBUG/dist/include\mozilla/UniquePtrExtensions.h(102,4): error: "Unsupported OS?"
#  error "Unsupported OS?
</code></pre>
</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Sat Jun 10 2023 08:33:16 GMT-0700 (Pacific Daylight Time)">15:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">I think that might be not error report from configure itself, but rather error output that somehow got sent to corresponding configure argument</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Sat Jun 10 2023 08:33:57 GMT-0700 (Pacific Daylight Time)">15:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">e.g. <code>./configure --host=$VALUE</code>, where VALUE="config.sub: missing argument(...)"</td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Sat Jun 10 2023 08:40:34 GMT-0700 (Pacific Daylight Time)">15:40</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><code>config.status</code> looks ok</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Sat Jun 10 2023 08:41:37 GMT-0700 (Pacific Daylight Time)">15:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">i.e. all platform macros are defined there and there are no apparent errors</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Sat Jun 10 2023 09:00:35 GMT-0700 (Pacific Daylight Time)">16:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">I have no idea where these lines come from, neither of these nsprpub\configure, js\src\ctypes\libffi\configure, intl\icu\source\configure produce them (changed log lines manually to confirm that)</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Sat Jun 10 2023 09:05:21 GMT-0700 (Pacific Daylight Time)">16:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I think that might be not error report from configure itself, but rather error output that somehow got sent to corresponding configure argument</blockquote></mx-reply>yea, this seems very likely: <code>build/autoconf/config.sub</code> canonicalizes configuration name (and outputs it)</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Sat Jun 10 2023 09:16:54 GMT-0700 (Pacific Daylight Time)">16:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">ffs, I've found the problem: remains of mozillabuild 4.x where picked up by the build system, which caused everything to go SNAFU</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Sat Jun 10 2023 09:17:28 GMT-0700 (Pacific Daylight Time)">16:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">(and yes, ESR102 can't be built with mozilla build 4.x)</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Sat Jun 10 2023 09:30:03 GMT-0700 (Pacific Daylight Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Most of it is Node extensions frankly, largely it's standard modules like fs, http, dns, crypto. I consider those the difference between a full runtime like Node or Deno and just the engine like V8 or SM.</blockquote></mx-reply>I also found one project that was abandoned that tried to create a sort of Node API on top of SM</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Sat Jun 10 2023 09:30:06 GMT-0700 (Pacific Daylight Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">maybe it's a middle-ground</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Sat Jun 10 2023 09:30:13 GMT-0700 (Pacific Daylight Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but it seems like no-one will build such</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Sat Jun 10 2023 09:30:22 GMT-0700 (Pacific Daylight Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">Interesting, sometime between 102 and 107, 4.x starts working again</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Sat Jun 10 2023 09:30:27 GMT-0700 (Pacific Daylight Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">in another sense this is just typical FOSS projects</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Sat Jun 10 2023 09:30:39 GMT-0700 (Pacific Daylight Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">because obviously commercial projects have more momentum</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Sat Jun 10 2023 09:30:51 GMT-0700 (Pacific Daylight Time)">16:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">Interesting, sometime between 102 and 107, 4.2 starts working.</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Sat Jun 10 2023 09:31:20 GMT-0700 (Pacific Daylight Time)">16:31</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I also found one project that was abandoned that tried to create a sort of Node API on top of SM</blockquote></mx-reply><a href="https://github.com/mozilla/spidernode">https://github.com/mozilla/spidernode</a></td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Sat Jun 10 2023 09:37:20 GMT-0700 (Pacific Daylight Time)">16:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">I don't think that's necessarily worthwhile though</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Sat Jun 10 2023 09:37:36 GMT-0700 (Pacific Daylight Time)">16:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">there will be a separation between apps for SM and apps for Node though, right?</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Sat Jun 10 2023 09:37:58 GMT-0700 (Pacific Daylight Time)">16:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">except that shouldn't "standard JS" remain the same?</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Sat Jun 10 2023 09:38:31 GMT-0700 (Pacific Daylight Time)">16:38</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>darn, build still fails at the last step:</p>
<pre><code>lld-link: error: duplicate symbol: _DllMain@12
&gt;&gt;&gt; defined at x:\moz\firefox-102.12.0\js\src\jsapi.cpp:4239
&gt;&gt;&gt;            ..\Unified_cpp_js_src8.obj
&gt;&gt;&gt; defined at ..\..\..\mozglue\misc\WindowsDllMain.obj
</code></pre>
</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Sat Jun 10 2023 09:43:19 GMT-0700 (Pacific Daylight Time)">16:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">yup, seems to be an old bug, since on the master branch it has additional <code>!defined(JS_STANDALONE)</code>:<br><a href="https://searchfox.org/mozilla-central/source/js/src/jsapi.cpp#4371">https://searchfox.org/mozilla-central/source/js/src/jsapi.cpp#4371</a></td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Sat Jun 10 2023 09:49:52 GMT-0700 (Pacific Daylight Time)">16:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>and another one ...</p>
<pre><code>lld-link: error: duplicate symbol: _HeapAlloc@12
&gt;&gt;&gt; defined at x:\moz\firefox-102.12.0\memory\mozalloc\winheap.cpp:26
&gt;&gt;&gt;            ..\..\..\memory\mozalloc\winheap.obj
&gt;&gt;&gt; defined at KERNEL32.dll
</code></pre>
</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Sat Jun 10 2023 09:52:20 GMT-0700 (Pacific Daylight Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">is there a standard server-side SM?</td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Sat Jun 10 2023 09:52:41 GMT-0700 (Pacific Daylight Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">I just found some old projects aiming to implement it, and the shell version didn't exactly sound like it</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Sat Jun 10 2023 09:54:09 GMT-0700 (Pacific Daylight Time)">16:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> is there a standard server-side SM?</blockquote></mx-reply>I don't think so, no</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Sat Jun 10 2023 09:54:31 GMT-0700 (Pacific Daylight Time)">16:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">the only available "official" standalone version is jsshell</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Sat Jun 10 2023 09:54:59 GMT-0700 (Pacific Daylight Time)">16:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">maybe one can pipe an embedded SM to act as such</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Sat Jun 10 2023 09:55:01 GMT-0700 (Pacific Daylight Time)">16:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">somehow</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Sat Jun 10 2023 09:55:37 GMT-0700 (Pacific Daylight Time)">16:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">like just embed SM somehow and then use that program as the server-side client</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Sat Jun 10 2023 09:55:50 GMT-0700 (Pacific Daylight Time)">16:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">"<em>just</em> embed" :D</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Sat Jun 10 2023 09:56:28 GMT-0700 (Pacific Daylight Time)">16:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">JS embedding process is not easy (it applies both to V8 and SM) and requires quite a lot of work</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Sat Jun 10 2023 09:57:25 GMT-0700 (Pacific Daylight Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">and this is only for pure JS without anything like modules, filesystem, fetch api and etc</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Sat Jun 10 2023 09:57:59 GMT-0700 (Pacific Daylight Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but since it's already a C++ program then why cannot one compile it to an interpreter</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Sat Jun 10 2023 09:58:02 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">coz all this cool stuff must be implement by the embedding side (e.g. browser)</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Sat Jun 10 2023 09:58:12 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">that one can call using the cmd line for example</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Sat Jun 10 2023 09:58:18 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> but since it's already a C++ program then why cannot one compile it to an interpreter</blockquote></mx-reply>this is not how programming works :D</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Sat Jun 10 2023 09:58:57 GMT-0700 (Pacific Daylight Time)">16:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell"><a href="https://discourse.mozilla.org/t/beginners-questions-about-embedding-spidermonkey/92996/2">https://discourse.mozilla.org/t/beginners-questions-about-embedding-spidermonkey/92996/2</a> ?</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Sat Jun 10 2023 10:00:20 GMT-0700 (Pacific Daylight Time)">17:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">yea, this is an example of how to call scripts on JS engine after embedding it</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Sat Jun 10 2023 10:00:56 GMT-0700 (Pacific Daylight Time)">17:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">but first, you have to embed it</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Sat Jun 10 2023 10:01:05 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">yes but I don't understand how it should be difficult to write an eval loop</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Sat Jun 10 2023 10:01:16 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">since the library should have parse(input) already</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Sat Jun 10 2023 10:01:20 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">it's not <em>just</em> eval loop =)</td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Sat Jun 10 2023 10:01:34 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">do you want to have modules?</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Sat Jun 10 2023 10:01:37 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">or fetch api?</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Sat Jun 10 2023 10:01:45 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">or access to filesystem?</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Sat Jun 10 2023 10:01:55 GMT-0700 (Pacific Daylight Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but those should be once implementable anyways</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Sat Jun 10 2023 10:02:05 GMT-0700 (Pacific Daylight Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">or maybe GC system that doesnt OOM you</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Sat Jun 10 2023 10:02:08 GMT-0700 (Pacific Daylight Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">and I don't understand if someone hasn't done them already</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Sat Jun 10 2023 10:02:31 GMT-0700 (Pacific Daylight Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">or maybe I misunderstand and SM is in the state where it serves a limited use case of FF</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Sat Jun 10 2023 10:02:40 GMT-0700 (Pacific Daylight Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">rather than as a general JS engine</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Sat Jun 10 2023 10:02:41 GMT-0700 (Pacific Daylight Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">SM is the same as V8</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Sat Jun 10 2023 10:02:59 GMT-0700 (Pacific Daylight Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">it's a library with interface that gives you ability to embed it in your program</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Sat Jun 10 2023 10:03:10 GMT-0700 (Pacific Daylight Time)">17:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">QuickJS seems to support modules etc.</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Sat Jun 10 2023 10:03:17 GMT-0700 (Pacific Daylight Time)">17:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">but it's not simple plug-n-play, and these libraries do not have the same interface (so you can't just replace one engine with another)</td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Sat Jun 10 2023 10:04:13 GMT-0700 (Pacific Daylight Time)">17:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">TBH QuickJS seems better marketed in this sense</td></tr>
  <tr class="msg" id="L64"><td class="ts-cell"><a class="ts" href="#L64" alt="Sat Jun 10 2023 10:04:27 GMT-0700 (Pacific Daylight Time)">17:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but I think it's not intended to be seen as a competitor</td></tr>
  <tr class="msg" id="L65"><td class="ts-cell"><a class="ts" href="#L65" alt="Sat Jun 10 2023 10:04:50 GMT-0700 (Pacific Daylight Time)">17:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">there is not a lot of competition in JS engine embedding world, tbh</td></tr>
  <tr class="msg" id="L66"><td class="ts-cell"><a class="ts" href="#L66" alt="Sat Jun 10 2023 10:04:55 GMT-0700 (Pacific Daylight Time)">17:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">99% use V8</td></tr>
  <tr class="msg" id="L67"><td class="ts-cell"><a class="ts" href="#L67" alt="Sat Jun 10 2023 10:05:52 GMT-0700 (Pacific Daylight Time)">17:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">a lot of folks recommended QuickJS, but then one'd ask why is QuickJS not in FF as well</td></tr>
  <tr class="msg" id="L68"><td class="ts-cell"><a class="ts" href="#L68" alt="Sat Jun 10 2023 10:06:00 GMT-0700 (Pacific Daylight Time)">17:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">(not that V8 is that much better though (or at all))</td></tr>
  <tr class="msg" id="L69"><td class="ts-cell"><a class="ts" href="#L69" alt="Sat Jun 10 2023 10:06:01 GMT-0700 (Pacific Daylight Time)">17:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">if it's better than SM</td></tr>
  <tr class="msg" id="L70"><td class="ts-cell"><a class="ts" href="#L70" alt="Sat Jun 10 2023 10:06:37 GMT-0700 (Pacific Daylight Time)">17:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">what problem are you trying to solve?</td></tr>
  <tr class="msg" id="L71"><td class="ts-cell"><a class="ts" href="#L71" alt="Sat Jun 10 2023 10:07:17 GMT-0700 (Pacific Daylight Time)">17:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">do you actually need a standalone engine? maybe something like electron would be better for your case?</td></tr>
  <tr class="msg" id="L72"><td class="ts-cell"><a class="ts" href="#L72" alt="Sat Jun 10 2023 10:07:19 GMT-0700 (Pacific Daylight Time)">17:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">I just want to use a FOSS alternative to Node</td></tr>
  <tr class="msg" id="L73"><td class="ts-cell"><a class="ts" href="#L73" alt="Sat Jun 10 2023 10:08:31 GMT-0700 (Pacific Daylight Time)">17:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">then there is no easy way - you have to take JS engine, embed it and then implement all NodeJS interfaces and features.</td></tr>
  <tr class="msg" id="L74"><td class="ts-cell"><a class="ts" href="#L74" alt="Sat Jun 10 2023 10:09:43 GMT-0700 (Pacific Daylight Time)">17:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">and this means not only JS interfaces, but C++ interfaces as well, since they are used in a lot of NodeJS modules</td></tr>
  <tr class="msg" id="L75"><td class="ts-cell"><a class="ts" href="#L75" alt="Sat Jun 10 2023 10:13:16 GMT-0700 (Pacific Daylight Time)">17:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">well QuickJS: <a href="https://www.youtube.com/watch?v=kSl1tf95284">https://www.youtube.com/watch?v=kSl1tf95284</a></td></tr>
  <tr class="msg" id="L76"><td class="ts-cell"><a class="ts" href="#L76" alt="Sat Jun 10 2023 10:13:29 GMT-0700 (Pacific Daylight Time)">17:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but this just suggests that SM is lagging somehow</td></tr>
  <tr class="msg" id="L77"><td class="ts-cell"><a class="ts" href="#L77" alt="Sat Jun 10 2023 10:14:17 GMT-0700 (Pacific Daylight Time)">17:14</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">it's not, they just serve different purposes</td></tr>
  <tr class="msg" id="L78"><td class="ts-cell"><a class="ts" href="#L78" alt="Sat Jun 10 2023 10:15:04 GMT-0700 (Pacific Daylight Time)">17:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">e.g. fetch is a Web API interface and is not part of JS standard</td></tr>
  <tr class="msg" id="L79"><td class="ts-cell"><a class="ts" href="#L79" alt="Sat Jun 10 2023 10:15:37 GMT-0700 (Pacific Daylight Time)">17:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">what if one tried to figure out some common subset between SM and QuickJS</td></tr>
  <tr class="msg" id="L80"><td class="ts-cell"><a class="ts" href="#L80" alt="Sat Jun 10 2023 10:15:52 GMT-0700 (Pacific Daylight Time)">17:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">that subset would be standard JS</td></tr>
  <tr class="msg" id="L81"><td class="ts-cell"><a class="ts" href="#L81" alt="Sat Jun 10 2023 10:15:56 GMT-0700 (Pacific Daylight Time)">17:15</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">to be able to use SM API for browser and QuickJS for executables</td></tr>
  <tr class="msg" id="L82"><td class="ts-cell"><a class="ts" href="#L82" alt="Sat Jun 10 2023 10:16:38 GMT-0700 (Pacific Daylight Time)">17:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">possibly still best of the both worlds rather than trying to recreate QuickJS with SM </td></tr>
  <tr class="msg" id="L83"><td class="ts-cell"><a class="ts" href="#L83" alt="Sat Jun 10 2023 10:19:16 GMT-0700 (Pacific Daylight Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">yes but I mean instead of trying to make QuickJS into the browser or making SM into native executables</td></tr>
  <tr class="msg" id="L84"><td class="ts-cell"><a class="ts" href="#L84" alt="Sat Jun 10 2023 10:19:27 GMT-0700 (Pacific Daylight Time)">17:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">then I think writing for both separately is best</td></tr>
  <tr class="msg" id="L85"><td class="ts-cell"><a class="ts" href="#L85" alt="Sat Jun 10 2023 10:24:10 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but I think part of Node's appeal</td></tr>
  <tr class="msg" id="L86"><td class="ts-cell"><a class="ts" href="#L86" alt="Sat Jun 10 2023 10:24:21 GMT-0700 (Pacific Daylight Time)">17:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">was that it's the same code for desktop and the browser</td></tr>
  <tr class="msg" id="L87"><td class="ts-cell"><a class="ts" href="#L87" alt="Sat Jun 10 2023 10:34:28 GMT-0700 (Pacific Daylight Time)">17:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">and yes it's true that there's Electron</td></tr>
  <tr class="msg" id="L88"><td class="ts-cell"><a class="ts" href="#L88" alt="Sat Jun 10 2023 10:34:35 GMT-0700 (Pacific Daylight Time)">17:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but it's by the OpenJS foundation, same as Node</td></tr>
  <tr class="msg" id="L89"><td class="ts-cell"><a class="ts" href="#L89" alt="Sat Jun 10 2023 10:42:04 GMT-0700 (Pacific Daylight Time)">17:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">is there a way to check with which version of rust was ESR built?</td></tr>
  <tr class="msg" id="L90"><td class="ts-cell"><a class="ts" href="#L90" alt="Sat Jun 10 2023 10:42:46 GMT-0700 (Pacific Daylight Time)">17:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>context: another link error:</p>
<pre><code>lld-link: error: undefined symbol: __declspec(dllimport) _NtReadFile@36
&gt;&gt;&gt; referenced by /rustc/90c541806f23a127002de5b4038be731ba1458ca/library\std\src\sys\windows\handle.rs:241
&gt;&gt;&gt;               jsrust.lib(std-83289d9c1ef26d12.std.6b8e046a-cgu.0.rcgu.o):(std::sys::windows::handle::Handle::synchronous_read::hebb7dd13f4bc8861)
</code></pre>
</td></tr>
  <tr class="msg" id="L91"><td class="ts-cell"><a class="ts" href="#L91" alt="Sat Jun 10 2023 10:48:33 GMT-0700 (Pacific Daylight Time)">17:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">there's some old discussion like this <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1482179">https://bugzilla.mozilla.org/show_bug.cgi?id=1482179</a></td></tr>
  <tr class="msg" id="L92"><td class="ts-cell"><a class="ts" href="#L92" alt="Sat Jun 10 2023 10:48:40 GMT-0700 (Pacific Daylight Time)">17:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">asking for a REPL example for SM</td></tr>
  <tr class="msg" id="L93"><td class="ts-cell"><a class="ts" href="#L93" alt="Sat Jun 10 2023 10:52:24 GMT-0700 (Pacific Daylight Time)">17:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">what about Rhino, there are some old references w.r.t. it and REPL?</td></tr>
  <tr class="msg" id="L94"><td class="ts-cell"><a class="ts" href="#L94" alt="Sat Jun 10 2023 10:58:59 GMT-0700 (Pacific Daylight Time)">17:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but umm, why is the shell not sufficient for server-side</td></tr>
  <tr class="msg" id="L95"><td class="ts-cell"><a class="ts" href="#L95" alt="Sat Jun 10 2023 10:59:01 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell"><a href="https://web.archive.org/web/20110629134447/https://developer.mozilla.org/En/SpiderMonkey/Introduction_to_the_JavaScript_shell">https://web.archive.org/web/20110629134447/https://developer.mozilla.org/En/SpiderMonkey/Introduction_to_the_JavaScript_shell</a></td></tr>
  <tr class="msg" id="L96"><td class="ts-cell"><a class="ts" href="#L96" alt="Sat Jun 10 2023 10:59:40 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">I initially just expected that it could not expose the OS fully</td></tr>
  <tr class="msg" id="L97"><td class="ts-cell"><a class="ts" href="#L97" alt="Sat Jun 10 2023 10:59:48 GMT-0700 (Pacific Daylight Time)">17:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">so that it would not be useful for e.g. multimedia apps</td></tr>
  <tr class="msg" id="L98"><td class="ts-cell"><a class="ts" href="#L98" alt="Sat Jun 10 2023 11:01:05 GMT-0700 (Pacific Daylight Time)">18:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> is there a way to check with which version of rust was ESR built?</blockquote></mx-reply>nvm, it's a 1.70 rust change: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1836723">https://bugzilla.mozilla.org/show_bug.cgi?id=1836723</a></td></tr>
  <tr class="msg" id="L99"><td class="ts-cell"><a class="ts" href="#L99" alt="Sat Jun 10 2023 11:03:08 GMT-0700 (Pacific Daylight Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">but atm I don't know whether SM is out-dated or QuickJS is limited</td></tr>
  <tr class="msg" id="L100"><td class="ts-cell"><a class="ts" href="#L100" alt="Sat Jun 10 2023 11:03:21 GMT-0700 (Pacific Daylight Time)">18:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">because QuickJS seems to do exactly what I want</td></tr>
  <tr class="msg" id="L101"><td class="ts-cell"><a class="ts" href="#L101" alt="Sat Jun 10 2023 11:08:51 GMT-0700 (Pacific Daylight Time)">18:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell">hello, how can I use modules from the JS shell? I'm writing a CLI program</td></tr>
  <tr class="msg" id="L102"><td class="ts-cell"><a class="ts" href="#L102" alt="Sat Jun 10 2023 11:09:48 GMT-0700 (Pacific Daylight Time)">18:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">yes I am trying to ask the same</td></tr>
  <tr class="msg" id="L103"><td class="ts-cell"><a class="ts" href="#L103" alt="Sat Jun 10 2023 11:10:01 GMT-0700 (Pacific Daylight Time)">18:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">I just did a lengthy discussion for whether to look at QuickJS or SM for this</td></tr>
  <tr class="msg" id="L104"><td class="ts-cell"><a class="ts" href="#L104" alt="Sat Jun 10 2023 11:10:15 GMT-0700 (Pacific Daylight Time)">18:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">because they said that embedding SM takes effort </td></tr>
  <tr class="msg" id="L105"><td class="ts-cell"><a class="ts" href="#L105" alt="Sat Jun 10 2023 11:10:19 GMT-0700 (Pacific Daylight Time)">18:10</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell">if I try to use ES6 modules it throws <code>SyntaxError: import declarations may only appear at top level of a module:</code></td></tr>
  <tr class="msg" id="L106"><td class="ts-cell"><a class="ts" href="#L106" alt="Sat Jun 10 2023 11:11:21 GMT-0700 (Pacific Daylight Time)">18:11</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@soundmodel:mozilla.org">soundmodel</span>&gt;</div></td><td class="msg-cell">possibly because it's not implemented</td></tr>
  <tr class="msg" id="L107"><td class="ts-cell"><a class="ts" href="#L107" alt="Sat Jun 10 2023 11:12:01 GMT-0700 (Pacific Daylight Time)">18:12</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> I don't know if <code>--disable-nspr-build</code> works on Windows, but on Linux and Mac you can build without NSPR - looks like your error is inside NSPR, so it could be worth checking out</blockquote></mx-reply>I've yet to check if it works, but it certainly builds =)</td></tr>
  <tr class="msg" id="L108"><td class="ts-cell"><a class="ts" href="#L108" alt="Sat Jun 10 2023 11:20:20 GMT-0700 (Pacific Daylight Time)">18:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> but atm I don't know whether SM is out-dated or QuickJS is limited</blockquote></mx-reply>Neither is outdated or limited, you're just expecting the engines themselves to do much more work than their required to by the ECMA-262 spec</td></tr>
  <tr class="msg" id="L109"><td class="ts-cell"><a class="ts" href="#L109" alt="Sat Jun 10 2023 11:21:30 GMT-0700 (Pacific Daylight Time)">18:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">Anything on top, module resolution, the microtask queue, fetch api, textencoder, settimeout, etc. is controlled by the web standards of whatwg and similar organisations and  they're implemented by the browser, not by the js engine</td></tr>
  <tr class="msg" id="L110"><td class="ts-cell"><a class="ts" href="#L110" alt="Sat Jun 10 2023 11:24:47 GMT-0700 (Pacific Daylight Time)">18:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell">if any runtimes like node or deno want those features, they implement it in their embedding of the engine

there is no such fully featured embedding/runtime for SM so that's how it is, and it's not a priority or even in the scope of the SM team to really be worrying about</td></tr>
  <tr class="msg" id="L111"><td class="ts-cell"><a class="ts" href="#L111" alt="Sat Jun 10 2023 11:32:30 GMT-0700 (Pacific Daylight Time)">18:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">TheQwertiest</span>: Your issue seems vaguely similar to something there was on servo/mozjs <a href="https://github.com/servo/mozjs/pull/313">https://github.com/servo/mozjs/pull/313</a></td></tr>
  <tr class="msg" id="L112"><td class="ts-cell"><a class="ts" href="#L112" alt="Sat Jun 10 2023 11:33:05 GMT-0700 (Pacific Daylight Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-13">TheQwertiest</span>: Your issue seems vaguely similar to something there was on servo/mozjs <a href="https://github.com/servo/mozjs/pull/313">https://github.com/servo/mozjs/pull/313</a></blockquote></mx-reply>Thanks, but I've found all the corresponding bugs and fixes on bugzilla =)</td></tr>
  <tr class="msg" id="L113"><td class="ts-cell"><a class="ts" href="#L113" alt="Sat Jun 10 2023 11:33:55 GMT-0700 (Pacific Daylight Time)">18:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">Once I've verified that it all works, I'll post the link to all the required patches for future generations =)</td></tr>
  <tr class="msg" id="L114"><td class="ts-cell"><a class="ts" href="#L114" alt="Sat Jun 10 2023 11:50:39 GMT-0700 (Pacific Daylight Time)">18:50</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> if any runtimes like node or deno want those features, they implement it in their embedding of the engine<br><br>there is no such fully featured embedding/runtime for SM so that's how it is, and it's not a priority or even in the scope of the SM team to really be worrying about</blockquote></mx-reply>thanks you for the response! I won't write it for SM then, but it's unfortunate since I really don't like node</td></tr>
  <tr class="msg" id="L115"><td class="ts-cell"><a class="ts" href="#L115" alt="Sat Jun 10 2023 12:52:40 GMT-0700 (Pacific Daylight Time)">19:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell">by the way, how can one use the <code>--module</code> and <code>--modul-load-path</code> options?</td></tr>
  <tr class="msg" id="L116"><td class="ts-cell"><a class="ts" href="#L116" alt="Sat Jun 10 2023 14:35:56 GMT-0700 (Pacific Daylight Time)">21:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>Almost one full day later, SM upgrade complete...<br>If anyone wants to build SM ESR102.12.0 dll on Windows, check out my repo: <a href="https://bitbucket.org/TheQwertiest/mozjs">https://bitbucket.org/TheQwertiest/mozjs</a></p>
<ul>
<li><code>build_scripts/<a href="http://setup.py">setup.py</a></code> will walk through all the steps, from downloading sources and correct mozillabuild, to applying required patches.</li>
<li><code>build_scripts/patches</code> contains all the patches which are needed for build to complete and/or for embedding to work properly on Windows</li>
</ul>
<p>Note: this repo contains only patches that must be applied before build (i.e. they can't be applied post-build). For application embedding SM to build and work with Visual Studio (and maybe other compilers) additional patches are needed:</p>
<ul>
<li><a href="https://github.com/TheQwertiest/foo_spider_monkey_panel/blob/feature/v2/scripts/patches/mozjs-bug_1243367-wrong_free_call.patch">https://github.com/TheQwertiest/foo_spider_monkey_panel/blob/feature/v2/scripts/patches/mozjs-bug_1243367-wrong_free_call.patch</a> : this patch fixes crashes when memory allocation and deallocation is performed across dll boundaries (e.g. allocated in mozjs, deallocated in embedding)</li>
<li><a href="https://github.com/TheQwertiest/foo_spider_monkey_panel/blob/feature/v2/scripts/patches/mozjs-compiler_bug_workaround.patch">https://github.com/TheQwertiest/foo_spider_monkey_panel/blob/feature/v2/scripts/patches/mozjs-compiler_bug_workaround.patch</a> : this patch fixes compilation error, which I think is caused by a compiler bug</li>
<li><a href="https://github.com/TheQwertiest/foo_spider_monkey_panel/blob/feature/v2/scripts/patches/mozjs-bug_1243367-wrong_free_call.patch">https://github.com/TheQwertiest/foo_spider_monkey_panel/blob/feature/v2/scripts/patches/mozjs-bug_1243367-wrong_free_call.patch</a> : msvc does not have <code>__PRETTY_FUNCTION__</code> macro, this patch replaces it with a msvc-friendly version.</li>
</ul>
</td></tr>
  <tr class="msg" id="L117"><td class="ts-cell"><a class="ts" href="#L117" alt="Sat Jun 10 2023 14:41:29 GMT-0700 (Pacific Daylight Time)">21:41</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">Note: <code><a href="http://setup.py">setup.py</a></code> in mozjs repo only builds x86 library, but it can be easily adapted to build x64 as well (I haven't tested that though, so it might require additional SM patches)</td></tr>
  <tr class="msg" id="L118"><td class="ts-cell"><a class="ts" href="#L118" alt="Sat Jun 10 2023 15:51:29 GMT-0700 (Pacific Daylight Time)">22:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><p>ugh... guess it's not time to rest yet...</p>
<pre><code>Run-Time Check Failure #0 - The value of ESP was not properly saved across a function call.  This is usually a result of calling a function declared with one calling convention with a function pointer declared with a different calling convention.
</code></pre>
</td></tr>
  <tr class="msg" id="L119"><td class="ts-cell"><a class="ts" href="#L119" alt="Sat Jun 10 2023 15:52:54 GMT-0700 (Pacific Daylight Time)">22:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">It's either a clang-cl binary generation bug or macro/definition mismatch between SM compilation environment and embedding environment</td></tr>
  <tr class="msg" id="L120"><td class="ts-cell"><a class="ts" href="#L120" alt="Sat Jun 10 2023 15:53:23 GMT-0700 (Pacific Daylight Time)">22:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">no idea how to diagnose that though...</td></tr>
  <tr class="msg" id="L121"><td class="ts-cell"><a class="ts" href="#L121" alt="Sat Jun 10 2023 15:54:09 GMT-0700 (Pacific Daylight Time)">22:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">something to do with SliceBudget/TimeBudget constructors</td></tr>
  <tr class="msg" id="L122"><td class="ts-cell"><a class="ts" href="#L122" alt="Sat Jun 10 2023 16:22:37 GMT-0700 (Pacific Daylight Time)">23:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> by the way, how can one use the <code>--module</code> and <code>--modul-load-path</code> options?</blockquote></mx-reply><p>the --help message just says</p>
<pre><code>--module-load-path=DIR              Set directory to load modules from
-m --module=PATH                    Module path to run
</code></pre>
<p>but what modules does it refer to? can I use it to run some sort of module system on SM? I'm reading the source code but it's not clear either, no comments</p></td></tr>
  <tr class="msg" id="L123"><td class="ts-cell"><a class="ts" href="#L123" alt="Sat Jun 10 2023 16:24:12 GMT-0700 (Pacific Daylight Time)">23:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell">I don't find any help online either</td></tr>
  <tr class="msg" id="L124"><td class="ts-cell"><a class="ts" href="#L124" alt="Sat Jun 10 2023 16:29:03 GMT-0700 (Pacific Daylight Time)">23:29</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">almost certain that it's caused by TimeBudget copy constructor (no idea how to fix that tho)<br>either that or Timestamp</td></tr>
  <tr class="msg" id="L125"><td class="ts-cell"><a class="ts" href="#L125" alt="Sat Jun 10 2023 16:37:12 GMT-0700 (Pacific Daylight Time)">23:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-12" title="@sfink:mozilla.org">sfink</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>the --help message just says</p>
<pre><code>--module-load-path=DIR              Set directory to load modules from
-m --module=PATH                    Module path to run
</code></pre>
<p>but what modules does it refer to? can I use it to run some sort of module system on SM? I'm reading the source code but it's not clear either, no comments</p></blockquote></mx-reply><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">ES modules</a> but note that this isn't going to help you use modules written for Node</td></tr>
  <tr class="msg" id="L126"><td class="ts-cell"><a class="ts" href="#L126" alt="Sat Jun 10 2023 16:47:44 GMT-0700 (Pacific Daylight Time)">23:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell">I don't need node modules, I'm writing a small CLI program</td></tr>
  <tr class="msg" id="L127"><td class="ts-cell"><a class="ts" href="#L127" alt="Sat Jun 10 2023 16:48:16 GMT-0700 (Pacific Daylight Time)">23:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell">I've used ES6 modules in the browser but how could I used them just from the terminal?</td></tr>
  <tr class="msg" id="L128"><td class="ts-cell"><a class="ts" href="#L128" alt="Sat Jun 10 2023 16:48:28 GMT-0700 (Pacific Daylight Time)">23:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell"><pre><code>==&gt; mod1.mjs &lt;==
export const fn1 = () =&gt; {
  console.log("i'm fn1");
};

export const fn2 = (p1,p2) =&gt; {
  console.log(`i'm fn2, pars: ${p1}, ${p2}`);
};

==&gt; main.js &lt;==
#!/usr/bin/js78
fn1();
fn2(10,20);
</code></pre></td></tr>
  <tr class="msg" id="L129"><td class="ts-cell"><a class="ts" href="#L129" alt="Sat Jun 10 2023 16:49:01 GMT-0700 (Pacific Daylight Time)">23:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@emanresu3:matrix.org">emanresu3</span>&gt;</div></td><td class="msg-cell"><code>js78 -m mod1.mjs main.js</code> throws <code>SyntaxError: export declarations may only appear at top level of a module:</code></td></tr>

</tbody></table></div></div></div>
</body></html>