<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2021-11-30</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2021-11-30<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2021-11-29" class="nav-link"><span>prev</span></a>
<a href="2021-12-01" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">
<div class="rhs-header">
<span id="error" style="color: red; display:none">error</span>

<input type="text" id="query" size="25" placeholder="Search SpiderMonkey">
<a id="search-submit" class="button icon-link" title="Search">
  <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
</a>
</div>

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Mon Nov 29 2021 17:13:50 GMT-0800 (Pacific Standard Time)">01:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">jakechampion</span>: let me know if you need help pushing your patch to try server</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Mon Nov 29 2021 18:33:14 GMT-0800 (Pacific Standard Time)">02:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-16">jakechampion</span>: let me know if you need help pushing your patch to try server</blockquote></mx-reply>Thanks <span class="nick-15">arai</span> ‚ò∫Ô∏è - I think I've got it pushed and now have all the tests commands finished running on my local machine and all passed</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Mon Nov 29 2021 18:34:57 GMT-0800 (Pacific Standard Time)">02:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-16">jakechampion</span>: thank you!</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Mon Nov 29 2021 18:35:10 GMT-0800 (Pacific Standard Time)">02:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">sorry I overlooked one thing in the patch (commented there)</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Mon Nov 29 2021 18:35:15 GMT-0800 (Pacific Standard Time)">02:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">For the tests, I was wondering if we should add tests which run when the enable-new-set-methods flag is not set -- they could test to confirm the methods do not exist</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Mon Nov 29 2021 18:36:16 GMT-0800 (Pacific Standard Time)">02:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yeah, adding it in the <code>else</code> branch for <code>if (getBuildConfiguration()['new-set-methods'] &amp;&amp; getRealmConfiguration().enableNewSetMethods) {</code> would be nice</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Mon Nov 29 2021 18:39:14 GMT-0800 (Pacific Standard Time)">02:39</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">I've made those changes now - should I be pushing to Try once more?</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Mon Nov 29 2021 18:43:00 GMT-0800 (Pacific Standard Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">the whole run is not necessary</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Mon Nov 29 2021 18:43:33 GMT-0800 (Pacific Standard Time)">02:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">can you run <code>./mach jstests non262/Set/</code> to see if the <code>else</code> branch passes?</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Mon Nov 29 2021 18:46:04 GMT-0800 (Pacific Standard Time)">02:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">okay, now let's wait for the try run to finish</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Mon Nov 29 2021 19:23:17 GMT-0800 (Pacific Standard Time)">03:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-16" title="@jakechampion:mozilla.org">jakechampion</span>&gt;</div></td><td class="msg-cell">It looks like every finished and passed üéâhttps://<a href="http://treeherder.mozilla.org/jobs?repo=try&amp;author=me%40jakechampion.name">treeherder.mozilla.org/jobs?repo=try&amp;author=me%40jakechampion.name</a></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Tue Nov 30 2021 07:25:28 GMT-0800 (Pacific Standard Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">Filed bug 1743623 for <code>javascript.options.*</code> prefs vs <code>dom.workers.options.*</code> prefs above</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Tue Nov 30 2021 07:25:30 GMT-0800 (Pacific Standard Time)">15:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1743623">https://bugzil.la/1743623</a> ‚Äî NEW (nobody) ‚Äî Revisit SpiderMonkey-related preferences used by workers</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Tue Nov 30 2021 08:52:42 GMT-0800 (Pacific Standard Time)">16:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">I've done some experiments to see how much memory we could save if we implemented pointer compression the in the JS engine</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Tue Nov 30 2021 08:53:09 GMT-0800 (Pacific Standard Time)">16:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">The summary is that this might save between 3.8% and 8.1% of JS heap memory on common use cases, or 1.4% and 2.4% of total explicit memory allocations</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Tue Nov 30 2021 08:53:16 GMT-0800 (Pacific Standard Time)">16:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell">Results are here: <a href="https://docs.google.com/spreadsheets/d/1HgagFqAB_FGv_1P-x5rY1fJwRVnHgRxnyXG0dV9Xqnw/edit?usp=sharing">https://docs.google.com/spreadsheets/d/1HgagFqAB_FGv_1P-x5rY1fJwRVnHgRxnyXG0dV9Xqnw/edit?usp=sharing</a></td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Tue Nov 30 2021 08:57:07 GMT-0800 (Pacific Standard Time)">16:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">Hi! Is anyone willing to vouch for me to get Level 1 access (for <code>mach try</code>)? üôÇ</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Tue Nov 30 2021 09:01:08 GMT-0800 (Pacific Standard Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span>: Is that assuming 32-bit Values?</td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Tue Nov 30 2021 09:01:28 GMT-0800 (Pacific Standard Time)">17:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@tcampbell:mozilla.org">tcampbell</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">nicolo-ribaudo</span>: I'm gonna suggest <span class="nick-2">mgaudet</span>  but I'm also happy to</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Tue Nov 30 2021 09:02:46 GMT-0800 (Pacific Standard Time)">17:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-9">nicolo-ribaudo</span>: I'm gonna suggest <span class="nick-2">mgaudet</span>  but I'm also happy to</blockquote></mx-reply>Thanks! I'm not in hurry, so I can wait to see if <span class="nick-2">mgaudet</span> wants to do it</td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Tue Nov 30 2021 09:03:07 GMT-0800 (Pacific Standard Time)">17:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@ms2ger:igalia.com">Ms2ger üíâüíâ</span>&gt;</div></td><td class="msg-cell"><span class="nick-9">nicolo-ribaudo</span>: I'll vouch tomorrow, if you don't have anyone yet</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Tue Nov 30 2021 09:08:04 GMT-0800 (Pacific Standard Time)">17:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">iain</span>: it's assuming we can specialize object element/slot storage somehow for when they only contain values that can be stored in 32 bits</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Tue Nov 30 2021 09:42:57 GMT-0800 (Pacific Standard Time)">17:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Thanks! I'm not in hurry, so I can wait to see if <span class="nick-2">mgaudet</span> wants to do it</blockquote></mx-reply>be glad to vouch; just ni me!</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Tue Nov 30 2021 09:44:06 GMT-0800 (Pacific Standard Time)">17:44</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-9" title="@nicolo-ribaudo:matrix.org">nicolo-ribaudo</span>&gt;</div></td><td class="msg-cell">CC'ed! <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1743649">https://bugzilla.mozilla.org/show_bug.cgi?id=1743649</a></td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Tue Nov 30 2021 12:02:14 GMT-0800 (Pacific Standard Time)">20:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@fuzzing_desparation:mozilla.org">fuzzing_desparation</span>&gt;</div></td><td class="msg-cell">Hello everyone. I am an undergraduate student trying to understand how to build spidermonkey for the purposes of fuzzing it in order to find bugs. I have been trying to resolve an issue for several days that revolves around clang not being found in gecko-dev/js/src/compiler/clang. Can I simply copy over clang and clang++ from /usr/bin? I tried doing that earlier, and started experiencing other errors. Googling these issues, I have only found one fix that would be applicable on linux, which is simply rerunning mach bootstrap and trying to build the full firefox engine. This hasn't worked for me, so I am a bit confused. Am I missing something obvious? </td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Tue Nov 30 2021 12:06:15 GMT-0800 (Pacific Standard Time)">20:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@fuzzing_desparation:mozilla.org">fuzzing_desparation</span>&gt;</div></td><td class="msg-cell">Pulling spidermonkey from <a href="https://github.com/mozilla/gecko-dev">https://github.com/mozilla/gecko-dev</a>, and my MOZBUILD config is basically the one described in the build instructions. My end goal is to build Spidermonkey with instrumentation for afl fuzzing, but at this point I just want to successfully build spidermonkey at all. </td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Tue Nov 30 2021 12:18:41 GMT-0800 (Pacific Standard Time)">20:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">fuzzing_desparation</span>: Have you seen <a href="https://firefox-source-docs.mozilla.org/js/build.html">this page</a>? I believe <code>mach bootstrap</code> is supposed to install clang for you, so <a href="https://firefox-source-docs.mozilla.org/setup/linux_build.html#building-firefox-on-linux">this page</a> might also be relevant</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Tue Nov 30 2021 12:20:30 GMT-0800 (Pacific Standard Time)">20:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">"gecko-dev/js/src/compiler/clang" is a weird path</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Tue Nov 30 2021 12:20:56 GMT-0800 (Pacific Standard Time)">20:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-6">fuzzing_desparation</span>: Would be worth posting your exact mozconfig, and maybe a pastebin of your errors</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Tue Nov 30 2021 12:21:21 GMT-0800 (Pacific Standard Time)">20:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">(but Iain's on the money for better instructions) </td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Tue Nov 30 2021 12:21:36 GMT-0800 (Pacific Standard Time)">20:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">By default, I think mach installs build tools in ~/.mozbuild</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Tue Nov 30 2021 12:21:52 GMT-0800 (Pacific Standard Time)">20:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">For example, I have <code>~/.mozbuild/clang/bin/clang</code></td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Tue Nov 30 2021 12:21:58 GMT-0800 (Pacific Standard Time)">20:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">If your fuzzing harness requires you build with your own compiler, I believe you can put <code>CC=$PATHTOCOMPILER CXX=$PATHTOC++COOMPILER</code> lines in your mozconfig too</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Tue Nov 30 2021 12:22:06 GMT-0800 (Pacific Standard Time)">20:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">(possibly two separate lines) </td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Tue Nov 30 2021 12:56:42 GMT-0800 (Pacific Standard Time)">20:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@fuzzing_desparation:mozilla.org">fuzzing_desparation</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> If your fuzzing harness requires you build with your own compiler, I believe you can put <code>CC=$PATHTOCOMPILER CXX=$PATHTOC++COOMPILER</code> lines in your mozconfig too</blockquote></mx-reply>Sorry, I should have specified that I have done this.</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Tue Nov 30 2021 12:57:12 GMT-0800 (Pacific Standard Time)">20:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@fuzzing_desparation:mozilla.org">fuzzing_desparation</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-6">fuzzing_desparation</span>: Have you seen <a href="https://firefox-source-docs.mozilla.org/js/build.html">this page</a>? I believe <code>mach bootstrap</code> is supposed to install clang for you, so <a href="https://firefox-source-docs.mozilla.org/setup/linux_build.html#building-firefox-on-linux">this page</a> might also be relevant</blockquote></mx-reply>I'm going to redo it step by step on this page and see if that works</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Tue Nov 30 2021 12:58:36 GMT-0800 (Pacific Standard Time)">20:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@fuzzing_desparation:mozilla.org">fuzzing_desparation</span>&gt;</div></td><td class="msg-cell">This is what I changed in the MOZCONFIG after it didn't work the first time, I'm going to retry from scratch before I come back.</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Tue Nov 30 2021 13:18:19 GMT-0800 (Pacific Standard Time)">21:18</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-6">fuzzing_desparation</span>: OK; and to be clear you need to use your own clang because that's where your fuzzing tooling is injected right?</p>
<p>Playing with that a bit, it certainly seems like a good start.</p>
<p>(I will note that <code>--with-clang-path</code> is potentially problematic for you, because it isn't matching the clang path you're using; I'd try dropping the option unless you prove to yourself it's necessary)</p>
<p>I haven't quite gotten to a point where I can reproduce that weird path though...</p>
</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Tue Nov 30 2021 13:32:12 GMT-0800 (Pacific Standard Time)">21:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@fuzzing_desparation:mozilla.org">fuzzing_desparation</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p><span class="nick-6">fuzzing_desparation</span>: OK; and to be clear you need to use your own clang because that's where your fuzzing tooling is injected right?</p>
<p>Playing with that a bit, it certainly seems like a good start.</p>
<p>(I will note that <code>--with-clang-path</code> is potentially problematic for you, because it isn't matching the clang path you're using; I'd try dropping the option unless you prove to yourself it's necessary)</p>
<p>I haven't quite gotten to a point where I can reproduce that weird path though...</p>
</blockquote></mx-reply><p>Yep, I use clang 6 with llvm in order to instrument spidermonkey for fuzzing.</p>
<p>I played with it, and was able to get rid of the original error. At first, I changed --with-clang-path to usr/local/bin, but for some reason it still wasn't finding my clang binary there.</p>
<p>I just fresh installed clang 6 in usr/bin instead, and specified that directory in my mozbuild instead. Then, I tried to run mach build, and I got further</p>
</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Tue Nov 30 2021 13:32:39 GMT-0800 (Pacific Standard Time)">21:32</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">So, clang-6 is almost certainly too old</td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Tue Nov 30 2021 13:33:24 GMT-0800 (Pacific Standard Time)">21:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@fuzzing_desparation:mozilla.org">fuzzing_desparation</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> So, clang-6 is almost certainly too old</blockquote></mx-reply>Ah, that's an issue for me then, as the fuzzing system I use indicates usage of clang 6 to compile the browsers and afl</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Tue Nov 30 2021 13:33:26 GMT-0800 (Pacific Standard Time)">21:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">--with-clang-path is really only supposed to be used for GCC builds that also need to run cbinddgen</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Tue Nov 30 2021 13:33:32 GMT-0800 (Pacific Standard Time)">21:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">*cbindgen </td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Tue Nov 30 2021 13:34:20 GMT-0800 (Pacific Standard Time)">21:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@fuzzing_desparation:mozilla.org">fuzzing_desparation</span>&gt;</div></td><td class="msg-cell">I got a "Finished dev [optimized + debuginfo] target(s) in 1m 10s" message afterwards, which I think indicates a successful build? However, I did get 2 errors, which were "make[4]: *** [/home/nmissa2/DIE/engines/gecko-dev/config/<a href="http://rules.mk:662">rules.mk:662</a>: Unified_cpp_js_src_frontend2.o] Error 1" and "make[3]: *** [/home/nmissa2/DIE/engines/gecko-dev/config/<a href="http://recurse.mk:72">recurse.mk:72</a>: js/src/jit/target-objects] Error 2"</td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Tue Nov 30 2021 13:34:27 GMT-0800 (Pacific Standard Time)">21:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-6" title="@fuzzing_desparation:mozilla.org">fuzzing_desparation</span>&gt;</div></td><td class="msg-cell">I assume this is probably because of my usage of clang 6?</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Tue Nov 30 2021 13:35:28 GMT-0800 (Pacific Standard Time)">21:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">ISTR that output is actually from the rust-modules getting compiled (PS: Rust will potentially pose a threat to your fuzzing; not necessarily a deal breaker, but integrating your C++ and rust fuzzing is important eventually) </td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Tue Nov 30 2021 13:36:05 GMT-0800 (Pacific Standard Time)">21:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@iain:mozilla.org">iain</span>&gt;</div></td><td class="msg-cell">Taking a step back: can I suggest trying to build without supplying your own clang version first, and then swapping out the build compiler once you know you have everything else working?</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Tue Nov 30 2021 13:36:35 GMT-0800 (Pacific Standard Time)">21:36</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">there's more errors elsewhere in that spew that give a more complete picture of the failure; but I tried compiling with the default clang  ubuntu installed, it failed (partially why mach bootstrap installs its own by default) </td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Tue Nov 30 2021 13:37:44 GMT-0800 (Pacific Standard Time)">21:37</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@fuzzing_desparation:mozilla.org">fuzzing_potential</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Taking a step back: can I suggest trying to build without supplying your own clang version first, and then swapping out the build compiler once you know you have everything else working?</blockquote></mx-reply>Good point, I did say I was going to try that but I got excited when mach build ran on clang 6 üòÜ</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Tue Nov 30 2021 13:42:32 GMT-0800 (Pacific Standard Time)">21:42</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">fuzzing_potential</span>: <a href="https://gist.github.com/mgaudet/95c9da427a479bbc4d8090029e77f518">https://gist.github.com/mgaudet/95c9da427a479bbc4d8090029e77f518</a></td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Tue Nov 30 2021 13:43:28 GMT-0800 (Pacific Standard Time)">21:43</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Here's a successful moz-config I've used; but I installed LLVM/Clang nightly for doing this. Finding the right minimum version that's compatible with your fuzzing tooling will be appropriate; but given the popularity of AFL, if that's your start point, I have to imagine someone has made it work with either clang nightly, or something <em>close</em></td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Tue Nov 30 2021 13:45:45 GMT-0800 (Pacific Standard Time)">21:45</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">(based on yours, with a couple notes) </td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Tue Nov 30 2021 14:04:52 GMT-0800 (Pacific Standard Time)">22:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@fuzzing_desparation:mozilla.org">fuzzing_potential</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Good point, I did say I was going to try that but I got excited when mach build ran on clang 6 üòÜ</blockquote></mx-reply>Worked, going to test <span class="nick-2">mgaudet</span> 's mozconfig. Tested with Clang 6.0.1-14 and got some errors(<a href="https://pastebin.com/mKYbtxbC">https://pastebin.com/mKYbtxbC</a>), going to test with clang nightly. I'm pretty sure it will work with clang nightly, the repo for the paper I was following (<a href="https://github.com/sslab-gatech/DIE">https://github.com/sslab-gatech/DIE</a>) specified usage of clang 6 specifically so I tried to stick with that, but it's outdated by a year or so. I will report back on how it goes.</td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Tue Nov 30 2021 14:05:18 GMT-0800 (Pacific Standard Time)">22:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@fuzzing_desparation:mozilla.org">fuzzing_potential</span>&gt;</div></td><td class="msg-cell">Thank you <span class="nick-4">iain</span> and <span class="nick-2">mgaudet</span> for the guidance so far.</td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Tue Nov 30 2021 14:05:23 GMT-0800 (Pacific Standard Time)">22:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">oh, clang-6 is more than a year old :P But you're welcome </td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Tue Nov 30 2021 14:05:41 GMT-0800 (Pacific Standard Time)">22:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@fuzzing_desparation:mozilla.org">fuzzing_potential</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> oh, clang-6 is more than a year old :P But you're welcome </blockquote></mx-reply>Ah, I meant that the DIE repo is about a year old, and they used clang 6.</td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Tue Nov 30 2021 14:07:14 GMT-0800 (Pacific Standard Time)">22:07</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">Interesting; I wonder if they don't list any SpiderMonkey CVEs because they didn't get it to build</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Tue Nov 30 2021 14:08:15 GMT-0800 (Pacific Standard Time)">22:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-1" title="@fuzzing_desparation:mozilla.org">fuzzing_potential</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Interesting; I wonder if they don't list any SpiderMonkey CVEs because they didn't get it to build</blockquote></mx-reply>Very likely to be the issue, as their <a href="http://build-sm.sh">build-sm.sh</a> and <a href="http://build-sm-cov.sh">build-sm-cov.sh</a> scripts seem a bit... off to me.</td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Tue Nov 30 2021 14:09:20 GMT-0800 (Pacific Standard Time)">22:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">fuzzing_potential</span>: build_sm looks reasonable, for the old way of building SM (configure+make); mach provides better ergonomics so we strongly recommend it now</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Tue Nov 30 2021 14:13:26 GMT-0800 (Pacific Standard Time)">22:13</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell"><span class="nick-1">fuzzing_potential</span>: Good luck! Hopefully this comes together. Would be neat to see some fuzz-bugs from a new approach.</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Tue Nov 30 2021 14:24:58 GMT-0800 (Pacific Standard Time)">22:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@mgaudet:mozilla.org">mgaudet</span>&gt;</div></td><td class="msg-cell">confession: Small improvements to DOM streams stack. Trying and failing to reproduce a JS streams error; alas. </td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Tue Nov 30 2021 14:25:00 GMT-0800 (Pacific Standard Time)">22:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell">Seen! Your update will eventually appear on <a href="https://robotzilla.github.io/histoire">https://robotzilla.github.io/histoire</a></td></tr>

</tbody></table></div></div></div>
</body></html>