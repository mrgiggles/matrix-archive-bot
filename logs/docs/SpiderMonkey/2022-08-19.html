<!DOCTYPE html><html><head>
  <meta charset="UTF-8">
  <title>SpiderMonkey on 2022-08-19</title>
  <link rel="stylesheet" href="../style.css">
  <script>window.room = "SpiderMonkey";</script><script src="../render-roomlist.js"></script>
  <script src="../logs.js"></script>
</head>
<body><div class="wrapper">
<div class="sidebar">
<div class="title">SpiderMonkey<br>2022-08-19<br><a href="plaintext/">plaintext logs</a></div>
<div class="nav">
<a href="2022-08-18" class="nav-link"><span>prev</span></a>
<a href="2022-08-20" class="nav-link"><span style="float:right">next</span></a>
</div>
    <div class="all-rooms"><noscript>JavaScript is required to load the channel index, but you can go to <a href="../..">the static index</a> directly.</noscript></div>
<div class="footer"><a href="https://github.com/bakkot/matrix-archive-bot">source on github</a></div>
</div>
<div class="rhs">

<div class="log"><table id="log-table"><tbody id="log-tbody">

  <tr class="msg" id="L0"><td class="ts-cell"><a class="ts" href="#L0" alt="Fri Aug 19 2022 01:33:21 GMT-0700 (Pacific Daylight Time)">08:33</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> just wanted to thank <span class="nick-4">jonco</span> for these wonderful docs: <a href="https://searchfox.org/mozilla-central/source/js/public/Modules.h">https://searchfox.org/mozilla-central/source/js/public/Modules.h</a></blockquote></mx-reply>Thanks, glad they are useful :)</td></tr>
  <tr class="msg" id="L1"><td class="ts-cell"><a class="ts" href="#L1" alt="Fri Aug 19 2022 01:46:53 GMT-0700 (Pacific Daylight Time)">08:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-4" title="@jonco:mozilla.org">jonco</span>&gt;</div></td><td class="msg-cell"><span class="nick-13">TheQwertiest</span>: There's no way to do that at present. Something like that could be achieved with synthetic module support. Some support for this is being worked on as part of JSON modules (bug 1670176).  Given this, you could make your module loader create a synthetic module for a given URI.</td></tr>
  <tr class="msg" id="L2"><td class="ts-cell"><a class="ts" href="#L2" alt="Fri Aug 19 2022 01:46:55 GMT-0700 (Pacific Daylight Time)">08:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1670176">https://bugzil.la/1670176</a> — NEW (jon4t4n) — Implement the JSON modules proposal</td></tr>
  <tr class="msg" id="L3"><td class="ts-cell"><a class="ts" href="#L3" alt="Fri Aug 19 2022 02:24:29 GMT-0700 (Pacific Daylight Time)">09:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-2" title="@nbp:mozilla.org">nbp</span>&gt;</div></td><td class="msg-cell"><p><span class="nick-7">ewang21</span>: This is what I have locally, because gcc / clang are not installed in default FHS locations:</p>
<pre><code>ac_add_options --with-libclang-path=/nix/store/nz1l47i75bqs8kw1lqr6sphws6jxjxrs-clang-11.1.0-lib/lib
ac_add_options --with-clang-path=/nix/store/a5k6x6nmdsrdfgkr5wmp6srwsk1slm1h-clang-wrapper-11.1.0/bin/clang
export BINDGEN_CFLAGS="-cxx-isystem /nix/store/42izybv2fz3ps5pcg3dvcmn85pc9406y-gcc-11.3.0/include/c++/11.3.0 -isystem /nix/store/42izybv2fz3ps5pcg3dvcmn85pc9406y-gcc-11.3.0/include/c++/11.3.0/x86_64-unknown-linux-gnu"
export CC="/nix/store/kia8xygy2r9iblwbjrl163j4bpz84wz7-gcc-wrapper-11.3.0/bin/cc"
export CXX="/nix/store/kia8xygy2r9iblwbjrl163j4bpz84wz7-gcc-wrapper-11.3.0/bin/c++"

</code></pre>
</td></tr>
  <tr class="msg" id="L4"><td class="ts-cell"><a class="ts" href="#L4" alt="Fri Aug 19 2022 06:52:42 GMT-0700 (Pacific Daylight Time)">13:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@redfire75369:mozilla.org">Redfire</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p>on another module related note: is there an easy way to export a native JS object as a module?<br>i.e. something like this:</p>
<pre><code>// my_module.js

// object has myMethod() and myProperty() with setter and getter
let nativeObject = loadNativeObjectFromEmbedding();

// ???
exportWithMagic default nativeObject ;


// user.js

import {myMethod, myProperty} from 'my_module'

myMethod(); // should be equal to nativeObject.myMethod()
myProperty = 'new value' // should call setter on native object
</code></pre>
</blockquote></mx-reply>Bug 1722802 was something for that, but that seems kind of stalled currently</td></tr>
  <tr class="msg" id="L5"><td class="ts-cell"><a class="ts" href="#L5" alt="Fri Aug 19 2022 06:52:44 GMT-0700 (Pacific Daylight Time)">13:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-3" title="@botzilla:mozilla.org">botzilla</span>&gt;</div></td><td class="msg-cell"><a href="https://bugzil.la/1722802">https://bugzil.la/1722802</a> — UNCONFIRMED (nobody) — Add JSAPI functions to create JS modules w/ custom exports</td></tr>
  <tr class="msg" id="L6"><td class="ts-cell"><a class="ts" href="#L6" alt="Fri Aug 19 2022 12:49:39 GMT-0700 (Pacific Daylight Time)">19:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell"><span class="nick-4">jonco</span> <span class="nick-8">Redfire</span> thanks for the replies</td></tr>
  <tr class="msg" id="L7"><td class="ts-cell"><a class="ts" href="#L7" alt="Fri Aug 19 2022 12:51:27 GMT-0700 (Pacific Daylight Time)">19:51</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-13" title="@theqwertiest:mozilla.org">TheQwertiest</span>&gt;</div></td><td class="msg-cell">that's really ... inconvenient though: I'm trying to migrate API in my embedding from global-bound objects to a proper module system (something like nodejs builtin modules), so I'm trying to minimize the amount of copy-paste to make it work</td></tr>
  <tr class="msg" id="L8"><td class="ts-cell"><a class="ts" href="#L8" alt="Fri Aug 19 2022 13:46:20 GMT-0700 (Pacific Daylight Time)">20:46</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <p><span class="nick-7">ewang21</span>: This is what I have locally, because gcc / clang are not installed in default FHS locations:</p>
<pre><code>ac_add_options --with-libclang-path=/nix/store/nz1l47i75bqs8kw1lqr6sphws6jxjxrs-clang-11.1.0-lib/lib
ac_add_options --with-clang-path=/nix/store/a5k6x6nmdsrdfgkr5wmp6srwsk1slm1h-clang-wrapper-11.1.0/bin/clang
export BINDGEN_CFLAGS="-cxx-isystem /nix/store/42izybv2fz3ps5pcg3dvcmn85pc9406y-gcc-11.3.0/include/c++/11.3.0 -isystem /nix/store/42izybv2fz3ps5pcg3dvcmn85pc9406y-gcc-11.3.0/include/c++/11.3.0/x86_64-unknown-linux-gnu"
export CC="/nix/store/kia8xygy2r9iblwbjrl163j4bpz84wz7-gcc-wrapper-11.3.0/bin/cc"
export CXX="/nix/store/kia8xygy2r9iblwbjrl163j4bpz84wz7-gcc-wrapper-11.3.0/bin/c++"

</code></pre>
</blockquote></mx-reply>Where can I set these parameters? I am not using mach. I am using configure and makefile</td></tr>
  <tr class="msg" id="L9"><td class="ts-cell"><a class="ts" href="#L9" alt="Fri Aug 19 2022 13:47:26 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><code>ac_add_options</code> is configure parameter</td></tr>
  <tr class="msg" id="L10"><td class="ts-cell"><a class="ts" href="#L10" alt="Fri Aug 19 2022 13:47:40 GMT-0700 (Pacific Daylight Time)">20:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, pass <code>--with-*</code> to <code>./configure</code></td></tr>
  <tr class="msg" id="L11"><td class="ts-cell"><a class="ts" href="#L11" alt="Fri Aug 19 2022 14:06:28 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so, pass <code>--with-*</code> to <code>./configure</code></blockquote></mx-reply>I used it like this "../configure --disable-jemalloc --enable-posix-nspr-emulation --enable-unaligned-private-values --with-system-zlib --with-intl-api --enable-optimize --with-libclang-path=/usr/lib/llvm-10/lib". It doesn't work.</td></tr>
  <tr class="msg" id="L12"><td class="ts-cell"><a class="ts" href="#L12" alt="Fri Aug 19 2022 14:06:42 GMT-0700 (Pacific Daylight Time)">21:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what happens for "doesn't work" ?</td></tr>
  <tr class="msg" id="L13"><td class="ts-cell"><a class="ts" href="#L13" alt="Fri Aug 19 2022 14:08:17 GMT-0700 (Pacific Daylight Time)">21:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> what happens for "doesn't work" ?</blockquote></mx-reply>It dosen't show ERROR: The libclang located at None is too old (need at least 4.0). But there is a new error "ERROR: Cannot find the target C compiler"</td></tr>
  <tr class="msg" id="L14"><td class="ts-cell"><a class="ts" href="#L14" alt="Fri Aug 19 2022 14:08:57 GMT-0700 (Pacific Daylight Time)">21:08</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">can you pastebin the whole command and output to <a href="https://paste.mozilla.org/">https://paste.mozilla.org/</a> ?</td></tr>
  <tr class="msg" id="L15"><td class="ts-cell"><a class="ts" href="#L15" alt="Fri Aug 19 2022 14:16:23 GMT-0700 (Pacific Daylight Time)">21:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> can you pastebin the whole command and output to <a href="https://paste.mozilla.org/">https://paste.mozilla.org/</a> ?</blockquote></mx-reply>I pasted</td></tr>
  <tr class="msg" id="L16"><td class="ts-cell"><a class="ts" href="#L16" alt="Fri Aug 19 2022 14:16:42 GMT-0700 (Pacific Daylight Time)">21:16</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">then you'll get the URL for your paste.  please post it here to share it</td></tr>
  <tr class="msg" id="L17"><td class="ts-cell"><a class="ts" href="#L17" alt="Fri Aug 19 2022 14:17:18 GMT-0700 (Pacific Daylight Time)">21:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> then you'll get the URL for your paste.  please post it here to share it</blockquote></mx-reply><a href="https://paste.mozilla.org/2SuQgw4J#L5">https://paste.mozilla.org/2SuQgw4J#L5</a></td></tr>
  <tr class="msg" id="L18"><td class="ts-cell"><a class="ts" href="#L18" alt="Fri Aug 19 2022 14:17:42 GMT-0700 (Pacific Daylight Time)">21:17</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">can you paste the output as well?</td></tr>
  <tr class="msg" id="L19"><td class="ts-cell"><a class="ts" href="#L19" alt="Fri Aug 19 2022 14:19:34 GMT-0700 (Pacific Daylight Time)">21:19</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> can you paste the output as well?</blockquote></mx-reply><a href="https://paste.mozilla.org/BSboQzWJ#L5,16">https://paste.mozilla.org/BSboQzWJ#L5,16</a></td></tr>
  <tr class="msg" id="L20"><td class="ts-cell"><a class="ts" href="#L20" alt="Fri Aug 19 2022 14:20:04 GMT-0700 (Pacific Daylight Time)">21:20</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is <code>/nix/store/kia8xygy2r9iblwbjrl163j4bpz84wz7-gcc-wrapper-11.3.0/bin/cc</code> correct path of the compiler in your environment ?</td></tr>
  <tr class="msg" id="L21"><td class="ts-cell"><a class="ts" href="#L21" alt="Fri Aug 19 2022 14:21:02 GMT-0700 (Pacific Daylight Time)">21:21</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">it sounds like you've exported CC and CXX environment variables before running the command. and that points non-existent compiler binary</td></tr>
  <tr class="msg" id="L22"><td class="ts-cell"><a class="ts" href="#L22" alt="Fri Aug 19 2022 14:22:07 GMT-0700 (Pacific Daylight Time)">21:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> it sounds like you've exported CC and CXX environment variables before running the command. and that points non-existent compiler binary</blockquote></mx-reply><a href="https://github.com/mozilla-spidermonkey/spidermonkey-embedding-examples/blob/esr68/docs/Building%20SpiderMonkey.md">https://github.com/mozilla-spidermonkey/spidermonkey-embedding-examples/blob/esr68/docs/Building%20SpiderMonkey.md</a> I just followed the steps here to build</td></tr>
  <tr class="msg" id="L23"><td class="ts-cell"><a class="ts" href="#L23" alt="Fri Aug 19 2022 14:22:48 GMT-0700 (Pacific Daylight Time)">21:22</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">you've run <code>export CC=...</code> commands, right?</td></tr>
  <tr class="msg" id="L24"><td class="ts-cell"><a class="ts" href="#L24" alt="Fri Aug 19 2022 14:23:06 GMT-0700 (Pacific Daylight Time)">21:23</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">they override the compiler's path</td></tr>
  <tr class="msg" id="L25"><td class="ts-cell"><a class="ts" href="#L25" alt="Fri Aug 19 2022 14:24:14 GMT-0700 (Pacific Daylight Time)">21:24</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">and <code>export</code> command alters the current shell's environment variables, so it keeps affecting all subsequent commands in the shell</td></tr>
  <tr class="msg" id="L26"><td class="ts-cell"><a class="ts" href="#L26" alt="Fri Aug 19 2022 14:25:21 GMT-0700 (Pacific Daylight Time)">21:25</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> they override the compiler's path</blockquote></mx-reply>"CC=/usr/bin/gcc CXX=/usr/bin/g++ ../configure --disable-jemalloc --enable-posix-nspr-emulation --enable-unaligned-private-values --with-system-zlib --with-intl-api --enable-optimize" It shows "ERROR: The libclang located at None is too old (need at least 4.0)."</td></tr>
  <tr class="msg" id="L27"><td class="ts-cell"><a class="ts" href="#L27" alt="Fri Aug 19 2022 14:26:16 GMT-0700 (Pacific Daylight Time)">21:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">can you pastebin the whole output?</td></tr>
  <tr class="msg" id="L28"><td class="ts-cell"><a class="ts" href="#L28" alt="Fri Aug 19 2022 14:26:58 GMT-0700 (Pacific Daylight Time)">21:26</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">with the whole command</td></tr>
  <tr class="msg" id="L29"><td class="ts-cell"><a class="ts" href="#L29" alt="Fri Aug 19 2022 14:27:45 GMT-0700 (Pacific Daylight Time)">21:27</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> can you pastebin the whole output?</blockquote></mx-reply><a href="https://paste.mozilla.org/3tn5rO3g#L5,16">https://paste.mozilla.org/3tn5rO3g#L5,16</a></td></tr>
  <tr class="msg" id="L30"><td class="ts-cell"><a class="ts" href="#L30" alt="Fri Aug 19 2022 14:28:33 GMT-0700 (Pacific Daylight Time)">21:28</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">this time <code>--with-libclang-path</code> is missing</td></tr>
  <tr class="msg" id="L31"><td class="ts-cell"><a class="ts" href="#L31" alt="Fri Aug 19 2022 14:30:31 GMT-0700 (Pacific Daylight Time)">21:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> this time <code>--with-libclang-path</code> is missing</blockquote></mx-reply><a href="https://paste.mozilla.org/0XfdDsOt#L5,16">https://paste.mozilla.org/0XfdDsOt#L5,16</a></td></tr>
  <tr class="msg" id="L32"><td class="ts-cell"><a class="ts" href="#L32" alt="Fri Aug 19 2022 14:30:41 GMT-0700 (Pacific Daylight Time)">21:30</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <a href="https://paste.mozilla.org/0XfdDsOt#L5,16">https://paste.mozilla.org/0XfdDsOt#L5,16</a></blockquote></mx-reply>same result</td></tr>
  <tr class="msg" id="L33"><td class="ts-cell"><a class="ts" href="#L33" alt="Fri Aug 19 2022 14:34:09 GMT-0700 (Pacific Daylight Time)">21:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p>so, it's failing here <a href="https://searchfox.org/mozilla-esr68/rev/4b79eedfe95ef427490a16e7c96f3a0930ab0c32/build/moz.configure/bindgen.configure#280-283">https://searchfox.org/mozilla-esr68/rev/4b79eedfe95ef427490a16e7c96f3a0930ab0c32/build/moz.configure/bindgen.configure#280-283</a></p>
<pre><code class="language-py">lib = CDLL(libclang.encode('utf-8'))
# We want at least 4.0. The API we test below is enough for that.
# Just accessing it should throw if not found.
fun = lib.clang_EvalResult_getAsLongLong
</code></pre>
</td></tr>
  <tr class="msg" id="L34"><td class="ts-cell"><a class="ts" href="#L34" alt="Fri Aug 19 2022 14:34:34 GMT-0700 (Pacific Daylight Time)">21:34</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">printing the exception there will tell us what's happening</td></tr>
  <tr class="msg" id="L35"><td class="ts-cell"><a class="ts" href="#L35" alt="Fri Aug 19 2022 14:35:49 GMT-0700 (Pacific Daylight Time)">21:35</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">try making the next <code>except:</code> line to <code>except Exception as e:</code>, and put <code>raise e</code> in the next line, and run configure again</td></tr>
  <tr class="msg" id="L36"><td class="ts-cell"><a class="ts" href="#L36" alt="Fri Aug 19 2022 14:47:49 GMT-0700 (Pacific Daylight Time)">21:47</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> try making the next <code>except:</code> line to <code>except Exception as e:</code>, and put <code>raise e</code> in the next line, and run configure again</blockquote></mx-reply><pre><code>except Exception as e:
    raise e
    die(dedent('''\
    The libclang located at {} is too old (need at least 4.0).

    Please make sure to update it or point to a newer libclang using
    --with-libclang-path.
    '''.format(libclang)))
    return False
</code></pre>
</td></tr>
  <tr class="msg" id="L37"><td class="ts-cell"><a class="ts" href="#L37" alt="Fri Aug 19 2022 14:48:05 GMT-0700 (Pacific Daylight Time)">21:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell">Is it correct?</td></tr>
  <tr class="msg" id="L38"><td class="ts-cell"><a class="ts" href="#L38" alt="Fri Aug 19 2022 14:48:26 GMT-0700 (Pacific Daylight Time)">21:48</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">yes, assuming the indent is correct there</td></tr>
  <tr class="msg" id="L39"><td class="ts-cell"><a class="ts" href="#L39" alt="Fri Aug 19 2022 14:49:46 GMT-0700 (Pacific Daylight Time)">21:49</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> yes, assuming the indent is correct there</blockquote></mx-reply><a href="https://paste.mozilla.org/6kb1xncC#L5,16">https://paste.mozilla.org/6kb1xncC#L5,16</a></td></tr>
  <tr class="msg" id="L40"><td class="ts-cell"><a class="ts" href="#L40" alt="Fri Aug 19 2022 14:52:29 GMT-0700 (Pacific Daylight Time)">21:52</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">oh, try adding <code>@imports(_from='__builtin__', _import='Exception')</code> line before <code>def min_libclang_version(libclang):</code> line</td></tr>
  <tr class="msg" id="L41"><td class="ts-cell"><a class="ts" href="#L41" alt="Fri Aug 19 2022 14:53:37 GMT-0700 (Pacific Daylight Time)">21:53</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> oh, try adding <code>@imports(_from='__builtin__', _import='Exception')</code> line before <code>def min_libclang_version(libclang):</code> line</blockquote></mx-reply>AttributeError: 'NoneType' object has no attribute 'encode'</td></tr>
  <tr class="msg" id="L42"><td class="ts-cell"><a class="ts" href="#L42" alt="Fri Aug 19 2022 14:54:29 GMT-0700 (Pacific Daylight Time)">21:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so <code>libclang</code> parameter somehow is None there</td></tr>
  <tr class="msg" id="L43"><td class="ts-cell"><a class="ts" href="#L43" alt="Fri Aug 19 2022 14:54:33 GMT-0700 (Pacific Daylight Time)">21:54</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> AttributeError: 'NoneType' object has no attribute 'encode'</blockquote></mx-reply><a href="https://paste.mozilla.org/ddxZXy14#L5,16">https://paste.mozilla.org/ddxZXy14#L5,16</a></td></tr>
  <tr class="msg" id="L44"><td class="ts-cell"><a class="ts" href="#L44" alt="Fri Aug 19 2022 14:55:04 GMT-0700 (Pacific Daylight Time)">21:55</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p>the value comes from <a href="https://searchfox.org/mozilla-esr68/rev/4b79eedfe95ef427490a16e7c96f3a0930ab0c32/build/moz.configure/bindgen.configure#149-150">https://searchfox.org/mozilla-esr68/rev/4b79eedfe95ef427490a16e7c96f3a0930ab0c32/build/moz.configure/bindgen.configure#149-150</a></p>
<pre><code class="language-py">def bindgen_config_paths(llvm_config, libclang_path, clang_path,
                         library_name_info, host, build_project):
</code></pre>
</td></tr>
  <tr class="msg" id="L45"><td class="ts-cell"><a class="ts" href="#L45" alt="Fri Aug 19 2022 14:56:12 GMT-0700 (Pacific Daylight Time)">21:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p>I guess it hits this path <a href="https://searchfox.org/mozilla-esr68/rev/4b79eedfe95ef427490a16e7c96f3a0930ab0c32/build/moz.configure/bindgen.configure#239-240">https://searchfox.org/mozilla-esr68/rev/4b79eedfe95ef427490a16e7c96f3a0930ab0c32/build/moz.configure/bindgen.configure#239-240</a></p>
<pre><code class="language-py">if build_project not in bindgen_projects:
    return namespace()
</code></pre>
</td></tr>
  <tr class="msg" id="L46"><td class="ts-cell"><a class="ts" href="#L46" alt="Fri Aug 19 2022 14:56:26 GMT-0700 (Pacific Daylight Time)">21:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><p>this message sounds related <a href="https://searchfox.org/mozilla-esr68/rev/4b79eedfe95ef427490a16e7c96f3a0930ab0c32/build/moz.configure/bindgen.configure#243-244">https://searchfox.org/mozilla-esr68/rev/4b79eedfe95ef427490a16e7c96f3a0930ab0c32/build/moz.configure/bindgen.configure#243-244</a></p>
<pre><code class="language-py">You must provide both of --with-libclang-path and --with-clang-path
or neither of them.'''))
</code></pre>
</td></tr>
  <tr class="msg" id="L47"><td class="ts-cell"><a class="ts" href="#L47" alt="Fri Aug 19 2022 14:56:39 GMT-0700 (Pacific Daylight Time)">21:56</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, try passing <code>--with-clang-path</code> as well</td></tr>
  <tr class="msg" id="L48"><td class="ts-cell"><a class="ts" href="#L48" alt="Fri Aug 19 2022 14:57:59 GMT-0700 (Pacific Daylight Time)">21:57</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> so, try passing <code>--with-clang-path</code> as well</blockquote></mx-reply>ERROR: Could not find autoconf 2.13</td></tr>
  <tr class="msg" id="L49"><td class="ts-cell"><a class="ts" href="#L49" alt="Fri Aug 19 2022 14:58:47 GMT-0700 (Pacific Daylight Time)">21:58</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">Do you have it?</td></tr>
  <tr class="msg" id="L50"><td class="ts-cell"><a class="ts" href="#L50" alt="Fri Aug 19 2022 14:59:00 GMT-0700 (Pacific Daylight Time)">21:59</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> Do you have it?</blockquote></mx-reply><a href="https://paste.mozilla.org/p58NEn7w#L5,16">https://paste.mozilla.org/p58NEn7w#L5,16</a></td></tr>
  <tr class="msg" id="L51"><td class="ts-cell"><a class="ts" href="#L51" alt="Fri Aug 19 2022 15:00:04 GMT-0700 (Pacific Daylight Time)">22:00</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">is autoconf 2.13 installed and in path?</td></tr>
  <tr class="msg" id="L52"><td class="ts-cell"><a class="ts" href="#L52" alt="Fri Aug 19 2022 15:01:49 GMT-0700 (Pacific Daylight Time)">22:01</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@mohamed_atef:matrix.org">Mohamed Atef</span>&gt;</div></td><td class="msg-cell"><a href="https://searchfox.org/mozilla-central/rev/5c04fc7016eb7f52cf835d482f1125c8f139c959/js/src/vm/GeckoProfiler-inl.h#85">https://searchfox.org/mozilla-central/rev/5c04fc7016eb7f52cf835d482f1125c8f139c959/js/src/vm/GeckoProfiler-inl.h#85</a></td></tr>
  <tr class="msg" id="L53"><td class="ts-cell"><a class="ts" href="#L53" alt="Fri Aug 19 2022 15:02:13 GMT-0700 (Pacific Daylight Time)">22:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell">I don't know. I got the code from here: <a href="http://archive.ubuntu.com/ubuntu/pool/main/m/mozjs68/">http://archive.ubuntu.com/ubuntu/pool/main/m/mozjs68/</a></td></tr>
  <tr class="msg" id="L54"><td class="ts-cell"><a class="ts" href="#L54" alt="Fri Aug 19 2022 15:02:30 GMT-0700 (Pacific Daylight Time)">22:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-8" title="@mohamed_atef:matrix.org">Mohamed Atef</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <a href="https://searchfox.org/mozilla-central/rev/5c04fc7016eb7f52cf835d482f1125c8f139c959/js/src/vm/GeckoProfiler-inl.h#85">https://searchfox.org/mozilla-central/rev/5c04fc7016eb7f52cf835d482f1125c8f139c959/js/src/vm/GeckoProfiler-inl.h#85</a></blockquote></mx-reply>so this should be Maybe&lt;JSContext*&gt; cx<br>and the caller should be Maybe too</td></tr>
  <tr class="msg" id="L55"><td class="ts-cell"><a class="ts" href="#L55" alt="Fri Aug 19 2022 15:02:42 GMT-0700 (Pacific Daylight Time)">22:02</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-7">ewang21</span>: you need to install autoconf2.13 <a href="https://github.com/mozilla-spidermonkey/spidermonkey-embedding-examples/blob/esr68/docs/Building%20SpiderMonkey.md#prerequisites">https://github.com/mozilla-spidermonkey/spidermonkey-embedding-examples/blob/esr68/docs/Building%20SpiderMonkey.md#prerequisites</a></td></tr>
  <tr class="msg" id="L56"><td class="ts-cell"><a class="ts" href="#L56" alt="Fri Aug 19 2022 15:03:39 GMT-0700 (Pacific Daylight Time)">22:03</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><span class="nick-8">Mohamed Atef</span>: no, the bug is about making <code>AutoGeckoProfilerEntry</code> itself optionally allocated in frontend</td></tr>
  <tr class="msg" id="L57"><td class="ts-cell"><a class="ts" href="#L57" alt="Fri Aug 19 2022 15:04:00 GMT-0700 (Pacific Daylight Time)">22:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">not about making <code>JSContext</code> parameter optional in <code>AutoGeckoProfilerEntry</code></td></tr>
  <tr class="msg" id="L58"><td class="ts-cell"><a class="ts" href="#L58" alt="Fri Aug 19 2022 15:04:18 GMT-0700 (Pacific Daylight Time)">22:04</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">so, allocate <code>AutoGeckoProfilerEntry</code> only when <code>JSContext</code> is available</td></tr>
  <tr class="msg" id="L59"><td class="ts-cell"><a class="ts" href="#L59" alt="Fri Aug 19 2022 15:05:00 GMT-0700 (Pacific Daylight Time)">22:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <span class="nick-7">ewang21</span>: you need to install autoconf2.13 <a href="https://github.com/mozilla-spidermonkey/spidermonkey-embedding-examples/blob/esr68/docs/Building%20SpiderMonkey.md#prerequisites">https://github.com/mozilla-spidermonkey/spidermonkey-embedding-examples/blob/esr68/docs/Building%20SpiderMonkey.md#prerequisites</a></blockquote></mx-reply>How can I get it?</td></tr>
  <tr class="msg" id="L60"><td class="ts-cell"><a class="ts" href="#L60" alt="Fri Aug 19 2022 15:05:13 GMT-0700 (Pacific Daylight Time)">22:05</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell">what OS are you on?</td></tr>
  <tr class="msg" id="L61"><td class="ts-cell"><a class="ts" href="#L61" alt="Fri Aug 19 2022 15:06:01 GMT-0700 (Pacific Daylight Time)">22:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell">Ubuntu 20.04</td></tr>
  <tr class="msg" id="L62"><td class="ts-cell"><a class="ts" href="#L62" alt="Fri Aug 19 2022 15:06:35 GMT-0700 (Pacific Daylight Time)">22:06</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-15" title="@arai:mozilla.org">arai</span>&gt;</div></td><td class="msg-cell"><code>apt install autoconf2.13</code></td></tr>
  <tr class="msg" id="L63"><td class="ts-cell"><a class="ts" href="#L63" alt="Fri Aug 19 2022 15:09:50 GMT-0700 (Pacific Daylight Time)">22:09</a></td><td class="nick-cell"><div class="m-ov">&lt;<span class="nick nick-7" title="@ewang21:mozilla.org">ewang21</span>&gt;</div></td><td class="msg-cell"><mx-reply><blockquote> <code>apt install autoconf2.13</code></blockquote></mx-reply>I can do "make" now. Thank you very much!</td></tr>

</tbody></table></div></div></div>
</body></html>